---
layout: post
title: " Curso Certificação Linux LPI-102: Criptografia de Dados"
date: '2013-04-07T06:21:00.000-07:00'
description: " Curso Certificação Linux LPI-102: Criptografia de Dados"
main-class: 'linux'
color: '#3b5998'
author: The Bang Bash
tags:
- Linux
- LPI
modified_time: '2013-05-03T07:16:03.949-07:00'
thumbnail: http://2.bp.blogspot.com/-o-Yn64vH-rg/UVceC5JdRNI/AAAAAAAABT8/6QE0W_E4PLI/s72-c/criptografia.png
twitter_text: " Curso Certificação Linux LPI-102: Criptografia de Dados"
introduction: " Curso Certificação Linux LPI-102: Criptografia de Dados"
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-o-Yn64vH-rg/UVceC5JdRNI/AAAAAAAABT8/6QE0W_E4PLI/s1600/criptografia.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="80" src="http://2.bp.blogspot.com/-o-Yn64vH-rg/UVceC5JdRNI/AAAAAAAABT8/6QE0W_E4PLI/s200/criptografia.png" width="200" /></a></div><!-------------------------------------------------> <script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------></p><p></p><p><b><span style="font-size: large;">Usando pgp (gpg)para criptografia de arquivos</span></p><p></p><p>O gpg (GNU pgp, versão livre da ferramenta pgp) permite encriptar dados, assim somente o destinatário terá acesso aos dados, adicionalmente poderá verificar se a origem dos dados é confiável (através da assinatura de arquivos). O sistema PGP se baseia no conceito de chave pública e privada: Sua chave pública é distribuída para as pessoas que deseja trocar dados/mensagens e a chave privada fica em sua máquina (ela não pode ser distribuída). As chaves públicas e privadas são armazenadas nos arquivos pubring.gpg e secring.gpg respectivamente, dentro do subdiretório ~/.gnupg. Veja [#s-d-cripto-gpg-criando Criando um par de chaves pública/privada, Seção 20.5.2] para criar este par de chaves. Os dados que recebe de outra pessoa são criptografados usando sua chave pública e somente você (de posse da chave privada) poderá desencriptar os dados. Quando assina um arquivo usando o pgp, ele faz isto usando sua chave privada, o destinatário de posse da chave pública poderá então confirmar que a origem dos dados é confiável. O gpg vem largamente sendo usado para transmissão segura de dados via internet. Muitos programas de e-mails como o mutt e sylpheed incluem o suporte a pgp embutido para envio de mensagens assinadas/encriptadas (MIME não tem uma codificação segura e não garante que a mensagem vem de quem realmente diz ser). Um servidor de e-mail no Linux configurado como as mesmas configurações/endereços do provedor da vítima pode enganar com sucesso um usuário passando-se por outro.</b></p><p><b></p><p><span style="font-size: large;">Instalando o PGP</span></p><p></p><p>{% highlight bash %}# apt-get install gnupg{% endhighlight %} Após instalar o gnupg, execute o comando gpg para criar o diretório ~/.gnupg que armazenará as chaves pública e privada.</b></p><p><b></p><p><span style="font-size: large;">Criando um par de chaves pública/privada</span></p><p></p><p>Para gerar um par de chaves pessoais use o comando gpg --gen-key. Ele executará os seguintes passos:</p><p></p><p>&nbsp;&nbsp;&nbsp; Chave criptográfica - Selecione DSA e ELGamal a não ser que tenha necessidades específicas.</p><p>&nbsp;&nbsp;&nbsp; Tamanho da chave - 1024 bits traz uma boa combinação de proteção/velocidade.</p><p>&nbsp;&nbsp;&nbsp; Validade da chave - 0 a chave não expira. Um número positivo tem o valor de dias, que pode ser seguido das letras w (semanas), m (meses) ou y (anos). Por exemplo, "7m", "2y", "60".</p><p></p><p>Após a validade, a chave será considerada inválida.</p><p></p><p>&nbsp;&nbsp;&nbsp; Nome de usuário - Nome para identificar a chave</p><p>&nbsp;&nbsp;&nbsp; E-mail - E-mail do dono da chave</p><p>&nbsp;&nbsp;&nbsp; comentário - Uma descrição sobre a chave do usuário.</p><p>&nbsp;&nbsp;&nbsp; Confirmação - Tecle "O" para confirmar os dados ou uma das outras letras para modificar os dados de sua chave.</p><p>&nbsp;&nbsp;&nbsp; Digite a FraseSenha - Senha que irá identificá-lo(a) como proprietário da chave privada. É chamada de FraseSenha pois pode conter espaços e não há limite de caracteres.Confirme e aguarde a geração da chave pública/privada.</p><p></p><p><span style="font-size: large;">Encriptando dados</span></p><p></p><p>Use o comando gpg -e arquivo faz a encriptação de dados:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg -e arquivo.txt{% endhighlight %}</p><p></p><p>Será pedida a identificação de usuário, digite o nome que usou para criar a chave. O arquivo criado será encriptado usando a chave pública do usuário (~/.gnupg/pubring.gpg) e terá a extensão .gpg adicionada (arquivo.txt.gpg). Além de criptografado, este arquivo é compactado (recomendável para grande quantidade de textos). A opção -a é usada para criar um arquivo criptografado com saída ASCII 7 bits:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg -e -a arquivo.txt{% endhighlight %}</p><p></p><p>O arquivo gerado terá a extensão .asc acrescentada (arquivo.txt.asc) e não será compactado. A opção -a é muito usada para o envio de e-mails. Para criptografar o arquivo para ser enviado a outro usuário, você deverá ter a chave pública do usuário cadastrado no seu chaveiro e especificar a opção -r seguida do nome/e-mail/ID da chave pública:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg -r kov -e arquivo.txt{% endhighlight %}</p><p></p><p>O exemplo acima utiliza a chave pública de kov para encriptar o arquivo arquivo.txt (somente ele poderá decriptar a mensagem usando sua chave privada). OBS: É recomendável especificar o nome de arquivo sempre como último argumento.</b></p><p><b></p><p><span style="font-size: large;">Decriptando dados com o gpg</span></p><p></p><p>Agora vamos fazer a operação reversa da acima, a opção -d é usada para decriptar os dados usando a chave privada:</p><p></p><p>&nbsp;&nbsp; {% highlight bash %}gpg -d arquivo.txt.asc &gt;arquivo.txt</p><p>&nbsp;&nbsp;&nbsp;&nbsp; gpg -d arquivo.txt.gpg &gt;arquivo.txt{% endhighlight %}</p><p></p><p>Descriptografa os arquivos arquivo.txt.asc e arquivo.txt.gpg recuperando seu conteúdo original. A sua "FraseSenha" será pedida para descriptografar os dados usando a chave privada (~/.gnupg/secring.gpg).</b></p><p><b></p><p><span style="font-size: large;">Assinando arquivos</span></p><p></p><p>Assinar um arquivo é garantir que você é a pessoa que realmente enviou aquele arquivo. Use a opção -s para assinar arquivos usando sua chave privada:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg -s arquivo.txt{% endhighlight %}</p><p></p><p>A "FraseSenha" será pedida para assinar os dados usando sua chave privada. Será gerado um arquivo arquivo.txt.gpg (assinado e compactado). Adicionalmente a opção --clearsign poderá ser usada para fazer uma assinatura em um texto plano, este é um recurso muito usado por programas de e-mails com suporte ao gpg:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg -s --clearsign arquivo.txt{% endhighlight %}</p><p></p><p>Será criado um arquivo chamado arquivo.txt.asc contendo o arquivo assinado e sem compactação.</b></p><p><b></p><p><span style="font-size: large;">Checando assinaturas</span></p><p></p><p>A checagem de assinatura consiste em verificar que quem nos enviou o arquivo é realmente quem diz ser e se os dados foram de alguma forma alterados. Você deverá ter a chave pública do usuário no seu chaveiro para fazer esta checagem . Para verificar os dados assinados acima usamos a opção --verify:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg --verify arquivo.txt.asc{% endhighlight %}</p><p></p><p>Se a saída for "Assinatura Correta", significa que a origem do arquivo é segura e que ele não foi de qualquer forma modificado.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg --verify arquivo.txt.gpg{% endhighlight %}</p><p></p><p>Se a saída for "Assinatura INCORRETA" significa que ou o usuário que enviou o arquivo não confere ou o arquivo enviado foi de alguma forma modificado.</b></p><p><b></p><p><span style="font-size: large;">Extraindo sua chave pública do chaveiro</span></p><p></p><p>Sua chave pública deve ser distribuída a outros usuários para que possam enviar dados criptografados ou checar a autenticidade de seus arquivos. Para exportar sua chave pública em um arquivo que será distribuído a outras pessoas ou servidores de chaves na Internet, use a opção --export:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg --export -a usuario &gt;chave-pub.txt{% endhighlight %}</p><p></p><p>Ao invés do nome do usuário, poderá ser usado seu e-mail, ID da chave, etc. A opção -a permite que os dados sejam gerados usando bits ASCII 7.</b></p><p><b></p><p><span style="font-size: large;">Adicionando chaves públicas ao seu chaveiro pessoal</span></p><p></p><p>Isto é necessário para o envio de dados criptografados e checagem de assinatura do usuário, use a opção --import:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg --import chave-pub-usuario.txt{% endhighlight %}</p><p></p><p>Assumindo que o arquivo chave-pub-usuario.txt contém a chave pública do usuário criada em [#s-d-cripto-gpg-c-e Extraindo sua chave pública do chaveiro, Seção 20.5.7]. O gpg detecta chaves públicas dentro de textos e faz a extração corretamente. Minha chave pública pode ser encontrada em [ch-apend.html#s-apend-pgp Chave Pública PGP, Seção 21.8] ou http://pgp.ai.mit.edu.</b></p><p><b></p><p><span style="font-size: large;">Listando chaves de seu chaveiro</span></p><p></p><p>Use o comando {% highlight bash %}gpg --list-keys{% endhighlight %} para listar as chaves pública do seu chaveiro. O comando gpg --list-secret-keys lista suas chaves privadas.</b></p><p><b></p><p><span style="font-size: large;">Apagando chaves de seu chaveiro</span></p><p></p><p>Quando uma chave pública é modificada ou por qualquer outro motivo deseja retira-la do seu chaveiro público, utilize a opção --delete-key:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; {% highlight bash %}gpg --delete-key usuario{% endhighlight %}</p><p></p><p>Pode ser especificado o nome de usuário, e-mail IDchave ou qualquer outro detalhe que confira com a chave pública do usuário. Será pedida a confirmação para excluir a chave pública. OBS: A chave privada pode ser excluída com a opção --delete-secret-key. Utilize-a com o máximo de atenção para excluir chaves secretas que não utiliza (caso use mais de uma), a exclusão acidental de sua chave secreta significa é como perder a chave de um cofre de banco: você não poderá descriptografar os arquivos enviados a você e não poderá enviar arquivos assinados. Mesmo assim se isto acontecer acidentalmente, você poderá recuperar o último backup da chave privada em ~/.gnupg/secring.gpg~.</b></p><p><b></p><p><span style="font-size: large;">Mudando sua FraseSenha</span></p><p></p><p>Execute o comando gpg --edit-key usuário, quando o programa entrar em modo de comandos, digite passwd. Será lhe pedida a "Frase Senha" atual e a nova "Frase Senha". Digite "save" para sair e salvar as alterações ou "quit" para sair e abandonar o que foi feito. O gpg --edit-key permite gerenciar diversos aspectos de suas chaves é interessante explora-lo digitando "?" para exibir todas as opções disponíveis.</b></p><p><b></p><p><span style="font-size: large;">Assinando uma chave digital</span></p><p></p><p>A assinatura de chaves é um meio de criar laços de confiança entre usuários PGP. Assinar uma chave de alguém é algo sério, você deve ter noção do que isto significa e das consequências que isto pode trazer antes de sair assinando chaves de qualquer um. O próprio teste para desenvolvedor da distribuição Debian requer como primeiro passo a identificação do candidato, caso sua chave pgp seja assinada por algum desenvolvedor desta distribuição, imediatamente o teste de identificação é completado. A partir disso você deve ter uma noção básica do que isto significa. Para assinar uma chave siga os seguintes passos:</p><p></p><p>&nbsp;&nbsp;&nbsp; Importe a chave pública do usuário (veja [#s-d-cripto-gpg-c-a Adicionando chaves públicas ao seu chaveiro pessoal, Seção 20.5.8]).</p><p>&nbsp;&nbsp;&nbsp; Execute o comando gpg --edit-key usuario (onde usuario é o nome do usuário/e-mail/IDchave da chave pública importada).</p><p>&nbsp;&nbsp;&nbsp; Digite list, e selecione a chave pública (pub) do usuário com o comando uid [numero_chave]. Para assinar todas as chaves públicas do usuário, não selecione qualquer chave com o comando uid.</p><p>&nbsp;&nbsp;&nbsp; Para assinar a chave pública do usuário digite sign, será perguntado se deseja realmente assinar a chave do usuário e então pedida a "FraseSenha" de sua chave privada.</p><p>&nbsp;&nbsp;&nbsp; Digite "list", repare que existe um campo chamado trust: n/q no lado direito. O primeiro parâmetro do "trust" indica o valor de confiança do dono e o segundo (após a /) o valor de confiança calculado automaticamente na chave. As seguintes possuem o seguinte significado:</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - - Nenhum dono encontrado/confiança não calculada.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e - Chave expirada/falha na checagem de confiança.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; q - Quando não conhece o usuário.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n - Quando não confia no usuário (é o padrão).</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m - Pouca confiança no usuário.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; f - Totalmente confiável.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; u - Indiscutivelmente confiável. Somente usado para especificar a chave pública do próprio usuário.</p><p></p><p>O valor de confiança da chave pode ser modificado com o comando trust e selecionando uma das opções de confiança. Os valores de confiança para a chave pública pessoal é -/u (não é necessário calcular a confiança/indiscutivelmente confiável).</b></p><p><b></p><p><span style="font-size: large;">Listando assinaturas digitais</span></p><p></p><p>Execute o comando gpg --list-sigs para listas todas as assinaturas existentes no seu chaveiro. Opcionalmente pode ser especificado um parâmetro para fazer referência a assinatura de um usuário:gpg --list-sigs usuario. O comando gpg --check-sigs adicionalmente faz a checagem de assinaturas.</b></p><p><b></p><p><span style="font-size: large;">Recomendações para a assinatura de chaves gpg</span></p><p></p><p>Este texto foi divulgado por uma pessoa que pediu para permanecer anônima na lista debian-user-portuguese@lists.debian.org explicando os procedimentos de segurança para a troca de chaves públicas individuais e em grupo de usuários. Ele é um pouco longo mas a pessoa é especializada no assunto, e seu foco é a segurança na troca de chaves e o que isto significa. Após consulta ao autor do texto, o texto foi reproduzido na íntegra, mantendo os padrões de formatação da mensagem.</p><p>{% highlight bash %}</p><p>&nbsp;&nbsp;&nbsp;&nbsp; Trocando assinaturas de chaves digitais</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Direitos de republicação cedidos ao domínio público, contanto que o texto</p><p>&nbsp;&nbsp;&nbsp;&nbsp; seja reproduzido em sua íntegra, sem modificações de quaisquer espécie, e</p><p>&nbsp;&nbsp;&nbsp;&nbsp; incluindo o título e nome do autor.</p><p></p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; 1. Assinaturas digitais</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 2. Chaves digitais e a teia de confiança</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 3. Trocando assinaturas de chaves digitais com um grupo de pessoas</p><p></p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; 1. Assinaturas digitais</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Uma assinatura digital é um número de tamanho razoável (costuma ter de 128 a</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 160 bits) que representa um bloco bem maior de informação, como um e-mail.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Pense numa assinatura como se ela fosse uma versão super-comprimida de um</p><p>&nbsp;&nbsp;&nbsp;&nbsp; texto.&nbsp; Se você muda alguma coisa (por menor que seja) no texto que uma</p><p>&nbsp;&nbsp;&nbsp;&nbsp; assinatura "assina", essa assinatura se torna inválida: ela não mais</p><p>&nbsp;&nbsp;&nbsp;&nbsp; representa aquele texto.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Existe uma relação direta entre uma assinatura e informação que ela assina.</p><p>&nbsp;&nbsp;&nbsp;&nbsp; Se uma das duas for modificada, elas passam a não mais "combinar" uma com a</p><p>&nbsp;&nbsp;&nbsp;&nbsp; a outra. Um programa de computador pode detectar isso, e avisar que a</p><p>&nbsp;&nbsp;&nbsp;&nbsp; assinatura é "inválida".</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Os algoritmos mais usados para criar e verificar assinaturas digitais são o</p><p>&nbsp;&nbsp;&nbsp;&nbsp; SHA-1, RIPEM160 e MD5.&nbsp; O MD5 não é considerado tão bom quanto os outros</p><p>&nbsp;&nbsp;&nbsp;&nbsp; dois.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Assinaturas digitais também funcionam com arquivos "binários", ou seja:</p><p>&nbsp;&nbsp;&nbsp;&nbsp; imagens, som, planilhas de cálculo... e chaves digitais.</p><p></p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; 2. Chaves digitais e a teia de confiança</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Chaves digitais são fáceis de falsificar, você só precisa criar uma chave</p><p>&nbsp;&nbsp;&nbsp;&nbsp; nova no nome de sicrano, por um endereço de e-mail novinho em folha daqueles</p><p>&nbsp;&nbsp;&nbsp;&nbsp; que você consegue nesses webmail da vida, e pronto.&nbsp; Agora é só espalhar</p><p>&nbsp;&nbsp;&nbsp;&nbsp; essa chave por aí que os bestas vão usá-la pensando que é de sicrano.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; A menos que os "bestas" não sejam tão bestas assim, tenham lido o manual do</p><p>&nbsp;&nbsp;&nbsp;&nbsp; seu software de criptografia, e saibam usar assinaturas e a teia de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; confiança para verificar se a tal chave é de sicrano mesmo.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Programas de criptografia (os bons, tipo PGP e GNUpg) usam um sistema de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; assinaturas nas chaves digitais para detectar e impedir esse tipo de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; problema:&nbsp; Ao usuário é dado o poder de "assinar" uma chave digital, dizendo</p><p>&nbsp;&nbsp;&nbsp;&nbsp; "sim, eu tenho certeza que essa chave é de fulano, e que o e-mail de fulano é</p><p>&nbsp;&nbsp;&nbsp;&nbsp; esse que está na chave".</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Note bem as palavras "certeza", e "e-mail".&nbsp; Ao assinar uma chave digital,</p><p>&nbsp;&nbsp;&nbsp;&nbsp; você está empenhando sua palavra de honra que o _nome_ do dono de verdade</p><p>&nbsp;&nbsp;&nbsp;&nbsp; daquela chave é o nome _que está na chave_, e que o endereço de e-mail</p><p>&nbsp;&nbsp;&nbsp;&nbsp; daquela chave é da pessoa (o "nome") que também está na chave.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Se todo mundo fizer isso direitinho (ou seja, não sair assinando a chave de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; qualquer um, só porque a outra pessoa pediu por e-mail, ou numa sala de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; chat), cria-se a chamada teia de confiança.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Numa teia de confiança, você confia na palavra de honra dos outros para</p><p>&nbsp;&nbsp;&nbsp;&nbsp; tentar verificar se uma chave digital é legítima, ou se é uma "pega-bobo".</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Suponha que Marcelo tenha assinado a chave de Cláudia, e que Roberto, que</p><p>&nbsp;&nbsp;&nbsp;&nbsp; conhece Marcelo pessoalmente e assinou a chave de Marcelo, queira falar com</p><p>&nbsp;&nbsp;&nbsp;&nbsp; Cláudia.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Roberto sabe que Marcelo leu o manual do programa de criptografia, e que ele</p><p>&nbsp;&nbsp;&nbsp;&nbsp; não é irresponsável.&nbsp; Assim, ele pode confiar na palavra de honra de Marcelo</p><p>&nbsp;&nbsp;&nbsp;&nbsp; que aquela chave digital da Cláudia é da Cláudia mesmo, e usar a chave pra</p><p>&nbsp;&nbsp;&nbsp;&nbsp; combinar um encontro com Cláudia.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Por outro lado, Roberto não conhece Cláudia (ainda), e não sabe que tipo de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; pessoa ela é. Assim, rapaz prevenido, ele não confia que Cláudia seja uma</p><p>&nbsp;&nbsp;&nbsp;&nbsp; pessoa responsável que verifica direitinho antes de assinar chaves.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Note que Roberto só confiou na assinatura de Marcelo porque, como ele já</p><p>&nbsp;&nbsp;&nbsp;&nbsp; tinha assinado a chave de Marcelo, ele sabe que foi Marcelo mesmo quem</p><p>&nbsp;&nbsp;&nbsp;&nbsp; assinou a chave de Cláudia.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Enrolado? Sim, é um pouco complicado, mas desenhe num papel as flechinhas de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; quem confia em quem, que você entende rapidinho como funciona.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; O uso da assinatura feita por alguém cuja chave você assinou, para validar</p><p>&nbsp;&nbsp;&nbsp;&nbsp; a chave digital de um terceiro, é um exemplo de uma pequena teia de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; confiança.</p><p></p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; 3. Trocando assinaturas de chaves digitais com um grupo de pessoas</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Lembre-se: ao assinar uma chave digital, você está empenhando sua palavra de</p><p>&nbsp;&nbsp;&nbsp;&nbsp; honra que toda a informação que você assinou naquela chave é verdadeira até</p><p>&nbsp;&nbsp;&nbsp;&nbsp; onde você pode verificar, _e_ que você tentou verificar direitinho.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Pense nisso como um juramento: "Eu juro, em nome da minha reputação</p><p>&nbsp;&nbsp;&nbsp;&nbsp; profissional e pessoal, que o nome e endereços de e-mail nessa chave são</p><p>&nbsp;&nbsp;&nbsp;&nbsp; realmente verdadeiros até onde posso verificar, e que fiz uma tentativa real</p><p>&nbsp;&nbsp;&nbsp;&nbsp; e razoável de verificar essa informação."</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Sim, é sério desse jeito mesmo. Você pode ficar muito "queimado" em certos</p><p>&nbsp;&nbsp;&nbsp;&nbsp; círculos se você assinar uma chave falsa, pensando que é verdadeira:&nbsp; a sua</p><p>&nbsp;&nbsp;&nbsp;&nbsp; assinatura mal-verificada pode vir a prejudicar outros que confiaram em</p><p>&nbsp;&nbsp;&nbsp;&nbsp; você.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Bom, já que o assunto é sério, como juntar um grupo de pessoas numa sala, e</p><p>&nbsp;&nbsp;&nbsp;&nbsp; trocar assinaturas de chaves entre si?&nbsp; Particularmente se são pessoas que</p><p>&nbsp;&nbsp;&nbsp;&nbsp; você nunca viu antes? Siga o protocolo abaixo, passo a passo, e sem pular ou</p><p>&nbsp;&nbsp;&nbsp;&nbsp; violar nenhum dos passos.</p><p></p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 -&nbsp; Reúna todos em uma sala, ou outro local não tumultuado, pressa e</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bagunça são inimigas da segurança.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 -&nbsp; Cada um dos presentes deve, então, ir de um em um e:</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.1 -&nbsp; Apresentar-se, mostrando _calmamente_ documentação original</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (nada de fotocópia) comprovando sua identidade.&nbsp; RG, CPF,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; passaporte, certidão de nascimento ou casamento, carteira de</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; motorista, cartão de crédito são todos bons exemplos. Só o RG</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sozinho não é -- tem muito RG falsificado por aí -- mas o RG</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; junto com o cartão de banco já seria suficiente.&nbsp; Se nenhum</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; documento tiver foto, também não é o bastante.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * Se alguém pedir o documento na mão, para verificar</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; direitinho, não leve pro lado pessoal. Deixe a pessoa</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; verificar até estar satisfeita (mas não descuide do</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; documento). Isso só significa que ela leva muito a sério a</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; responsabilidade de assinar chaves.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.2 -&nbsp; Entregar um papel com as informações da chave: Nome</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (QUE OBRIGATORIAMENTE PRECISA SER O MESMO NOME CONSTANTE NOS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DOCUMENTOS APRESENTADOS EM 2.1), e-mail, número da chave</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (keyID), e fingerprint da chave (assinatura digital da chave)</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RECIPIENTE DO PAPEL: Se você achar que os documentos que te</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; apresentaram não são prova suficiente, talvez porque o nome</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; não bate com o da chave, ou porque uma foto nos documentos não</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; está parecida com quem mostrou os documentos, marque</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; discretamente no papel, porque você NÃO deve assinar essa</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; chave.&nbsp;&nbsp; Se achar que o outro vai engrossar, não diga para ele</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; que não vai assinar a chave dele.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 -&nbsp; Pronto. Podem ir embora, porque o resto dos passos deve ser feito com</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; calma, em casa.&nbsp; Lembre-se que você não vai estar efetuando nenhum</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; julgamento moral a respeito de quem você assinar a chave. Você só irá</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; afirmar que a chave de sicrano é realmente aquela, e mais nada.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 -&nbsp; Para cada uma das chaves que você marcou no papel que "posso assinar":</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.1 -&nbsp; Peça para o seu programa de criptografia mostrar a chave e sua</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; assinatura (fingerprint).</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SE: O nome no papel for exatamente igual ao nome na chave</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (user ID/UID da chave). E: A assinatura no papel for</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exatamente igual Ã&nbsp; assinatura na chave (fingerprint).&nbsp; ENTÃO:</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vá para o passo 4.3.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.2 -&nbsp; As informações não bateram, por isso você não deve assinar a</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; chave.&nbsp; Se quiser, envie um e-mail avisando que não poderá</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; assinar a chave. Não aceite tentativas de retificação por</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e-mail ou telefone. Um outro encontro face-Ã -face, refazendo</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; todos os passos 2.1 e 2.2 é o único jeito de retificar</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; o problema.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.3 -&nbsp; As informações bateram, o que garante que o *nome* está</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; correto. Agora é preciso ter certeza do endereço de e-mail.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Para isso, envie uma e-mail *CIFRADA* pela chave que você está</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; testando, para o endereço de e-mail constante na chave.&nbsp; Nessa</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e-mail, coloque uma palavra secreta qualquer e peça para o</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destinatário te responder dizendo qual a palavra secreta que</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; você escreveu. Use uma palavra diferente para cada chave que</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; estiver testando, e anote no papel daquela chave qual palavra</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; você usou.</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.4 -&nbsp; Se você receber a resposta contendo a palavra secreta correta,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; você pode assinar a chave. Caso contrário, não assine a chave --</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; o endereço de e-mail pode ser falso.</p><p></p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp; Comandos do gpg (GNUpg) correspondentes a cada passo:</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.2 -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gpg --fingerprint &lt;seu nome ou 0xSuaKEYID&gt;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (retorna as informações que devem estar no papel a ser</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; entregue no passo 2.2)</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.1 -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gpg --receive-key &lt;0xKEYID&gt;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (procura a chave especificada nos keyservers)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gpg --sign-key &lt;0xKEYID&gt;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (assina uma chave)</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Assume-se que você sabe cifrar e decifrar mensagens. Caso</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; não saiba, ainda não é hora de querer sair assinando chaves.{% endhighlight %}</p><p></p><p><span style="font-size: x-large;">&nbsp;Criando arquivos .tar.gz com senha</span></b></p><p></p><p><b>Aqui vai uma dica para deixar seus arquivos compactados em tar.gz com senha, na verdade o arquivo será transformado num .gpg, segue:</p><p></p><p>Para compactar:</p><p></p><p>Cria o tar(-cf, C de Create) e (f de Files), logo (-cf Create Files, serve pra memorizar)</b></p><p>{% highlight bash %}</p><p>$ tar -cf nome_que_vc_escolher.tar arquivo_ou_pasta</p><p>{% endhighlight %}</p><p><b>Agora transforma ele em tar.gz</b></p><p>{% highlight bash %}</p><p>$gzip -9 arquivo_que_vc_criou.tar</p><p>{% endhighlight %}</p><p><b>e agora usa-se o gpg pôr senha:<b></b></b></p><p>{% highlight bash %}</p><p>$ gpg -c arquivo.tar.gz</p><p>{% endhighlight %}</p><p><b></p><p>Descompactando, é preciso pôr a senha pré criada, quando ele solicitar</b></p><p>{% highlight bash %}</p><p>$ gpg arquivo.tar.gz.gpg</p><p>{% endhighlight %}</p><p><b>Agora extrair(-xf X de eXtract e F de Files, eXtract Files)<b></b></b></p><p>{% highlight bash %}</p><p>$ tar -xf arquivo.tar.gz</p><p>{% endhighlight %}</p><p><b>Pronto!</b></p><p></p><p><span style="color: #444444;"><i><span style="font-size: x-small;">Fonte: http://pt.wikibooks.org/wiki/Guia_do_Linux/Avançado</span></i></span>

</p>
