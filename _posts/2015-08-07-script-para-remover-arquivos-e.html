---
layout: post
title: Script para remover arquivos e diretórios com segurança
date: '2015-08-06T22:49:00.000-07:00'
author: Marcos Oliveira
tags:
- Shell Script
- Dicas
- Terminal
- Comandos
modified_time: '2015-08-06T23:15:57.794-07:00'
thumbnail: http://2.bp.blogspot.com/-aUKpJK7kMiQ/VcREUraJU1I/AAAAAAAABng/iIL_yMZUcHk/s72-c/remove.jpg
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-2580364533806241476
blogger_orig_url: http://www.terminalroot.com.br/2015/08/script-para-remover-arquivos-e.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-aUKpJK7kMiQ/VcREUraJU1I/AAAAAAAABng/iIL_yMZUcHk/s1600/remove.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-aUKpJK7kMiQ/VcREUraJU1I/AAAAAAAABng/iIL_yMZUcHk/s1600/remove.jpg" /></a></div><br /><h3><span style="color: #666666;"><b>Script para remover arquivos e diretórios com segurança</b></span></h3><b><br />&nbsp;Muitas vezes perdemos arquivos ou diretórios que não queríamos excluir com o comando <span style="font-size: large;"><span style="color: blue;">rm</span></span> . Muitos tem a ideia de usar um alias para o <span style="font-size: large;"><span style="color: blue;">rm</span></span> e o<span style="font-size: large;"><span style="color: blue;"> rm -rf</span></span> ou só <span style="font-size: large;"><span style="color: blue;">rm -f</span></span> para <span style="font-size: x-large;"><span style="color: white;"><span style="background-color: black;">rm -i</span></span></span> , no entanto , mesmo depois de dizer sim , nos arrependemos de excluir . Logo , criei essa outra solução de mover para lixeira , aumentado ainda mais a possibilidade da desistência . Você pode criar um <u><i>script</i></u> com esse código , ou mesmo editar seu <span style="font-size: large;"><span style="color: purple;">.bashrc</span></span> e incluir essa função junto com o alias . Lembrando que quando criamos uma função dentro do </b><span style="font-size: large;">.bashrc</span><b> , automaticamente ela virará também um comando , desta forma você pode usar , caso deseje , o comando remover em vez de </b><span style="font-size: large;">rm</span><b> também.<br /><br /><span style="font-size: large;">&nbsp;Primeiramente vou explicar cada linha:</span><br /><br />&nbsp;No primeiro comando da função <span style="font-size: large;"><span style="color: #38761d;">remover()</span></span>, temos uma validação no caso do usuário ter usado qualquer opção: <span style="color: red;">-rf</span> , <span style="color: red;">-r</span> , <span style="color: red;">-f</span> ,... Limpando a opção e pegando somente o arquivo , para isso usei o comando <span style="font-size: x-large;"><span style="color: #660000;">shift</span></span> , ou seja , o <span style="color: blue;"><span style="font-size: large;">$2</span></span> (que é o arquivo ou o diretório , nesse caso) e passando para o <span style="color: blue;"><span style="font-size: large;">$1</span></span>.<br /><br />{% highlight bash %}if [&nbsp; ! -f "$1" ] &amp;&amp; [ ! -d "$1" ]; then<br />&nbsp;&nbsp;&nbsp; shift<br />fi{% endhighlight %}<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;Logo depois temos declarações de variáveis , onde a origem será o arquivo "<span style="color: blue;"><span style="font-size: large;">$1</span></span>" e o destino o caminho da lixeira <span style="color: magenta;"><span style="font-size: x-large;">/home/<span style="color: #3d85c6;">$USER</span>/.local/share/Trash/files/</span></span> e então movemos o arquivo para lixeira , caso posteriormente , deseje realmente excluir , esvaziar a lixeira ou só os arquivos/diretórios que deseje.<br /><br />{% highlight bash %}origem="$1";<br />destino="/home/$USER/.local/share/Trash/files/";&nbsp;&nbsp;&nbsp; <br />mv "$origem" "$destino";<br />echo "Movido para lixeira!";{% endhighlight %}</b><br /><blockquote class="tr_bq"><b>No final uma mensagem de interação só para lembrar de que não foi excluído!</b></blockquote><b><br />Como disse , você pode editar seu </b><span style="font-size: x-large;">~/.bashrc</span><b> e incluir no final do arquivo o código abaixo:<br /><br /> <script src="https://gist.github.com/terminalrootsh/2a0141bbf306ecc862b9.js"></script> <br />Só isso!</b>