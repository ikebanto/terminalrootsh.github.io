---
layout: post
title: 'Função Shell Script (Bash): Procura o CEP pelo nome da rua, cidade e UF informados'
date: '2014-09-06T19:19:00.000-07:00'
description: 'Função Shell Script (Bash): Procura o CEP pelo nome da rua, cidade e UF informados'
main-class: 'bash'
color: '#c2003a'
author: Marcos Oliveira
tags:
- Shell Script
- AWK
- SED
modified_time: '2014-10-28T15:49:16.438-07:00'
thumbnail: http://1.bp.blogspot.com/-6k6Mx5CNwuc/Ur9FmBGo9aI/AAAAAAAAAHM/VVA_zbTxQes/s72-c/correios-shell.jpg
twitter_text: 'Função Shell Script (Bash): Procura o CEP pelo nome da rua, cidade e UF informados'
introduction: 'Função Shell Script (Bash): Procura o CEP pelo nome da rua, cidade e UF informados'
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-6k6Mx5CNwuc/Ur9FmBGo9aI/AAAAAAAAAHM/VVA_zbTxQes/s1600/correios-shell.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-6k6Mx5CNwuc/Ur9FmBGo9aI/AAAAAAAAAHM/VVA_zbTxQes/s1600/correios-shell.jpg" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div>
<span style="font-family: Verdana,sans-serif;"><span style="color: #444444;"><span style="font-size: large;"><b><span style="color: blue;">Procura o CEP</span> pelo nome da <span style="color: purple;">rua</span>, <span style="color: purple;">cidade</span> e <span style="color: purple;">UF</span> informados  Segue o how to que ensina como utilizá-la, que por sinal é bem simples, que também é o cabeçalho e a opção <span style="color: blue;"><span style="font-size: x-large;">cep2rua</span></span> <span style="color: #073763;"><i>--help</i></span></b></span></span></span>

<blockquote class="tr_bq"><span style="color: purple;"><i><b>Função Shell Script (Bash): Procura o CEP pelo nome da rua, cidade e UF informados</b></i></span>
<span style="color: purple;"><i><b>-h (exibe ajuda, cabeçalho da função)</b></i></span>
<span style="color: purple;"><i><b>-e (exibe o endereço completo)</b></i></span>
<span style="color: purple;"><i><b>Obs.: As opções (parâmetro: -h ou --help ; -e ou --endereco)</b></i></span>
<span style="color: purple;"><i><b> , se forem utilizadas, o -h não recebe complementp.</b></i></span>
<span style="color: purple;"><i><b>    e o -e ou --endereco , deve ser utilizado antes de </b></i></span>
<span style="color: purple;"><i><b>    digitar o endereço.</b></i></span>
<span style="color: purple;"><i><b>
</b></i></span><span style="color: purple;"><i><b>Usos: cep2rua [rua cidade uf]</b></i></span>
<span style="color: purple;"><i><b>     cep2rua [-e] [rua cidade uf]</b></i></span>
<span style="color: purple;"><i><b>     cep2rua [--endereco] [rua cidade uf]</b></i></span>
<span style="color: purple;"><i><b>     cep2rua [-h]</b></i></span>
<span style="color: purple;"><i><b>     cep2rua [--help]</b></i></span>
<span style="color: purple;"><i><b>
</b></i></span><span style="color: purple;"><i><b>Exs.: cep2rua rua santana salvador ba</b></i></span>
<span style="color: purple;"><i><b>    cep2rua -e rua rio da ilha salvador ba</b></i></span>
<span style="color: purple;"><i><b>  cep2rua rua cambui londrina pr</b></i></span>
<span style="color: purple;"><i><b>     cep2rua rua silverio lelis sao paulo sp</b></i></span>
<span style="color: purple;"><i><b>    cep2rua -e jobim rio de janeiro rj</b></i></span>
<span style="color: purple;"><i><b> </b></i></span>
<span style="color: purple;"><i><b>Autor:Marcos da B. M. Oliveira , http://www.terminalroot.com.br/</b></i></span>
<span style="color: purple;"><i><b>Desde: 2013-12-28</b></i></span>
<span style="color: purple;"><i><b>Versão: 1</b></i></span>
<span style="color: purple;"><i><b>Licença: GPL</b></i></span>
<span style="color: purple;"><i><b>Requisitos:</b></i></span></blockquote>

<a href="http://pastebin.com/RCx8LSdg" target="_blank"><b><span style="font-size: x-large;">Código no PasteBin</span></b></a>: 
<iframe src="http://pastebin.com/raw/5AL1fkEZ" style="border:none;width:100%;"></iframe> 
<p>Código no Blog: </p>
<div class="adp"><b>#!/bin/bash
# ----------------------------------------------------------------------------
# Função Shell Script (Bash): Procura o CEP pelo nome da rua, cidade e UF informados
# AWK, SED, Shell Script, 
# -h (exibe ajuda, cabeçalho da função)
# -e (exibe o endereço completo)
# Obs.: As opções (parâmetro: -h ou --help ; -e ou --endereco)
# , se forem utilizadas, o -h não recebe complementp.
#    e o -e ou --endereco , deve ser utilizado antes de 
#    digitar o endereço.
#
# Usos: cep2rua [rua cidade uf]
#    cep2rua [-e] [rua cidade uf]
#    cep2rua [--endereco] [rua cidade uf]
#    cep2rua [-h]
#    cep2rua [--help]
#
# Exs.: cep2rua rua santana salvador ba
#    cep2rua -e rua rio da ilha salvador ba
#  cep2rua rua cambui londrina pr
#    cep2rua rua silverio lelis sao paulo sp
#    cep2rua -e jobim rio de janeiro rj
# 
# Autor:Marcos da B. M. Oliveira , http://www.terminalroot.com.br/
# Desde: 2013-12-28
# Versão: 1
# Licença: GPL
# Requisitos: lynx ( se vc não tiver ele instalado, instale: apt-get install lynx )
# ----------------------------------------------------------------------------
cep2rua(){

  if [ "$*" ]; then
   echo -n
  else
   echo "Sem parâmetros, digite o endereço."
   exit 0
  fi
  
  if [ "$(which lynx)" ]; then
   echo -n "";
  else
   echo -e "o lynx não está instaldo, instale com:
   apt-get install lynx
  Abortar."
    exit 0
  fi

  # variavel do que for digitado
  local endereco="$*"

  # troca os espaços em branco por '+' para efetuar pesquisa
  local endereco="$(echo $endereco | sed -e 's/ /+/g')"

  # endereço para pesquisa
  local urlendereco="http://maps.google.com/maps/api/geocode/json?address=$*&amp;sensor=false"

  # baixa o código fonte do arquivo pesquisado
  local endcom="$(lynx -source "$urlendereco" |

  # imprime só a linha que contém a palavra 'formatted_address'
  sed -n '/formatted_address/p' |

  # divide a linha anterior em duas, após o sinal de ': '
  sed 's/: /: \n/' |

  # deleta a linha que contém a string 'formatted_address'
  sed '/formatted_address/d' |

  # troca todas as ocorrências de \"(aspas duplas) e de ,(vírgula) por nada, e imprime o endereço.
  sed 's/\"\|\,//g')"

   case $1 in

    -h | --help)
     echo "Usos:
  cep2rua [rua cidade uf]
  cep2rua [-e] [rua cidade uf]
  cep2rua [--endereco] [rua cidade uf]
  cep2rua [-h]
  cep2rua [--help]

Exs.: 
  cep2rua rua santana salvador ba
  cep2rua -e rua rio da ilha salvador ba
  cep2rua rua cambui londrina pr
  cep2rua rua silverio lelis sao paulo sp
  cep2rua -e jobim rio de janeiro rj"
     shift
     exit 0
     ;;
    -e | endereco)
     echo "$endcom";
     shift
     ;;
    *)
     local cep=$(echo $endcom | tr -d -c 0123456789)
     if [ "$cep" = "" ]; then
      echo "Cep não encontrado";
     else
      echo "$(echo $cep | cut -c1-5)-$(echo $cep | cut -c6-8)"; 
     fi
     exit 0
     ;;
   esac
 
  exit 0
}
cep2rua "$@" </b></div>

</p>
