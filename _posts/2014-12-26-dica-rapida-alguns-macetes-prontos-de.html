---
layout: post
title: 'Dica rápida: Alguns macetes prontos de SED'
date: '2014-12-26T09:16:00.002-08:00'
description: 'Dica rápida: Alguns macetes prontos de SED'
main-class: 'misc'
color: '#34a853'
author: Marcos Oliveira
tags:
- SED
modified_time: '2014-12-26T09:16:43.867-08:00'
thumbnail: http://2.bp.blogspot.com/-e9-yRYSfFaM/UZAQueYopEI/AAAAAAAABlk/CMblr_45IQE/s72-c/post-icon-sed.jpg
twitter_text: 'Dica rápida: Alguns macetes prontos de SED'
introduction: 'Dica rápida: Alguns macetes prontos de SED'
---

<p>
 </p><p></p><p><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-e9-yRYSfFaM/UZAQueYopEI/AAAAAAAABlk/CMblr_45IQE/s1600/post-icon-sed.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-e9-yRYSfFaM/UZAQueYopEI/AAAAAAAABlk/CMblr_45IQE/s320/post-icon-sed.jpg" /></a></div></p><p><b></b></p><p><blockquote><b>Segue alguns prontos que eu uso pra memorizar e pôr em prática, espero que seja útil, segue abaixo(HAVERÁALTERAÇÕES E RE-POSTAGENS DESTE POST):</b></blockquote><b></p><p></b></p><p><h2 id="toc1">Descrição de todos os comandos</h2><pre>prompt$ man sed</p><p>prompt$ pinfo sed</p><p></pre>Ou num resumo rápido: </p><p><pre>Legenda:</p><p></p><p>[ARQUIVO]       arquivo ou fluxo de texto (via pipe) original a ser modificado</p><p>[TEXTO]         trecho de texto. pode ser uma palavra, uma linha,</p><p>                várias separadas por \n, ou mesmo um vazio.</p><p>[PADRÃO]        [TEXTO] contido no ESPAÇO PADRÃO</p><p></p><p></p><p>= imprime o número da linha atual do [ARQUIVO]</p><p># inicia um comentário</p><p>! inverte a lógica do comando</p><p>; separador de comandos</p><p>, separador de faixas de endereço</p><p>{ início de bloco de comandos</p><p>} fim de bloco de comandos</p><p></p><p>s substitui um trecho de texto por outro</p><p>y traduz um caractere por outro</p><p></p><p>i insere um texto antes da linha atual </p><p>c troca a linha atual por um texto</p><p>a anexa um texto após a linha atual</p><p></p><p>g restaura o [TEXTO] contido no ESPAÇO RESERVA (sobrescrevendo)</p><p>G restaura o [TEXTO] contido no ESPAÇO RESERVA (anexando)</p><p>h guarda o [PADRÃO] no ESPAÇO RESERVA (sobrescrevendo)</p><p>H guarda o [PADRÃO] no ESPAÇO RESERVA (anexando)</p><p>x troca os conteúdos dos ESPAÇO PADRÃO e RESERVA</p><p></p><p>p imprime o [PADRÃO]</p><p>P imprime a primeira linha do [PADRÃO]</p><p>l imprime o [PADRÃO] mostrando caracteres brancos</p><p></p><p>r inclui conteúdo de um arquivo antes da linha atual</p><p>w grava o [PADRÃO] num arquivo</p><p></p><p>: define uma marcação</p><p>b pula até uma marcação </p><p>t pula até uma marcação, se o último s/// funcionou (condicional)</p><p></p><p>d apaga o [PADRÃO]</p><p>D apaga a primeira linha do [PADRÃO]</p><p>n vai para a próxima linha</p><p>N anexa a próxima linha no [PADRÃO]</p><p>q finaliza o Sed imediatamente</p><p></p><p></pre><h2 id="toc2">Lista de todos os comandos por categoria</h2><pre>                   informações =</p><p>                    marcadores :</p><p>                   comentários #</p><p>            comandos de edição s i c a y</p><p>     comandos de registradores g G h H x</p><p>         comandos de impressão p P l</p><p>           comandos de arquivo r w</p><p>                 modificadores g i !</p><p>                   separadores ; -e \n</p><p>             controle de fluxo b t d D n N q</p><p>                      endereço // ,</p><p>                   limitadores {} \(\)</p><p>       registradores dinâmicos \1 \2 ... \9</p><p></pre><ul><li><b>A opção -i altera o mesmo arquivo sem precisar redirecinar para outro.</b></li><li><b>{% highlight bash %}$ sed -i 's/marcos/pinguim/' arquivo.txt{% endhighlight %}</b></li><li><b>A opção -e IMPRIME NA TELA SEM ALTERAR O ARQUIVO.</b></li><li><b>{% highlight bash %}$ sed -e 's/marcos/pinguim/' arquivo.txt{% endhighlight %}</b></li><li><b>Inserir no final de cada linha o ";"</b></li><li><b>{% highlight bash %}$ sed 's/$/;/' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Inserir no início de cada linha o "/home/"</b></li><li><b>{% highlight bash %}$ sed 's/^/\/home\//' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Troca a PRIMEIRA da palavra "marcos" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/marcos/pinguim/' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca TODAS ocorrências da palavra "marcos" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/marcos/pinguim/g' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca SOMENTE A TERCEIRA ocorrência da palavra "marcos" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/marcos/pinguim/3' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca TODAS ocorrências da palavra "marcos" pela palavra "pinguim", MENOS a linha que contém a palavra 'linux' e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed '/linux/! s/marcos/pinguim/g' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca TODAS ocorrências da palavra "marcos"  ou "Marcos" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/[Mm]arcos/pinguim/g' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Apagar as linhas que POSSUEM (independe de ser no inicio) a string "xxxx"</b></li><li><b>{% highlight bash %}$ sed '/xxxx/d' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Apagar as linhas que COMEÇAM(somente no início de cada linha) a string "xxxx"</b></li><li><b>{% highlight bash %}$ sed '/^xxxx/d' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Troca TODAS ocorrências da palavra "marcos", "eric", "camila" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/marcos\|eric\|camila/pinguim/g' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca tudo que estiver ENTRE as palavras Marcos e Eric, exmplo, o texto é:</b></li><li><b>"No sábado Marcos saiu de pra brincar de bicicleta com o Eric"</b></li><li><b>e ficará assim:</b></li><li><b>"No sábado Marcos brincou de bola com o Eric"</b></li><li><b>{% highlight bash %}$ sed -i 's/Marcos.*Eric/Marcos brincou de bola com o Eric/g' arquivo.txt{% endhighlight %}</b></li><li><b>Elimina LINHAS EM BRANCO</b></li><li><b>{% highlight bash %}$ sed -i '/^$/d' arquivo.txt{% endhighlight %}</b></li><li><b>Substituir "foo" por "bar" somente as linhas que contém "plop"</b></li><li><b>{% highlight bash %}$ sed '/plop/ s/foo/bar/g'{% endhighlight %}</b></li><li><b>Substituir "foo" por "bar" exceto as linhas que contém "plop"</b></li><li><b>{% highlight bash %}$ sed '/plop/! s/foo/bar/g'{% endhighlight %}</b></li><li><b>Inserir da Linha 2 a linha 7 o "#" no início de cada linha</b></li><li><b>{% highlight bash %}$ sed '2,7s/^/#/' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Inserir a palavra 'NEW' no início de cada linha, da linha 21 até a linha 28:</b></li><li><b>{% highlight bash %}$ sed -i '21,28s/^/NEW/' arquivo.txt {% endhighlight %}</b></li></ul></p><p><u><b><i><span style="background-color: blue;"><span style="color: white;">Links para +Estudos(Fundamentais):</span></span></i></b></u></p><p></p><p><div id="header"><h1>Alfabeto do sed</h1></div><pre style="font-size: 80%; overflow: auto;">a    append        anexa um texto após o <span style="color: blue;">[BUFFER]</span></p><p>b    branch        pula até uma marcação</p><p>c    change        troca o <span style="color: blue;">[BUFFER]</span> por um texto</p><p>d    delete        apaga o <span style="color: blue;">[BUFFER]</span></p><p>D    delete        apaga a primeira linha do <span style="color: blue;">[BUFFER]</span></p><p>e    execute       executa um comando do sistema #GNU-sed</p><p>F    filename      imprime o nome do aquivo atual #GNU-sed</p><p>g    get           copia texto do <span style="color: blue;">[BUFFER]</span> pro <span style="color: red;">[RESERVA]</span> (sobrescreve)</p><p>G    get           copia texto do <span style="color: blue;">[BUFFER]</span> pro <span style="color: red;">[RESERVA]</span> (anexa)</p><p>h    hold          copia texto do <span style="color: red;">[RESERVA]</span> pro <span style="color: blue;">[BUFFER]</span> (sobrescreve)</p><p>H    hold          copia texto do <span style="color: red;">[RESERVA]</span> pro <span style="color: blue;">[BUFFER]</span> (anexa)</p><p>i    insert        insere um texto antes do <span style="color: blue;">[BUFFER]</span></p><p>l    list          imprime o <span style="color: blue;">[BUFFER]</span> mostrando caracteres invisíveis</p><p>n    next          carrega a próxima linha no <span style="color: blue;">[BUFFER]</span></p><p>N    next          anexa a próxima linha no <span style="color: blue;">[BUFFER]</span></p><p>p    print         imprime o conteúdo do <span style="color: blue;">[BUFFER]</span></p><p>P    print         imprime a primeira linha do <span style="color: blue;">[BUFFER]</span></p><p>q    quit          imprime o <span style="color: blue;">[BUFFER]</span> e finaliza o Sed</p><p>Q    quit          descarta o <span style="color: blue;">[BUFFER]</span> e finaliza o Sed #GNU-sed</p><p>r    read          mostra conteúdo do arquivo após o <span style="color: blue;">[BUFFER]</span></p><p>R    read          mostra uma linha do arquivo após o <span style="color: blue;">[BUFFER]</span> #GNU-sed</p><p>s    substitute    substitui um trecho de texto por outro</p><p>t    tee           pula na marcação, se um s/// funcionou</p><p>T    tee           pula na marcação, se nenhum s/// funcionou #GNU-sed</p><p>v    version       aborta se a versão do sed for incompatível #GNU-sed</p><p>w    write         grava o <span style="color: blue;">[BUFFER]</span> num arquivo</p><p>W    write         grava a 1ª linha do <span style="color: blue;">[BUFFER]</span> num arquivo #GNU-sed</p><p>x    eXchange      troca os conteúdos do <span style="color: blue;">[BUFFER]</span> e <span style="color: red;">[RESERVA]</span></p><p>y    ?             troca caracteres</p><p>z    zap           limpa o conteúdo do <span style="color: blue;">[BUFFER]</span> #GNU-sed</p><p></p><p>Nota:</p><p>   <span style="color: blue;">[BUFFER]</span>  - Buffer padrão do sed (pattern space)</p><p>   <span style="color: red;">[RESERVA]</span> - Buffer reserva do sed (hold space)</p><p></pre><a href="http://aurelio.net/sed/" target="_blank">http://aurelio.net/sed/</a></p><p><a href="http://thobias.org/doc/sosed.html" target="_blank">http://thobias.org/doc/sosed.html</a></p><p><a href="http://pt.kioskea.net/faq/sed-478" target="_blank">http://pt.kioskea.net/faq/sed-478</a>

</p>
