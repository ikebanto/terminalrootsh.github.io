---
layout: post
title: 'Dica rápida: Alguns macetes prontos de SED'
date: '2014-12-26T09:16:00.002-08:00'
description: 'Dica rápida: Alguns macetes prontos de SED'
main-class: 'misc'
color: '#34a853'
author: Marcos Oliveira
tags:
- SED
modified_time: '2014-12-26T09:16:43.867-08:00'
thumbnail: http://2.bp.blogspot.com/-e9-yRYSfFaM/UZAQueYopEI/AAAAAAAABlk/CMblr_45IQE/s72-c/post-icon-sed.jpg
twitter_text: 'Dica rápida: Alguns macetes prontos de SED'
introduction: 'Dica rápida: Alguns macetes prontos de SED'
---

 <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-e9-yRYSfFaM/UZAQueYopEI/AAAAAAAABlk/CMblr_45IQE/s1600/post-icon-sed.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-e9-yRYSfFaM/UZAQueYopEI/AAAAAAAABlk/CMblr_45IQE/s320/post-icon-sed.jpg" /></a></div><br /><b></b><br /><blockquote><b>Segue alguns prontos que eu uso pra memorizar e pôr em prática, espero que seja útil, segue abaixo(HAVERÁALTERAÇÕES E RE-POSTAGENS DESTE POST):</b></blockquote><b><br /></b><br /><h2 id="toc1">Descrição de todos os comandos</h2><pre>prompt$ man sed<br />prompt$ pinfo sed<br /></pre>Ou num resumo rápido: <br /><pre>Legenda:<br /><br />[ARQUIVO]       arquivo ou fluxo de texto (via pipe) original a ser modificado<br />[TEXTO]         trecho de texto. pode ser uma palavra, uma linha,<br />                várias separadas por \n, ou mesmo um vazio.<br />[PADRÃO]        [TEXTO] contido no ESPAÇO PADRÃO<br /><br /><br />= imprime o número da linha atual do [ARQUIVO]<br /># inicia um comentário<br />! inverte a lógica do comando<br />; separador de comandos<br />, separador de faixas de endereço<br />{ início de bloco de comandos<br />} fim de bloco de comandos<br /><br />s substitui um trecho de texto por outro<br />y traduz um caractere por outro<br /><br />i insere um texto antes da linha atual <br />c troca a linha atual por um texto<br />a anexa um texto após a linha atual<br /><br />g restaura o [TEXTO] contido no ESPAÇO RESERVA (sobrescrevendo)<br />G restaura o [TEXTO] contido no ESPAÇO RESERVA (anexando)<br />h guarda o [PADRÃO] no ESPAÇO RESERVA (sobrescrevendo)<br />H guarda o [PADRÃO] no ESPAÇO RESERVA (anexando)<br />x troca os conteúdos dos ESPAÇO PADRÃO e RESERVA<br /><br />p imprime o [PADRÃO]<br />P imprime a primeira linha do [PADRÃO]<br />l imprime o [PADRÃO] mostrando caracteres brancos<br /><br />r inclui conteúdo de um arquivo antes da linha atual<br />w grava o [PADRÃO] num arquivo<br /><br />: define uma marcação<br />b pula até uma marcação <br />t pula até uma marcação, se o último s/// funcionou (condicional)<br /><br />d apaga o [PADRÃO]<br />D apaga a primeira linha do [PADRÃO]<br />n vai para a próxima linha<br />N anexa a próxima linha no [PADRÃO]<br />q finaliza o Sed imediatamente<br /><br /></pre><h2 id="toc2">Lista de todos os comandos por categoria</h2><pre>                   informações =<br />                    marcadores :<br />                   comentários #<br />            comandos de edição s i c a y<br />     comandos de registradores g G h H x<br />         comandos de impressão p P l<br />           comandos de arquivo r w<br />                 modificadores g i !<br />                   separadores ; -e \n<br />             controle de fluxo b t d D n N q<br />                      endereço // ,<br />                   limitadores {} \(\)<br />       registradores dinâmicos \1 \2 ... \9<br /></pre><ul><li><b>A opção -i altera o mesmo arquivo sem precisar redirecinar para outro.</b></li><li><b>{% highlight bash %}$ sed -i 's/marcos/pinguim/' arquivo.txt{% endhighlight %}</b></li><li><b>A opção -e IMPRIME NA TELA SEM ALTERAR O ARQUIVO.</b></li><li><b>{% highlight bash %}$ sed -e 's/marcos/pinguim/' arquivo.txt{% endhighlight %}</b></li><li><b>Inserir no final de cada linha o ";"</b></li><li><b>{% highlight bash %}$ sed 's/$/;/' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Inserir no início de cada linha o "/home/"</b></li><li><b>{% highlight bash %}$ sed 's/^/\/home\//' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Troca a PRIMEIRA da palavra "marcos" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/marcos/pinguim/' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca TODAS ocorrências da palavra "marcos" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/marcos/pinguim/g' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca SOMENTE A TERCEIRA ocorrência da palavra "marcos" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/marcos/pinguim/3' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca TODAS ocorrências da palavra "marcos" pela palavra "pinguim", MENOS a linha que contém a palavra 'linux' e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed '/linux/! s/marcos/pinguim/g' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca TODAS ocorrências da palavra "marcos"  ou "Marcos" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/[Mm]arcos/pinguim/g' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Apagar as linhas que POSSUEM (independe de ser no inicio) a string "xxxx"</b></li><li><b>{% highlight bash %}$ sed '/xxxx/d' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Apagar as linhas que COMEÇAM(somente no início de cada linha) a string "xxxx"</b></li><li><b>{% highlight bash %}$ sed '/^xxxx/d' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Troca TODAS ocorrências da palavra "marcos", "eric", "camila" pela palavra "pinguim" e envia as mudanças para um novo arquivo:</b></li><li><b>{% highlight bash %}$ sed 's/marcos\|eric\|camila/pinguim/g' arquivo.txt &gt; novoarquivo.txt{% endhighlight %}</b></li><li><b>Troca tudo que estiver ENTRE as palavras Marcos e Eric, exmplo, o texto é:</b></li><li><b>"No sábado Marcos saiu de pra brincar de bicicleta com o Eric"</b></li><li><b>e ficará assim:</b></li><li><b>"No sábado Marcos brincou de bola com o Eric"</b></li><li><b>{% highlight bash %}$ sed -i 's/Marcos.*Eric/Marcos brincou de bola com o Eric/g' arquivo.txt{% endhighlight %}</b></li><li><b>Elimina LINHAS EM BRANCO</b></li><li><b>{% highlight bash %}$ sed -i '/^$/d' arquivo.txt{% endhighlight %}</b></li><li><b>Substituir "foo" por "bar" somente as linhas que contém "plop"</b></li><li><b>{% highlight bash %}$ sed '/plop/ s/foo/bar/g'{% endhighlight %}</b></li><li><b>Substituir "foo" por "bar" exceto as linhas que contém "plop"</b></li><li><b>{% highlight bash %}$ sed '/plop/! s/foo/bar/g'{% endhighlight %}</b></li><li><b>Inserir da Linha 2 a linha 7 o "#" no início de cada linha</b></li><li><b>{% highlight bash %}$ sed '2,7s/^/#/' arquivo.txt &gt; novo.txt{% endhighlight %}</b></li><li><b>Inserir a palavra 'NEW' no início de cada linha, da linha 21 até a linha 28:</b></li><li><b>{% highlight bash %}$ sed -i '21,28s/^/NEW/' arquivo.txt {% endhighlight %}</b></li></ul><br /><u><b><i><span style="background-color: blue;"><span style="color: white;">Links para +Estudos(Fundamentais):</span></span></i></b></u><br /><br /><div id="header"><h1>Alfabeto do sed</h1></div><pre style="font-size: 80%; overflow: auto;">a    append        anexa um texto após o <span style="color: blue;">[BUFFER]</span><br />b    branch        pula até uma marcação<br />c    change        troca o <span style="color: blue;">[BUFFER]</span> por um texto<br />d    delete        apaga o <span style="color: blue;">[BUFFER]</span><br />D    delete        apaga a primeira linha do <span style="color: blue;">[BUFFER]</span><br />e    execute       executa um comando do sistema #GNU-sed<br />F    filename      imprime o nome do aquivo atual #GNU-sed<br />g    get           copia texto do <span style="color: blue;">[BUFFER]</span> pro <span style="color: red;">[RESERVA]</span> (sobrescreve)<br />G    get           copia texto do <span style="color: blue;">[BUFFER]</span> pro <span style="color: red;">[RESERVA]</span> (anexa)<br />h    hold          copia texto do <span style="color: red;">[RESERVA]</span> pro <span style="color: blue;">[BUFFER]</span> (sobrescreve)<br />H    hold          copia texto do <span style="color: red;">[RESERVA]</span> pro <span style="color: blue;">[BUFFER]</span> (anexa)<br />i    insert        insere um texto antes do <span style="color: blue;">[BUFFER]</span><br />l    list          imprime o <span style="color: blue;">[BUFFER]</span> mostrando caracteres invisíveis<br />n    next          carrega a próxima linha no <span style="color: blue;">[BUFFER]</span><br />N    next          anexa a próxima linha no <span style="color: blue;">[BUFFER]</span><br />p    print         imprime o conteúdo do <span style="color: blue;">[BUFFER]</span><br />P    print         imprime a primeira linha do <span style="color: blue;">[BUFFER]</span><br />q    quit          imprime o <span style="color: blue;">[BUFFER]</span> e finaliza o Sed<br />Q    quit          descarta o <span style="color: blue;">[BUFFER]</span> e finaliza o Sed #GNU-sed<br />r    read          mostra conteúdo do arquivo após o <span style="color: blue;">[BUFFER]</span><br />R    read          mostra uma linha do arquivo após o <span style="color: blue;">[BUFFER]</span> #GNU-sed<br />s    substitute    substitui um trecho de texto por outro<br />t    tee           pula na marcação, se um s/// funcionou<br />T    tee           pula na marcação, se nenhum s/// funcionou #GNU-sed<br />v    version       aborta se a versão do sed for incompatível #GNU-sed<br />w    write         grava o <span style="color: blue;">[BUFFER]</span> num arquivo<br />W    write         grava a 1ª linha do <span style="color: blue;">[BUFFER]</span> num arquivo #GNU-sed<br />x    eXchange      troca os conteúdos do <span style="color: blue;">[BUFFER]</span> e <span style="color: red;">[RESERVA]</span><br />y    ?             troca caracteres<br />z    zap           limpa o conteúdo do <span style="color: blue;">[BUFFER]</span> #GNU-sed<br /><br />Nota:<br />   <span style="color: blue;">[BUFFER]</span>  - Buffer padrão do sed (pattern space)<br />   <span style="color: red;">[RESERVA]</span> - Buffer reserva do sed (hold space)<br /></pre><a href="http://aurelio.net/sed/" target="_blank">http://aurelio.net/sed/</a><br /><a href="http://thobias.org/doc/sosed.html" target="_blank">http://thobias.org/doc/sosed.html</a><br /><a href="http://pt.kioskea.net/faq/sed-478" target="_blank">http://pt.kioskea.net/faq/sed-478</a>