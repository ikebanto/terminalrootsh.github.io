---
layout: post
title: Gerador e Validador de CPF em Shell Script (Bash)
date: '2013-10-27T14:16:00.000-07:00'
author: The Bang Bash
tags:
- Shell Script
modified_time: '2015-11-07T17:18:59.771-08:00'
thumbnail: http://4.bp.blogspot.com/-3Sb91HnQWjI/Um2BK10LatI/AAAAAAAACfw/whKAAMneIQI/s72-c/cpf-shell.jpg
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-1778904731736991240
blogger_orig_url: http://www.terminalroot.com.br/2013/10/gerador-e-validador-de-cpf-em-shell.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-3Sb91HnQWjI/Um2BK10LatI/AAAAAAAACfw/whKAAMneIQI/s1600/cpf-shell.jpg" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-3Sb91HnQWjI/Um2BK10LatI/AAAAAAAACfw/whKAAMneIQI/s1600/cpf-shell.jpg" /></a></div><br /><br /><br /><blockquote class="tr_bq"><span style="color: purple;"><b><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-size: large;">Segue Script abaixo em 3 formatos com COMENTÁRIOS, qualquer dúvida é só comentar. </span></span></b></span></blockquote><br /><span style="font-size: x-large;"><b>Código no Git Gist </b></span><br /><script src="https://gist.github.com/terminalrootsh/1ada95cd3c1564c6c579.js"></script> <br /><u><i><b>PasteBin:</b></i></u><br /><script src="http://pastebin.com/embed_js.php?i=G29vQRNp"></script> <br /><u><i><b>CodeBlog</b></i></u>:<br /><div class="adp">#!/bin/bash<br /># ----------------------------------------------------------------------------<br /># Gerador e Validador de CPF em Shell Script (Bash)<br /># <br /># Uso: ./cpf [cpf]<br /># Ex.: ./cpf 552.056.731-09&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # pode utilizar assim<br />#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./cpf 55205673109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # pode utilizar assim<br />#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./cpf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # gera um CPF válido<br />#<br /># Autor: Marcos da B.M. Oliveira , http://www.terminalroot.com.br/<br /># Desde: Dom 27 Out 2013 18:36:16 BRST<br /># Versão: 1<br /># Licença: GPL<br /># ----------------------------------------------------------------------------<br /># limpa todos os caracteres que não for número.<br />cpf=$(echo $1 | tr -d -c 0123456789)<br /><br /><br />##############################################################################<br />##############################################################################<br />########## -- SE FOR PRA GERAR CPF -- ########################################<br />##############################################################################<br />##############################################################################<br /># se não for digitado o parâmetro do cpf<br />if [ -z $cpf ]; then<br /><br /># gera 3 sequência de 3 caracters, números randômicos.<br />&nbsp;&nbsp;&nbsp; for i in {1..3};<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; a+=$(($RANDOM%9));<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; b+=$(($RANDOM%9));<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; c+=$(($RANDOM%9));<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br /># estabelece o valor temporário do cpf, só pra poder gerar os digitos verificadores.&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; cpf="$a$b$c"<br /><br /># array pra multiplicar com o 9(do 10 ao 2)primeiros caracteres do CPF, respectivamente.<br />mulUm=(10 9 8 7 6 5 4 3 2)<br /><br /># um loop pra multiplicar caracteres e numeros.Utilizamos nove pois são 9 casas do CPF<br />&nbsp;&nbsp;&nbsp; for digito in {1..9}<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # gera a soma dos números posteriormente multiplicados<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; let DigUm+=$(($(echo $cpf | cut -c$digito) * $(echo ${mulUm[$(($digito-1))]})))<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br /># divide por 11<br />restUm=$(($DigUm%11))<br /><br /># gera o primeiro digito subtraindo 11 menos o resto da divisão<br />primeiroDig=$((11-$restUm))<br /><br /># caso o resto da divisão seja menor que 2<br />[ $restUm -lt 2 ] &amp;&amp; primeiroDig=0&nbsp;&nbsp;&nbsp; <br /><br /># atualizamos o valor do CPF já com um digito descoberto<br />cpf="$a$b$c$primeiroDig"<br /><br /># agora um novo array pra multiplicar com o 10(do 11 ao 2) primeiros caracteres do CPF, respectivamente.<br />mulDois=(11 10 9 8 7 6 5 4 3 2)<br /><br />&nbsp;&nbsp;&nbsp; for digitonew in {1..10}<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; let DigDois+=$(($(echo $cpf | cut -c$digitonew) * $(echo ${mulDois[$(($digitonew-1))]})))&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done<br /><br /><br /># também divide por 11<br />restDois=$(($DigDois%11)) <br /><br /># gera o segundo digito subtraindo 11 menos o resto da divisão<br />segundoDig=$((11-$restDois))<br /><br /># caso o resto da divisão seja menor que 2<br />[ $restDois -lt 2 ] &amp;&amp; segundoDig=0&nbsp;&nbsp;&nbsp; <br /><br /># exibe o CPF gerado e formatado.<br />echo -e "\033[1;35mO CPF gerado é:\033[1;32m $a.$b.$c-$primeiroDig$segundoDig\033[0m"<br /><br />&nbsp;&nbsp;&nbsp; # FINALIZA O SCRIPT<br />&nbsp;&nbsp;&nbsp; exit 0;<br />fi<br /><br />##############################################################################<br />##############################################################################<br /># -- SE DIGITAR O PARÂMETRO, MAS A QUANTIDADE DE NÚMEROS SEJA MENOR QUE 11 -- <br />##############################################################################<br />##############################################################################<br /><br /># verificamos a quantidade de caracteres<br />qtde=$(echo $cpf | wc -c)<br /><br /># como o wc aumenta mais 1, então precisamos subtrair para chegar a quantidade exata.<br />total=$(echo $(($qtde-1)))<br /><br /># se for menos de 11 caracteres<br />if [ $total != 11 ]; then<br /><br />&nbsp;&nbsp;&nbsp; # informa o erro e mostra quantos caracteres têm.<br />&nbsp;&nbsp;&nbsp; echo -e "\033[1;31mQuantidade de números diferente de \033[7;31m11\033[0m: Total:\033[1;35m $total\033[0m";<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; # finaliza o script<br />&nbsp;&nbsp;&nbsp; exit 0;<br />else<br /><br /># se passar, continua...daqui pra frente os comentários serão o mesmo da geração do CPF, <br /># mas nesse caso pra validar, pois só os dois últimos é que definem o CPF<br /><br />##############################################################################<br />##############################################################################<br />########## -- SE FOR PRA VALIDAR CPF -- ########################################<br />##############################################################################<br />##############################################################################<br /><br />mulUm=(10 9 8 7 6 5 4 3 2)<br /><br />&nbsp;&nbsp;&nbsp; for digito in {1..9}<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; let DigUm+=$(($(echo $cpf | cut -c$digito) * $(echo ${mulUm[$(($digito-1))]})))&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br /><br /><br />mulDois=(11 10 9 8 7 6 5 4 3 2)<br /><br />&nbsp;&nbsp;&nbsp; for digitonew in {1..10}<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; let DigDois+=$(($(echo $cpf | cut -c$digitonew) * $(echo ${mulDois[$(($digitonew-1))]})))&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done<br /><br /><br />restUm=$(($DigUm%11))<br />[ $restUm -lt 2 ] &amp;&amp; primeiroDig=0&nbsp;&nbsp;&nbsp; <br />primeiroDig=$((11-$restUm))<br /><br /><br />restDois=$(($DigDois%11))<br />[ $restDois -lt 2 ] &amp;&amp; segundoDig=0&nbsp;&nbsp;&nbsp; <br />segundoDig=$((11-$restDois))<br /><br />&nbsp;&nbsp;&nbsp; if [ $(echo $cpf | cut -c10) == $primeiroDig -a&nbsp; $(echo $cpf | cut -c11) == $segundoDig ]; then<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # se o CPF for válido.<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; echo -e "\033[1;32mCPF Válido!\033[0m"<br />&nbsp;&nbsp;&nbsp; else<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # informa quais seriam os dois últimos se o CPF estiver incorreto.<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; echo -e "\033[1;31mCPF Inválido.\nOs dois Últimos números deveriam ser:\033[1;32m $primeiroDig$segundoDig\033[0m"<br />&nbsp;&nbsp;&nbsp; fi<br />&nbsp;&nbsp;&nbsp; <br />fi </div><br /><br />