---
layout: post
title: Gerador e Validador de CPF em Shell Script (Bash)
date: '2013-10-27T14:16:00.000-07:00'
description: Gerador e Validador de CPF em Shell Script (Bash)
main-class: 'bash'
color: '#c2003a'
author: The Bang Bash
tags:
- Shell Script
modified_time: '2015-11-07T17:18:59.771-08:00'
thumbnail: http://4.bp.blogspot.com/-3Sb91HnQWjI/Um2BK10LatI/AAAAAAAACfw/whKAAMneIQI/s72-c/cpf-shell.jpg
twitter_text: Gerador e Validador de CPF em Shell Script (Bash)
introduction: Gerador e Validador de CPF em Shell Script (Bash)
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-3Sb91HnQWjI/Um2BK10LatI/AAAAAAAACfw/whKAAMneIQI/s1600/cpf-shell.jpg" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-3Sb91HnQWjI/Um2BK10LatI/AAAAAAAACfw/whKAAMneIQI/s1600/cpf-shell.jpg" /></a></div></p><p></p><p></p><p><blockquote class="tr_bq"><span style="color: purple;"><b><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-size: large;">Segue Script abaixo em 3 formatos com COMENTÁRIOS, qualquer dúvida é só comentar. </span></span></b></span></blockquote></p><p><span style="font-size: x-large;"><b>Código no Git Gist </b></span></p><p><script src="https://gist.github.com/terminalrootsh/1ada95cd3c1564c6c579.js"></script> </p><p><u><i><b>PasteBin:</b></i></u></p><p><script src="http://pastebin.com/embed_js.php?i=G29vQRNp"></script> </p><p><u><i><b>CodeBlog</b></i></u>:</p><p><div class="adp">#!/bin/bash</p><p># ----------------------------------------------------------------------------</p><p># Gerador e Validador de CPF em Shell Script (Bash)</p><p># </p><p># Uso: ./cpf [cpf]</p><p># Ex.: ./cpf 552.056.731-09&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # pode utilizar assim</p><p>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./cpf 55205673109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # pode utilizar assim</p><p>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./cpf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # gera um CPF válido</p><p>#</p><p># Autor: Marcos da B.M. Oliveira , http://www.terminalroot.com.br/</p><p># Desde: Dom 27 Out 2013 18:36:16 BRST</p><p># Versão: 1</p><p># Licença: GPL</p><p># ----------------------------------------------------------------------------</p><p># limpa todos os caracteres que não for número.</p><p>cpf=$(echo $1 | tr -d -c 0123456789)</p><p></p><p></p><p>##############################################################################</p><p>##############################################################################</p><p>########## -- SE FOR PRA GERAR CPF -- ########################################</p><p>##############################################################################</p><p>##############################################################################</p><p># se não for digitado o parâmetro do cpf</p><p>if [ -z $cpf ]; then</p><p></p><p># gera 3 sequência de 3 caracters, números randômicos.</p><p>&nbsp;&nbsp;&nbsp; for i in {1..3};</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; a+=$(($RANDOM%9));</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; b+=$(($RANDOM%9));</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; c+=$(($RANDOM%9));</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p># estabelece o valor temporário do cpf, só pra poder gerar os digitos verificadores.&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; cpf="$a$b$c"</p><p></p><p># array pra multiplicar com o 9(do 10 ao 2)primeiros caracteres do CPF, respectivamente.</p><p>mulUm=(10 9 8 7 6 5 4 3 2)</p><p></p><p># um loop pra multiplicar caracteres e numeros.Utilizamos nove pois são 9 casas do CPF</p><p>&nbsp;&nbsp;&nbsp; for digito in {1..9}</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # gera a soma dos números posteriormente multiplicados</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; let DigUm+=$(($(echo $cpf | cut -c$digito) * $(echo ${mulUm[$(($digito-1))]})))</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p># divide por 11</p><p>restUm=$(($DigUm%11))</p><p></p><p># gera o primeiro digito subtraindo 11 menos o resto da divisão</p><p>primeiroDig=$((11-$restUm))</p><p></p><p># caso o resto da divisão seja menor que 2</p><p>[ $restUm -lt 2 ] &amp;&amp; primeiroDig=0&nbsp;&nbsp;&nbsp; </p><p></p><p># atualizamos o valor do CPF já com um digito descoberto</p><p>cpf="$a$b$c$primeiroDig"</p><p></p><p># agora um novo array pra multiplicar com o 10(do 11 ao 2) primeiros caracteres do CPF, respectivamente.</p><p>mulDois=(11 10 9 8 7 6 5 4 3 2)</p><p></p><p>&nbsp;&nbsp;&nbsp; for digitonew in {1..10}</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; let DigDois+=$(($(echo $cpf | cut -c$digitonew) * $(echo ${mulDois[$(($digitonew-1))]})))&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done</p><p></p><p></p><p># também divide por 11</p><p>restDois=$(($DigDois%11)) </p><p></p><p># gera o segundo digito subtraindo 11 menos o resto da divisão</p><p>segundoDig=$((11-$restDois))</p><p></p><p># caso o resto da divisão seja menor que 2</p><p>[ $restDois -lt 2 ] &amp;&amp; segundoDig=0&nbsp;&nbsp;&nbsp; </p><p></p><p># exibe o CPF gerado e formatado.</p><p>echo -e "\033[1;35mO CPF gerado é:\033[1;32m $a.$b.$c-$primeiroDig$segundoDig\033[0m"</p><p></p><p>&nbsp;&nbsp;&nbsp; # FINALIZA O SCRIPT</p><p>&nbsp;&nbsp;&nbsp; exit 0;</p><p>fi</p><p></p><p>##############################################################################</p><p>##############################################################################</p><p># -- SE DIGITAR O PARÂMETRO, MAS A QUANTIDADE DE NÚMEROS SEJA MENOR QUE 11 -- </p><p>##############################################################################</p><p>##############################################################################</p><p></p><p># verificamos a quantidade de caracteres</p><p>qtde=$(echo $cpf | wc -c)</p><p></p><p># como o wc aumenta mais 1, então precisamos subtrair para chegar a quantidade exata.</p><p>total=$(echo $(($qtde-1)))</p><p></p><p># se for menos de 11 caracteres</p><p>if [ $total != 11 ]; then</p><p></p><p>&nbsp;&nbsp;&nbsp; # informa o erro e mostra quantos caracteres têm.</p><p>&nbsp;&nbsp;&nbsp; echo -e "\033[1;31mQuantidade de números diferente de \033[7;31m11\033[0m: Total:\033[1;35m $total\033[0m";</p><p>&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; # finaliza o script</p><p>&nbsp;&nbsp;&nbsp; exit 0;</p><p>else</p><p></p><p># se passar, continua...daqui pra frente os comentários serão o mesmo da geração do CPF, </p><p># mas nesse caso pra validar, pois só os dois últimos é que definem o CPF</p><p></p><p>##############################################################################</p><p>##############################################################################</p><p>########## -- SE FOR PRA VALIDAR CPF -- ########################################</p><p>##############################################################################</p><p>##############################################################################</p><p></p><p>mulUm=(10 9 8 7 6 5 4 3 2)</p><p></p><p>&nbsp;&nbsp;&nbsp; for digito in {1..9}</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; let DigUm+=$(($(echo $cpf | cut -c$digito) * $(echo ${mulUm[$(($digito-1))]})))&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p></p><p></p><p>mulDois=(11 10 9 8 7 6 5 4 3 2)</p><p></p><p>&nbsp;&nbsp;&nbsp; for digitonew in {1..10}</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; let DigDois+=$(($(echo $cpf | cut -c$digitonew) * $(echo ${mulDois[$(($digitonew-1))]})))&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; done</p><p></p><p></p><p>restUm=$(($DigUm%11))</p><p>[ $restUm -lt 2 ] &amp;&amp; primeiroDig=0&nbsp;&nbsp;&nbsp; </p><p>primeiroDig=$((11-$restUm))</p><p></p><p></p><p>restDois=$(($DigDois%11))</p><p>[ $restDois -lt 2 ] &amp;&amp; segundoDig=0&nbsp;&nbsp;&nbsp; </p><p>segundoDig=$((11-$restDois))</p><p></p><p>&nbsp;&nbsp;&nbsp; if [ $(echo $cpf | cut -c10) == $primeiroDig -a&nbsp; $(echo $cpf | cut -c11) == $segundoDig ]; then</p><p></p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # se o CPF for válido.</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; echo -e "\033[1;32mCPF Válido!\033[0m"</p><p>&nbsp;&nbsp;&nbsp; else</p><p></p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # informa quais seriam os dois últimos se o CPF estiver incorreto.</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; echo -e "\033[1;31mCPF Inválido.\nOs dois Últimos números deveriam ser:\033[1;32m $primeiroDig$segundoDig\033[0m"</p><p>&nbsp;&nbsp;&nbsp; fi</p><p>&nbsp;&nbsp;&nbsp; </p><p>fi </div></p><p></p><p>

</p>
