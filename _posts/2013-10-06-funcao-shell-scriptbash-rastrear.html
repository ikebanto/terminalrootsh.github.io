---
layout: post
title: 'Função Shell Script(Bash): Rastrear objetos via Correios'
date: '2013-10-06T13:51:00.002-07:00'
author: The Bang Bash
tags:
- Shell Script
- SED
modified_time: '2014-09-27T14:04:24.805-07:00'
thumbnail: http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s72-c/correios-shell.jpg
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-8930551602639574440
blogger_orig_url: http://www.terminalroot.com.br/2013/10/funcao-shell-scriptbash-rastrear.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s1600/correios-shell.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s320/correios-shell.jpg" /></a></div><br /><blockquote class="tr_bq"><span style="color: blue;"><span style="background-color: white;"><b><span style="font-size: large;">Verifique o CABEÇALHO DO CÓDIGO  e os COMENTÁRIOS para entendimento do Script/Função</span></b></span></span></blockquote><br /><br /><u><i><b>PasteBin</b></i></u>:<br /><script src="http://pastebin.com/embed_js.php?i=90stK1VC"></script> <br /><u><i><b>CodeBlog</b></i></u>:<br /><div class="adp">#!/bin/bash<br /># --------------------------------------<br /># ./rastreamento.sh<br />#<br /># Função Shell Script(Bash): Rastrear objetos via Correios.<br />#<br /># Uso: ./rastreamento.sh [código da encomenda]<br />#<br /># Ex.: ./rastreamento.sh DI781874650BR<br />#<br /># Autor: Marcos da B. M. Oliveira , http://www.terminalroot.com.br/<br /># Desde: Dom 06 Out 2013 17:34:05 BRT <br /># Licença: GPL<br /># --------------------------------------<br />rastreamento(){<br />url='http://websro.correios.com.br/sro_bin/txect01$.QueryList'<br /><br /># imprime em amarelo<br />echo -e "\033[1;33m"<br /><br />for codigo<br />&nbsp;&nbsp;&nbsp; do<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # baixa a url<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; lynx -source "$url?P_LINGUA=001&amp;P_TIPO=001&amp;P_COD_UNI=$codigo" |<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # deixa só as linhas que contém a string rowspan (que contém os dados do rastreamento), as demais são apagadas<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sed '/rowspan/!d' | <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # substitui tudo entre &lt;/td&gt;&lt;td&gt; por espaço em branco<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sed 's/&lt;\/td&gt;&lt;td&gt;/ /g' |<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # insere o texto abaixo na primeira linha<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sed -e "1s/^/\n\nO RASTREAMENTO DO SEU OBJETO $1 É:\n\n/" |<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # limpa todas as tags e imprime uma linha em branco com echo<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sed -e 's/&lt;[^&gt;]*&gt;//g' &amp;&amp; echo<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; done<br />&nbsp;&nbsp;&nbsp; <br /># finaliza a cor<br />echo -e "\033[0m"<br /><br />}<br />rastreamento $1</div><br /><br />