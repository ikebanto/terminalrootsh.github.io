---
layout: post
title: 'Função Shell Script(Bash): Rastrear objetos via Correios'
date: '2013-10-06T13:51:00.002-07:00'
description: 'Função Shell Script(Bash): Rastrear objetos via Correios'
main-class: 'bash'
color: '#c2003a'
author: The Bang Bash
tags:
- Shell Script
- SED
modified_time: '2014-09-27T14:04:24.805-07:00'
thumbnail: http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s72-c/correios-shell.jpg
twitter_text: 'Função Shell Script(Bash): Rastrear objetos via Correios'
introduction: 'Função Shell Script(Bash): Rastrear objetos via Correios'
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s1600/correios-shell.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s320/correios-shell.jpg" /></a></div>
<blockquote class="tr_bq"><span style="color: blue;"><span style="background-color: white;"><b><span style="font-size: large;">Verifique o CABEÇALHO DO CÓDIGO  e os COMENTÁRIOS para entendimento do Script/Função</span></b></span></span></blockquote>

<u><i><b>PasteBin</b></i></u>:
<iframe src="http://pastebin.com/raw/90stK1VC" style="border:none;width:100%;"></iframe> 
<u><i><b>CodeBlog</b></i></u>:
<div class="adp">#!/bin/bash
# --------------------------------------
# ./rastreamento.sh
#
# Função Shell Script(Bash): Rastrear objetos via Correios.
#
# Uso: ./rastreamento.sh [código da encomenda]
#
# Ex.: ./rastreamento.sh DI781874650BR
#
# Autor: Marcos da B. M. Oliveira , http://www.terminalroot.com.br/
# Desde: Dom 06 Out 2013 17:34:05 BRT 
# Licença: GPL
# --------------------------------------
rastreamento(){
url='http://websro.correios.com.br/sro_bin/txect01$.QueryList'

# imprime em amarelo
echo -e "\033[1;33m"

for codigo
 do

  # baixa a url
  lynx -source "$url?P_LINGUA=001&amp;P_TIPO=001&amp;P_COD_UNI=$codigo" |
  
  # deixa só as linhas que contém a string rowspan (que contém os dados do rastreamento), as demais são apagadas
  sed '/rowspan/!d' | 
  
  # substitui tudo entre </td><td> por espaço em branco
  sed 's/<\/td><td>/ /g' |
  
  # insere o texto abaixo na primeira linha
  sed -e "1s/^/\n\nO RASTREAMENTO DO SEU OBJETO $1 É:\n\n/" |
  
  # limpa todas as tags e imprime uma linha em branco com echo
  sed -e 's/<[^>]*>//g' &amp;&amp; echo
  
  
 done
 
# finaliza a cor
echo -e "\033[0m"

}
rastreamento $1</div>



</p>
