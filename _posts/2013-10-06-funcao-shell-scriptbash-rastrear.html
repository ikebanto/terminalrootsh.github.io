---
layout: post
title: 'Função Shell Script(Bash): Rastrear objetos via Correios'
date: '2013-10-06T13:51:00.002-07:00'
description: 'Função Shell Script(Bash): Rastrear objetos via Correios'
main-class: 'bash'
color: '#c2003a'
author: The Bang Bash
tags:
- Shell Script
- SED
modified_time: '2014-09-27T14:04:24.805-07:00'
thumbnail: http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s72-c/correios-shell.jpg
twitter_text: 'Função Shell Script(Bash): Rastrear objetos via Correios'
introduction: 'Função Shell Script(Bash): Rastrear objetos via Correios'
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s1600/correios-shell.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-PpNaoqKqlTs/Um2F8-TMGyI/AAAAAAAACgE/e24KsmaIQ38/s320/correios-shell.jpg" /></a></div></p><p><blockquote class="tr_bq"><span style="color: blue;"><span style="background-color: white;"><b><span style="font-size: large;">Verifique o CABEÇALHO DO CÓDIGO  e os COMENTÁRIOS para entendimento do Script/Função</span></b></span></span></blockquote></p><p></p><p><u><i><b>PasteBin</b></i></u>:</p><p><script src="http://pastebin.com/embed_js.php?i=90stK1VC"></script> </p><p><u><i><b>CodeBlog</b></i></u>:</p><p><div class="adp">#!/bin/bash</p><p># --------------------------------------</p><p># ./rastreamento.sh</p><p>#</p><p># Função Shell Script(Bash): Rastrear objetos via Correios.</p><p>#</p><p># Uso: ./rastreamento.sh [código da encomenda]</p><p>#</p><p># Ex.: ./rastreamento.sh DI781874650BR</p><p>#</p><p># Autor: Marcos da B. M. Oliveira , http://www.terminalroot.com.br/</p><p># Desde: Dom 06 Out 2013 17:34:05 BRT </p><p># Licença: GPL</p><p># --------------------------------------</p><p>rastreamento(){</p><p>url='http://websro.correios.com.br/sro_bin/txect01$.QueryList'</p><p></p><p># imprime em amarelo</p><p>echo -e "\033[1;33m"</p><p></p><p>for codigo</p><p>&nbsp;&nbsp;&nbsp; do</p><p></p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # baixa a url</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; lynx -source "$url?P_LINGUA=001&amp;P_TIPO=001&amp;P_COD_UNI=$codigo" |</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # deixa só as linhas que contém a string rowspan (que contém os dados do rastreamento), as demais são apagadas</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sed '/rowspan/!d' | </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # substitui tudo entre &lt;/td&gt;&lt;td&gt; por espaço em branco</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sed 's/&lt;\/td&gt;&lt;td&gt;/ /g' |</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # insere o texto abaixo na primeira linha</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sed -e "1s/^/\n\nO RASTREAMENTO DO SEU OBJETO $1 É:\n\n/" |</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; # limpa todas as tags e imprime uma linha em branco com echo</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sed -e 's/&lt;[^&gt;]*&gt;//g' &amp;&amp; echo</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; done</p><p>&nbsp;&nbsp;&nbsp; </p><p># finaliza a cor</p><p>echo -e "\033[0m"</p><p></p><p>}</p><p>rastreamento $1</div></p><p></p><p>

</p>
