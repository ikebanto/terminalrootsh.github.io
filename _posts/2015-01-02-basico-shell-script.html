---
layout: post
title: Básico Shell Script
date: '2015-01-02T03:50:00.000-08:00'
author: Marcos Oliveira
tags:
- Shell Script
modified_time: '2015-01-02T03:50:05.565-08:00'
thumbnail: http://1.bp.blogspot.com/-xAtPNrIAZmA/VDsh_jH6FUI/AAAAAAAAA2I/hd13kwJ4_9I/s72-c/new-logo-tr.png
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-6288987350553463541
blogger_orig_url: http://www.terminalroot.com.br/2015/01/basico-shell-script.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-xAtPNrIAZmA/VDsh_jH6FUI/AAAAAAAAA2I/hd13kwJ4_9I/s1600/new-logo-tr.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-xAtPNrIAZmA/VDsh_jH6FUI/AAAAAAAAA2I/hd13kwJ4_9I/s320/new-logo-tr.png" height="200" width="200" /></a></div><b>Esse script serve para verificar como funciona o armazenamento de variável no shel e como imprimí-las na tela<br />após requisição efetuado, é algo extremamente básico.</b><br /><br />{% highlight bash %}<br />#!/bin/bash<br />echo Escreva seu primeiro nome<br />read nome1<br />echo escreva seu segundo nome<br />read nome2<br />echo escreva seu último nome<br />read nome3<br />echo Aperte enter para ver seu nome completo<br />read<br />echo $nome1 $nome2 $nome3{% endhighlight %}<br /><br /><b>Esse scrpt serve para verificar como deve-se incluir comandos do shell num script, deve ser entre acentos crases, ao invés de aspas simples ou duplas</b><br /><br />{% highlight bash %}<br />#!/bin/bash<br />echo Estou logado com o usuário `whoami`;{% endhighlight %}<br /><br /><b>Este outro exemplo serve para verificar como funciona as condições if...else em Shell Script</b><br /><br />{% highlight bash %}<br />#!/bin/bash<br />echo escreva X<br />read X<br />if&nbsp;&nbsp; [ $X -lt 5 ] ; then<br />&nbsp;&nbsp;&nbsp; echo "O valor de $X é menor que 5"<br />elif [ $X -gt 5 ] ; then<br />&nbsp;&nbsp;&nbsp; echo "O valor de $X é maior que 5"<br />elif [ $X -eq 5 ] ; then<br />&nbsp;&nbsp;&nbsp; echo "o valor de $X é igual a 5"<br />else<br />&nbsp;&nbsp;&nbsp; echo "o valor de $X é igual a 0"<br />fi{% endhighlight %}<br /><br /><br /><br /><blockquote>&lt;strong&gt;Alguns comandos&lt;/strong&gt;<br /><br />echo &nbsp;&nbsp;&nbsp; Imprime texto na tela<br />read &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Captura dados do usuário e coloca numa variável<br />exit &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Finaliza o script<br />sleep &nbsp;&nbsp;&nbsp; Dá uma pausa em segundos no script<br />clear &nbsp;&nbsp;&nbsp; Limpa a tela<br />stty &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Configura o terminal temporariamente<br />tput&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Altera o modo de exibição<br />if &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Controle de fluxo que testa uma ou mais expressões<br />case &nbsp;&nbsp;&nbsp; Controle de fluxo que testa várias expressões ao mesmo tempo<br />for &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Controle de fluxo que testa uma ou mais expressões<br />while &nbsp;&nbsp;&nbsp; Controle de fluxo que testa uma ou mais expressões</blockquote><br /><br /><br /><blockquote>Alguns operadores<br />-eq &nbsp;&nbsp;&nbsp; Igual<br />-ne &nbsp;&nbsp;&nbsp; Diferente<br />-gt &nbsp;&nbsp;&nbsp; Maior<br />-lt &nbsp;&nbsp;&nbsp; Menor<br />-o &nbsp;&nbsp;&nbsp; Ou<br />-d &nbsp;&nbsp;&nbsp; Se for um diretório<br />-e &nbsp;&nbsp;&nbsp; Se existir<br />-z &nbsp;&nbsp;&nbsp; Se estiver vazio<br />-f &nbsp;&nbsp;&nbsp; Se conter texto<br />-o &nbsp;&nbsp;&nbsp; Se o usuário for o dono<br />-r &nbsp;&nbsp;&nbsp; Se o arquivo pode ser lido<br />-w &nbsp;&nbsp;&nbsp; Se o arquivo pode ser alterado<br />-x &nbsp;&nbsp;&nbsp; Se o arquivo pode ser executado</blockquote><br /><br /><br /><br /><br /><blockquote><br />dicas<br /><br />&nbsp;&nbsp;&nbsp; Use mais o comando "printf" ao inves de "echo"<br />&nbsp;&nbsp;&nbsp; <br />\n - nova linha<br /><br />&nbsp;&nbsp;&nbsp; \a - som de alerta<br /><br />&nbsp;&nbsp;&nbsp; \b - backspace<br /><br /><br /></blockquote><br /><br /><br /><b>Esse script serve para ver como é uttilizado o comando while(Loop)</b><br />{% highlight bash %}<br />#!/bin/bash<br />contador=0;<br />while [ $contador -lt 10 ]; do<br />&nbsp;&nbsp;&nbsp;&nbsp; echo O valor de contador = $contador<br />&nbsp;&nbsp;&nbsp;&nbsp; (( contador = contador + 1 ))<br />done{% endhighlight %}<br /><br /><br /><b>pronto, um exemplo agora completo para um entendimento inicial:</b><br />{% highlight bash %}<br />#!/bin/bash<br />Principal() {<br />&nbsp;&nbsp; echo "Exemplo Final sobre o uso de scripts shell"<br />&nbsp;&nbsp; echo "------------------------------------------"<br />&nbsp;&nbsp; echo "Opções:"<br />&nbsp;&nbsp; echo<br />&nbsp;&nbsp; echo "1. Trasformar nomes de arquivos"<br />&nbsp;&nbsp; echo "2. Adicionar um usuário no sistema"<br />&nbsp;&nbsp; echo "3. Deletar um usuário no sistema"<br />&nbsp;&nbsp; echo "4. Fazer backup dos arquivos do /etc"<br />&nbsp;&nbsp; echo "5. Sair do exemplo"<br />&nbsp;&nbsp; echo<br />&nbsp;&nbsp; echo -n "Qual a opção desejada? "<br />&nbsp;&nbsp; read opcao<br />&nbsp;&nbsp; case $opcao in<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1) Transformar ;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2) Adicionar ;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3) Deletar ;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4) Backup ;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5) exit ;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *) "Opção desconhecida." ; echo ; Principal ;;<br />&nbsp;&nbsp; esac<br />}<br />Transformar() {<br />&nbsp;&nbsp; echo -n "Para Maiúsculo ou minúsculo? [M/m] "<br />&nbsp;&nbsp; read var<br />&nbsp;&nbsp; if [ $var = "M" ]; then<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo -n "Que diretório? "<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read dir<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for x in `/bin/ls` $dir; do<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; y=`echo $x | tr '[:lower:]' '[:upper:]'`<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if [ ! -e $y ]; then<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mv $x $y<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; done<br />&nbsp;&nbsp; elif [ $var = "m" ]; then<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo -n "Que diretório? "<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read dir<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for x in `/bin/ls` $dir; do<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; y=`echo $x | tr '[:upper:]' '[:lower:]'`<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if [ ! -e $y ]; then<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mv $x $y<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; done<br />&nbsp;&nbsp; fi<br />}<br />Adicionar() {<br />&nbsp;&nbsp; clear<br />&nbsp;&nbsp; echo -n "Qual o nome do usuário a se adicionar? "<br />&nbsp;&nbsp; read nome<br />&nbsp;&nbsp; adduser nome<br />&nbsp;&nbsp; Principal<br />}<br />Deletar() {<br />&nbsp;&nbsp; clear<br />&nbsp;&nbsp; echo -n "Qual o nome do usuário a deletar? "<br />&nbsp;&nbsp; read nome<br />&nbsp;&nbsp; userdel nome<br />&nbsp;&nbsp; Principal<br />}<br />Backup() {<br />&nbsp;&nbsp; for x in `/bin/ls` /etc; do<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cp -R /etc/$x /etc/$x.bck<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mv /etc/$x.bck /usr/backup<br />&nbsp;&nbsp; done<br />}<br />Principal{% endhighlight %}