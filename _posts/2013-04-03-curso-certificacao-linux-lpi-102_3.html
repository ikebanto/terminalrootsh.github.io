---
layout: post
title: 'Curso Certificação Linux LPI-102:  Compartilhamento via NFS'
date: '2013-04-03T17:22:00.000-07:00'
author: The Bang Bash
tags:
- Linux
- LPI
modified_time: '2013-05-03T07:16:04.179-07:00'
thumbnail: http://3.bp.blogspot.com/-m0rFMjA6JuI/UVZBnNFDcxI/AAAAAAAABTM/uEN5l-RNUdI/s72-c/nfs.jpeg
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-7119480847702934792
blogger_orig_url: http://www.terminalroot.com.br/2013/04/curso-certificacao-linux-lpi-102_3.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-m0rFMjA6JuI/UVZBnNFDcxI/AAAAAAAABTM/uEN5l-RNUdI/s1600/nfs.jpeg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-m0rFMjA6JuI/UVZBnNFDcxI/AAAAAAAABTM/uEN5l-RNUdI/s320/nfs.jpeg" /></a></div><!-------------------------------------------------> <script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------><br /><br /><b>Nesse post vou mostrar como <u>compartilhar uma pasta</u> no <span style="color: blue;">Linux</span> para acesso via rede por comando, o processo é bem simples.Esse acesso será baseado em <span style="color: red;">NFS</span>, não tem nada a ver com o Samba, isso é pra compartilhamento entre duas ou mais máquinas Linux(<i>de Linux pra Linux</i>), mais pra frente vou explicar via samba, mas por enquanto isso aqui é mais importante.</b><br /><br /><blockquote class="tr_bq"><b>NFS é um protocolo de sistema de arquivos para compartilhamento entre arquivos e diretórios entre computadores conectados em rede.è com NFS que é feito o acesso, existem outras formas, mas certifique-se que essa é a mais simples e a melhor.</b></blockquote><br /><b>Primeiramente temos de ter dois pacotes instalados, precisa ser root </b><i># su</i><b>:</b><br /><br /><b><span style="color: red;">1 -</span> </b><i>nfs-kernel-server</i> ---- <b>que deve ser instalado no Server(a máquina que compartilhará o arquivo ou a pasta).</b><br /><b>Para instalá-lo no Debian e similares:</b><br />{% highlight bash %}# apt-get install nfs-kernel-server{% endhighlight %}<br /><b>Convém também instalar o portmap, caso não esteja instalado:</b><br />{% highlight bash %}# apt-get install portmap{% endhighlight %}<br /><br /><b style="color: red;">2-</b> <i>nfs-common</i> ---- <b>que deve ser instalado no Client(máquina que acessará a tal pasta ou arquivo).</b><br /><b>Para instalá-lo no Debian e similares:</b><br />{% highlight bash %}# apt-get install nfs-common{% endhighlight %}<br /><br /><b>No Server, precisamos informar qual a pasta será compartilhada e quais as permissões, para isso edite o arquivo:</b><br />{% highlight bash %}# vim /etc/exports{% endhighlight %}<br /><b>Após as linhas iniciais e comentado com #(tralha), crie uma nova linha sem #(tralha) e informe o endereço da pasta no PC e as permissões do mesmo, exemplo:</b><br />{% highlight bash %}/home/usuario/pasta_a_ser_compartilhada 192.168.1.102(rw,async){% endhighlight %}<br /><b>, ou seja, o caminho da pasta;"rw" permissão de leitura(r) e escrita(w); o item async permite que o NFS transfira arquivos de forma "assíncrona", sem precisar esperar pela resposta do cliente; e o IP que pode acessar a pasta que foi compartilhada.Depois de adicionar a linha, salve o arquivo, lembrando que caso você deseje liberar uma faixa de ips, basta usar o *(asterisco), exemplo: 192.168.1.*, todos dessa faixa poderão acessar, ou até mesmo utilizar nome da Estação.</b><br /><br /><b>Para aplicar as alterações no arquivo exports para que o mesmo possa ser lido pelo Kernel, é necessario, exportar e reiniciar o serviço, reinicie também o Portmaps, com os comando:</b><br />{% highlight bash %}# exportfs -ra<br /># /etc/init.d/nfs-kernel-server restart<br /># /etc/init.d/portmap restart{% endhighlight %}<br /><br /><b>Agora vamos no cliente(máquina que acessará a pasta).Para isso iremos precisar montar a pasta compartilhada da rede, então nada melhor do que você criar uma pasta para receber a montagem, então crie no local onde você deseja essa pasta, exemplo:</b><br />{% highlight bash %}# mkdir /home/usuario/nome_da_pasta{% endhighlight %}<br /><b>, e então montamos a pasta compartilhada dentro da que criamos com o seguinte comando:</b><br />{% highlight bash %}# mount -t nfs 192.168.1.101:/home/server/pasta_compartilhada /home/cliente/pasta_criada{% endhighlight %} <b>, ou seja, a opção (-t) do mount informa o tipo, e eespecificamos o tipo com o nome do tipo que é "nfs", depois informamos o IP que está a pasta compartilhada(o Server) e o local onde montaremos essa pasta, endeço no cliente.</b><br /><br /><b>Caso não consiga o acesso, lembre-se de dar permissões locais com o "chmod".Se seu PC pegou um IP via DHCP diferente do que você permitiu no "exports", você pode alterálo com o seguinte comando:</b><br />{% highlight bash %}# ifconfig eth0 192.168.1.102/16 dev eth0{% endhighlight %}<b>(note que o ip fica a seu critério e o /16 é a mascara 255.255.0.0 na tabela), se desejar especificar um gateway, utilize:</b>{% highlight bash %}# route add default gw 192.168.1.1 netmask 255.255.0.0 dev eth0{% endhighlight %}<b>,  mas isso é outro assunto...</b><br /><br /><b>Para mais informações sobre o NFS, <a href="http://pt.wikipedia.org/wiki/Network_File_System" style="color: blue;" target="_blank">Clique Aqui</a></b><br /><br /><b>Pronto, parece ser complicado, mas é muito simples, é só pôr a mão na massa e pronto!Espero que gostem e comentem.</b>