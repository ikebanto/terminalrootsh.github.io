---
layout: post
title: 'Curso Certificação Linux LPI-102: Impressão no Linux'
date: '2013-03-31T14:36:00.000-07:00'
author: The Bang Bash
tags:
- Linux
- LPI
modified_time: '2013-05-03T07:16:04.396-07:00'
thumbnail: http://2.bp.blogspot.com/-7xzBWVE94qQ/UVYoswEpYyI/AAAAAAAABSo/gdWQBDXwTjM/s72-c/linux-hp-color-laser-printing.jpg
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-4333319169520778331
blogger_orig_url: http://www.terminalroot.com.br/2013/03/curso-certificacao-linux-lpi-102.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-7xzBWVE94qQ/UVYoswEpYyI/AAAAAAAABSo/gdWQBDXwTjM/s1600/linux-hp-color-laser-printing.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-7xzBWVE94qQ/UVYoswEpYyI/AAAAAAAABSo/gdWQBDXwTjM/s200/linux-hp-color-laser-printing.jpg" height="200" width="200" /></a></div><!-------------------------------------------------> <script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------><br /><br /><b>Curso Certificação Linux LPI-102: Impressão no Linux<br /><br /><u>lp - envia requisições à impressora</u><br /><br /><i>&nbsp;&nbsp; &nbsp;Sintaxe: lp [-mw] [-ddest] [-n#] filename...</i><br /><br />&nbsp;&nbsp; &nbsp;Opções:<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -w: escreve mensagem no terminal do usuário<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -ddest: impressora destino <br /><br />&nbsp;&nbsp; &nbsp;Exemplo:<br />&nbsp;&nbsp;&nbsp; {% highlight bash %}lp -m -dlw rel.ps{% endhighlight %}<br /><br />Imprimindo diretamente<br />{% highlight bash %}# cat texto.txt &gt; /dev/lp0{% endhighlight %}<br /><br />Imprimindo indiretamente<br />{% highlight bash %}$ cat texto.txt | lpr{% endhighlight %}<br />{% highlight bash %}$ lpr texto.txt{% endhighlight %} <br /><br />Monitorar: fila (queue) de impressão<br />{% highlight bash %}$ lpq{% endhighlight %}<br /><br />Gerenciar: cancelando impressões/jobs<br />{% highlight bash %}$ lprm{% endhighlight %} (cancela a última impressão/job do usuário corrente) <br /><br />Gerenciar: controlando o lpd com o lpc<br />{% highlight bash %}$ lpc {% endhighlight %}<br /><br />Arquivo de configuração - permissao de acesso<br />{% highlight bash %}# vi /etc/hosts.lpd{% endhighlight %} (se esse arquivo existir, os usuarios remotos nao conseguirao imprimir. Para imprimir se deve excluir esse arquivo ou inserir dentro dele os enderecos dos hosts remotos que podem imprimir)<br /><br />Arquivo de configuração - geral<br />{% highlight bash %}# vi /etc/printcap{% endhighlight %}<br /><br />Compartilhando impressoras<br /><br />&nbsp;&nbsp; &nbsp;O Cups, o servidor de impressão padrão no Linux, possui um recurso nativo de compartilhamento de impressoras. Ele permite não apenas compartilhar impressoras com outras máquinas Linux, mas também com máquinas Windows da rede, através de um servidor unificado. Para habilitar o compartilhamento, edite o arquivo "/etc/cups/cupsd.conf", deixando-o com o seguinte conteúdo:<br /><br />{% highlight bash %}<br />Port 631<br />Listen 631<br />Browsing On<br />BrowseAllow All<br />BrowseInterval 30<br />BrowseAddress @LOCAL<br />BrowseInterval 30<br /><br />&lt;Location /&gt;<br />Order allow,deny<br />Allow all<br />&lt;/Location&gt;<br /><br />&lt;Location /printers&gt;<br />Order allow,deny<br />Allow all<br />&lt;/Location&gt;<br /><br />&lt;Location /admin&gt;<br />Encryption Required<br />Order allow,deny<br />Allow localhost<br />&lt;/Location&gt;<br /><br />&lt;Location /admin/conf&gt;<br />AuthType Basic<br />Require user @SYSTEM<br />Order allow,deny<br />Allow localhost<br />&lt;/Location&gt;{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;Veja que a seção "/printers", que contém as impressoras, fica com permissão de acesso para todo mundo, enquanto o utilitário de administração do Cups (seção /admin) continua acessível apenas localmente, através do endereço http://127.0.0.1:631.<br /><br />&nbsp;&nbsp; &nbsp;Até aqui, não estamos impondo nenhum tipo de restrição, por isso contamos com o firewall para bloquear qualquer tentativa de impressão proveniente de micros da Internet. Você pode também fazer o compartilhamento de uma forma mais segura, especificando manualmente a faixa de endereços da rede local, ou mesmo especificando individualmente os endereços IP que poderão imprimir. Neste caso, as seções &lt;Location /&gt; (onde vai a configuração que permite aos clientes verem as impressoras disponíveis) e &lt;Location /printers&gt; ficaria:<br /><br />{% highlight bash %}<br />&lt;Location /&gt;<br />Order Deny,Allow<br />Deny From All<br />Allow From 127.0.0.1<br />Allow From 192.168.0.*<br />&lt;/Location&gt;<br /><br />&lt;Location /printers&gt;<br />Order Deny,Allow<br />Deny From All<br />Allow From 127.0.0.1<br />Allow From 192.168.0.*<br />&lt;/Location&gt;{% endhighlight %}<br /><br />Não se esqueça de incluir o endereço "127.0.0.1" na lista. Caso contrário, todo mundo vai imprimir na impressora, menos você mesmo :).<br /><br />Depois de alterar o arquivo, reinicie o servidor de impressão para que as alterações entrem em vigor:<br /><br />{% highlight bash %}<br /># /etc/init.d/cups restart{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;Compartilhar impressoras através do Cups é mais simples do que fazê-lo através do Samba e oferece a vantagem adicional de permitir o uso do recurso de autodiscover do Cups nos clientes Linux. O autodiscover permite que os clientes Linux da rede reconheçam automaticamente a impressora compartilhada e a configurem automaticamente durante o boot, sem necessidade de nenhuma intervenção manual.</b><br /><br /><i><span style="color: #444444;"><span style="font-size: x-small;">Fontes:<br />www.hardware.com.br<br />www.hugoazevedo.eti.br<br />www.openit.com.br</span></span></i><b> </b>