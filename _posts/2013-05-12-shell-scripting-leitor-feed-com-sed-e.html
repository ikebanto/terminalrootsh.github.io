---
layout: post
title: 'Shell Scripting: Leitor Feed com SED e Lynx'
date: '2013-05-12T16:22:00.001-07:00'
description: 'Shell Scripting: Leitor Feed com SED e Lynx'
main-class: 'bash'
color: '#c2003a'
author: The Bang Bash
tags:
- Shell Script
- SED
modified_time: '2014-10-29T17:07:44.662-07:00'
twitter_text: 'Shell Scripting: Leitor Feed com SED e Lynx'
introduction: 'Shell Scripting: Leitor Feed com SED e Lynx'
---

<a href="http://s1118.photobucket.com/user/Marcos_Oliveira/media/final_zpse3b9cdd0.png.html" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;" target="_blank"><img alt="Leitor Feed em Shell com SED e Lynx photo final_zpse3b9cdd0.png" border="0" height="235" src="http://i1118.photobucket.com/albums/k610/Marcos_Oliveira/final_zpse3b9cdd0.png" width="320" /></a><!-------------------------------------------------><br /><br /><script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------><br /><br /><b>Galera, esse <span style="color: blue;">Script</span> serve pra pegar algumas manhas de <span style="color: blue;">SED</span>, pra que ele rode é necessário ter o <span style="color: blue;">Lynx</span> instalado: <br />{% highlight bash %}# apt-get install lynx{% endhighlight %}<br />É simples e precisa/haverá modificações, dêem uma olhada na <span style="color: blue;">imagem</span>, código no <span style="color: blue;">blog</span> e <span style="color: blue;">PasteBin</span> pra ver a escrita dele, <a href="http://pastebin.com/download.php?i=9KGF3JSb">baixe aqui</a> e renomeio para noticias.sh ou o nome que vc preferir e altere as permissões de execução(como muitos já sabem):<br />{% highlight bash %}$ chmod +x noticias.sh{% endhighlight %}<br /> <script src="http://pastebin.com/embed_js.php?i=9KGF3JSb"></script><br />{% highlight bash %}#!/bin/bash<br />#############################################################################<br /># noticias.sh - Shell Script : Feed do blog www.terminalroot.com.br no terminal<br /># Autor: MBM<br /># Endereço Web - http://www.terminalroot.com.br<br /># Facebook - fb.com/terminalroot<br />##############################################################################<br /><br /># Baixa o arquivo com N linhas e 800 colunas e joga pro arquivo .noticias-terminalroot.txt<br />lynx -dump -width=800 http://www.terminalroot.com.br.br/feeds/posts/default &gt; .noticias-terminalroot.txt<br /><br /># imprime somente as linhas que contem a string 'title' e joga pra .noticias-temp.txt<br />sed -n '/title/p' .noticias-terminalroot.txt &gt; .noticias-temp.txt<br /><br />#Extrair trecho que pode ou não estar na mesma linha tirando os delimitadores<br />#Ou seja, extrai tudo que está entre '&lt;title' e &lt;/title&gt; e joga de .noticias-temp.txt para .noticias-terminalroot.txt<br />sed -n '/&lt;title/{/&lt;\/title&gt;/tc;:a;/&lt;\/title&gt;/!{N;ba;};:c;s/.*&lt;title//;s/&lt;\/title&gt;.*$//;p;}' .noticias-temp.txt &gt; .noticias-terminalroot.txt<br /><br /># Coloca todas as linhas em uma só<br />sed ':a;$!N;s/\n//;ta;' .noticias-terminalroot.txt &gt; .noticias-temp.txt<br /><br /># troca tudo que tem ' type='text'&gt;' por uma quebra de linha<br />sed "s/ type='text'&gt;/\n/g" .noticias-temp.txt &gt; .noticias-terminalroot.txt<br /><br /># remove o arquivo .noticias-temp.txt<br />rm -rf .noticias-temp.txt<br /><br /># Apaga as linhas em Branco<br />sed -i '/^$/d' .noticias-terminalroot.txt<br /><br /># Insere uma quebra de linha depois da primeira linha<br />sed -i '1s/$/\n/' .noticias-terminalroot.txt<br /><br /># Insere '((((( Notícia - ' no inicio da primeira linha <br />sed -i '1s/^/-----------------------------------\nNotícias - /' .noticias-terminalroot.txt <br /><br /># e '))))))' no final da primeira linha<br />sed -i '1s/$/\n-----------------------------------/' .noticias-terminalroot.txt<br /><br /># Apaga da linha 13 até o final<br />sed -i '13,$d' .noticias-terminalroot.txt<br /><br /># Insere no início de cada linha, da linha 3 até a última linha a string '----&gt; '<br />sed -i '3,$s/^/----&gt; /' .noticias-terminalroot.txt<br /><br /># Insere 2 quebra de linha depois da 12 linha<br />sed -i '12s/$/\n\n/' .noticias-terminalroot.txt<br /><br /># Insere '-----------------------------------' nas linas 13 e 14<br />sed -i '13,14s/$/-----------------------------------/' .noticias-terminalroot.txt<br /><br /># Troca o '&gt;' por '-' da 4° linha<br />sed -i '4s/&gt;/-/' .noticias-terminalroot.txt<br /><br /># Exibindo as noticias<br />cat .noticias-terminalroot.txt {% endhighlight %}</b>