---
layout: post
title: Função Shell Script para Leitor de Feed
date: '2014-09-06T13:46:00.001-07:00'
description: Função Shell Script para Leitor de Feed
main-class: 'bash'
color: '#c2003a'
author: Marcos Oliveira
tags:
- Shell Script
- SED
modified_time: '2014-09-06T13:46:24.848-07:00'
thumbnail: http://1.bp.blogspot.com/-IHEj_79kCLo/VAtyUFIWYYI/AAAAAAAAAq0/J2edXEw6AB8/s72-c/leitorfeed-shell-sed.png
twitter_text: Função Shell Script para Leitor de Feed
introduction: Função Shell Script para Leitor de Feed
---

<a href="http://1.bp.blogspot.com/-IHEj_79kCLo/VAtyUFIWYYI/AAAAAAAAAq0/J2edXEw6AB8/s1600/leitorfeed-shell-sed.png" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/-IHEj_79kCLo/VAtyUFIWYYI/AAAAAAAAAq0/J2edXEw6AB8/s320/leitorfeed-shell-sed.png" /></a><a href="http://3.bp.blogspot.com/-ncmjb4Jb8Jo/VAtyUPNHlgI/AAAAAAAAAqw/ksxSJB0_VpQ/s1600/feed-sed-shel-script.png" imageanchor="1"><img border="0" src="http://3.bp.blogspot.com/-ncmjb4Jb8Jo/VAtyUPNHlgI/AAAAAAAAAqw/ksxSJB0_VpQ/s320/feed-sed-shel-script.png" /></a><br /><div class="separator" style="clear: both; text-align: center;"></div><br /><br /><blockquote class="tr_bq"><span style="color: purple;"><b>Galera criei essa função como melhoria do script anterior: <a href="http://amigosdopinguim.blogspot.com.br/2013/05/shell-scripting-leitor-feed-com-sed-e.html" target="_blank">Shell Scripting: Leitor Feed com SED e Lynx</a> , no qual está uma bagunça geral, além de eu re-testar e não ter funcionado muito bem.</b></span></blockquote><b><br /><u>Desta forma criei essa função que talvez também passe por melhorias, no entanto, não a explicarei passo a passo, pois acredito a leitura além de desafio para entendimento, está bem simples.Veja também o cabeçalho que explica como utilizar o <span style="color: red;">SCRIPT</span>.Ou seja, um leitor <span style="color: blue;">feed</span> pra alguns blog que gosto (do <span style="color: #274e13;">Brasil</span>):</u><br /><br /><br /></b><br /><div class="adp"><ul><li><b>Terminal Root</b></li><li><b>Aurélio</b></li><li><b>Seja Livre</b></li><li><b>Viva o Tux</b></li><li><b>Video Aulas Brasil </b></li></ul></div><b><br /><br />Veja o código: <br />PasteBin:<br /><script src="http://pastebin.com/embed_js.php?i=FTnMK2E5"></script><br />CódigoBlog:<br /></b><br /><div class="adp"><b>#!/bin/bash<br />#-------------------------------------------------------------------------<br /># feed.sh<br /># Mostra últimas notícias/posts de um blog/site desejado<br /># Função Shell Script para Leitor de Feed<br /># SED, Shell Script<br /><br /># Uso: ./feed.sh [quantidade de noticias/posts]<br /># Digite o número correspondente no menu para escolher o feed desejado e pressione [ENTER].<br /><br /># Exemplo: ./feed.sh 6<br /># Os ESCOLHA UM NÚMERO DAS OPÇÕES ABAIXO:<br /><br />#❶&nbsp; Terminal Root<br />#❷&nbsp; Aurélio<br />#❸&nbsp; Seja Livre<br />#❹&nbsp; Viva o Tux<br />#❺&nbsp; Video Aulas Brasil<br /><br /><br /># Se Não passar o 1° parâmetro (da quantidade de noticias/posts), exibirá 5 posts/noticias.<br /><br /># Autor: Marcos Oliveira<br /># Desde: Dom 23 Jun 2013 23:14:54 BRT<br /># Versão: 2<br /># Licença: GPL<br />#-------------------------------------------------------------------------<br /><br />leitorFeed(){<br /><br />&nbsp;&nbsp;&nbsp; [ -e $1 ] &amp;&amp; max=5 || max=$1<br />&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; echo -e "\e[45;37;1mOs ESCOLHA UM NÚMERO DAS OPÇÕES ABAIXO:\033[m\n"<br />&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; echo -e "❶ \e[44;37;1m Terminal Root\033[m"<br />&nbsp;&nbsp;&nbsp; echo -e "❷ \e[44;37;1m Aurélio\033[m"<br />&nbsp;&nbsp;&nbsp; echo -e "❸ \e[44;37;1m Seja Livre\033[m"<br />&nbsp;&nbsp;&nbsp; echo -e "❹ \e[44;37;1m Viva o Tux\033[m"<br />&nbsp;&nbsp;&nbsp; echo -e "❺ \e[44;37;1m Video Aulas Brasil\033[m"<br />&nbsp;&nbsp;&nbsp; read OPCAO<br /><br /><br />&nbsp;&nbsp;&nbsp; case "$OPCAO" in<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1) feed="http://goo.gl/jxw8M";;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2) feed="http://goo.gl/OZIuq";;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3) feed="http://goo.gl/Rgisz";;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4) feed="http://goo.gl/gd6uBr";;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5) feed="http://goo.gl/rBzCz";;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *) exit 1;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; esac<br /><br /><br />&nbsp;&nbsp;&nbsp; feedxml=".feed"<br />&nbsp;&nbsp;&nbsp; newfeed=".newfeed"<br />&nbsp;&nbsp;&nbsp; qtde=$(($max + 1))<br /><br />&nbsp;&nbsp;&nbsp; lynx -source $feed &gt; $feedxml<br />&nbsp;&nbsp;&nbsp; sed -i 's/&gt;/&gt;\n/g' $feedxml<br />&nbsp;&nbsp;&nbsp; sed -n '/&lt;\/title&gt;/p' $feedxml &gt; $newfeed<br />&nbsp;&nbsp;&nbsp; sed -i 's/&lt;\/title&gt;//' $newfeed<br />&nbsp;&nbsp;&nbsp; sed -i '2,$s/^/ ➜ /' $newfeed<br /><br />&nbsp;&nbsp;&nbsp; titulo=$(sed -n 1p $newfeed)<br />&nbsp;&nbsp;&nbsp; posts=$(sed -ne "2,$qtde p" $newfeed)<br />&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; reset<br />&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; echo -e "\n \e[33;1m ::::::::: $titulo ::::::::: \e[m \n"<br />&nbsp;&nbsp;&nbsp; echo -e "&nbsp; \e[45;37;1m Os $max mais recentes posts são: \e[m"<br />&nbsp;&nbsp;&nbsp; echo<br />&nbsp;&nbsp;&nbsp; echo -e "\e[37;1m$posts\e[m"<br />&nbsp;&nbsp;&nbsp; echo -e "&nbsp; ::::::::::::::::::::::::::::\n"<br />&nbsp;&nbsp;&nbsp; rm -rf $feedxml $newfeed<br />}<br /><br />reset<br />leitorFeed $1</b></div><b><br />Até a próxima!</b>