---
layout: post
title: Usando arquivos remotos no PHP
date: '2011-10-30T13:45:00.000-07:00'
description: Usando arquivos remotos no PHP
main-class: 'misc'
color: '#34a853'
author: The Bang Bash
tags:
- PHP
modified_time: '2013-05-03T07:16:11.334-07:00'
twitter_text: Usando arquivos remotos no PHP
introduction: Usando arquivos remotos no PHP
---

<p>
<strong>Aqui vou explicar como funciona o processo de chamar dinamicamente um trecho de uma página da internet e por na sua página, ou seja, quando aquela página alterar os dados daquele campo, autoomaticamente o dado do seu campo também será alterado.Na verdade eu queria publicar os resultados da Mega-Sena sem precisar tá sempre atualizando esse campo quando saísse um resultado novo, pego automaticamente de uma página da internet(que sempre atualiza) o resultado.</p><p></p><p>O código consiste em :</p><p></p><p>Para que não surja o aviso:</p><p><blockquote>Warning: fopen(): URL file-access is disabled in the server configuration in</blockquote>E caso vc não tenha acesso ao arquivo php.ini de onde sua página está hospedada, temos que configurar o arquivo pelo script utilizando a função ini_set(), pois com ela vc pode habilitar ou não uma função do php.ini, no &lt;a href="http://www.php.net" target="_blank"&gt;Manual do PHP&lt;/a&gt; há uma lista das funções configuráveis nno PHP.INI, então sete isso no início do script, caso venha aparecer este arquivo, geralmente ele ocorre pois estaremos abrindo uma URL, se fosse um arquivo dentro da sua pasta, vc poderia recorrer as permissões de pasta em sistemas GNU/Linux, mas mesmo assim vc deve dar permisssão para que isso ocorra, ou seja, mesmo após setar essa função, caso continue o Warning, dê permissão ao arquivo com chmod.</strong></p><p></p><p>{% highlight bash %}</p><p>&nbsp;ini_set('allow_url_fopen', 'On');</p><p>{% endhighlight %}</p><p></p><p><strong>Agora vamos ao script, leia os comentarios // para entender melhor.</strong></p><p>{% highlight bash %}</p><p>&lt;?php</p><p>//abre a url e diz que quer somente ler o arquivo</p><p>$file = fopen ("http://www.mega-sena.biz/", "r");</p><p>//se não abrir, gera um aviso.</p><p>if (!$file) {</p><p>&nbsp;&nbsp;&nbsp; echo "&amp;lt;p&amp;gt;Incapaz de abrir arquivo remoto.\n";</p><p>&nbsp;&nbsp;&nbsp; exit;</p><p>}</p><p>//efetuando a leitura, 1024 é a quantidade de bytes a ler em cada linha</p><p>while (!feof ($file)) {</p><p>&nbsp;&nbsp;&nbsp; $line = fgets ($file, 1024);</p><p>&nbsp;&nbsp;&nbsp; /* as tags tem de estar na mesma linha */</p><p>&nbsp;&nbsp;&nbsp; //indica que queremos ler o que está dentro desta tag e final de tal tag</p><p>&nbsp;&nbsp;&nbsp; if (eregi ("(.*)&amp;lt;/font&amp;gt;&amp;lt;br&amp;gt;", $line, $out)) {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //out é um array, então queremos somente o valor</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $title = $out[1];</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;</p><p>&nbsp;&nbsp;&nbsp; }</p><p>}</p><p>//fecha o arquivo</p><p>fclose($file);</p><p>//limpa as tags que vem junto com ele</p><p>$title = strip_tags($title);</p><p>//tirei as informações subsequentes que vieram com ele, utilizando a função substr_replace()</p><p>$title = substr_replace($title, " ", -52, 100);</p><p>//exibe o arquivo pos-configurado</p><p>echo $title;</p><p></p><p>?&gt;</p><p>{% endhighlight %}</p><p></p><p><b>Prontinho, é isso aê, até a próxima!</b>

</p>
