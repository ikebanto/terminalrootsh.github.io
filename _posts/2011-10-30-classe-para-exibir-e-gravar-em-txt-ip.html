---
layout: post
title: 'Classe para Exibir e Gravar em TXT: IP, OS, Data e Hora.'
date: '2011-10-30T12:38:00.000-07:00'
description: 'Classe para Exibir e Gravar em TXT: IP, OS, Data e Hora.'
main-class: 'misc'
color: '#34a853'
author: The Bang Bash
tags:
- PHP
modified_time: '2013-05-03T07:16:11.605-07:00'
twitter_text: 'Classe para Exibir e Gravar em TXT: IP, OS, Data e Hora.'
introduction: 'Classe para Exibir e Gravar em TXT: IP, OS, Data e Hora.'
---

<b>Segue classe e já instanciada e setada a função pronta para utilização e estudo.</b><br /><br />{% highlight bash %}<br />&lt;?php<br />&nbsp; class Dados{<br />&nbsp;&nbsp;&nbsp; function exibir(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ip = ($_SERVER['REMOTE_ADDR']);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $browser = ($_SERVER['HTTP_USER_AGENT']);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $data = date('d/m/Y H:i:s');<br /><br />&nbsp;&nbsp;&nbsp; //ARQUIVO TXT<br />&nbsp;&nbsp;&nbsp; $arquivo&nbsp;&nbsp;&nbsp; =&nbsp;&nbsp;&nbsp; "estatisticas.txt";<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;b style="color:#dd4814; font-size:13px; margin-left:20px;"&gt;Número IP:&lt;/b&gt; &lt;i style="color:#999; font-weight:bold;font-size:13px;"&gt;'.$ip.'&lt;/i&gt; ';<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;b style="color:#dd4814;font-size:13px;"&gt;Navegador:&lt;/b&gt; &lt;i style="color:#999; font-weight:bold;font-size:13px;"&gt;';<br />&nbsp;&nbsp;&nbsp; if (strchr($browser, 'Firefox'))<br />&nbsp;&nbsp;&nbsp; &nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $nav = 'Firefox ';<br />&nbsp;&nbsp;&nbsp; &nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp; elseif (strchr($browser, 'Chromium'))<br />&nbsp;&nbsp;&nbsp; &nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $nav = 'Chromium ';<br />&nbsp;&nbsp;&nbsp; &nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp; elseif (strchr($browser, 'Chrome'))<br />&nbsp;&nbsp;&nbsp; &nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $nav = 'Chrome ';<br />&nbsp;&nbsp;&nbsp; &nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp; elseif (strchr($browser, 'Opera'))<br />&nbsp;&nbsp;&nbsp; &nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $nav = 'Opera ';<br />&nbsp;&nbsp;&nbsp; &nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp; elseif (strchr($browser, 'Windows'))<br />&nbsp;&nbsp;&nbsp; &nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $nav = 'Internet Explorer ';<br />&nbsp;&nbsp;&nbsp; &nbsp; }else{<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $nav = 'Outro Navegador ';<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo $nav.'&lt;/i&gt;';<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;b style="color:#dd4814;font-size:13px;"&gt;Sistema Operacional: &lt;/b&gt; &lt;i style="color:#999; font-weight:bold;font-size:13px;"&gt;';<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (strchr($browser, 'Linux'))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $os = 'Linux ';<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; elseif (strchr($browser, 'Windows'))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $os = 'Windows ';<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $os = 'Outro Sistema ';<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo $os.'&lt;b style="color:#dd4814;font-size:13px;"&gt;Data e Hora:&lt;/b&gt; &lt;i style="color:#999; font-weight:bold;font-size:13px;"&gt;'.$data;<br /><br />&nbsp;&nbsp;&nbsp; //PREPARA O CONTEÚDO A SER GRAVADO<br />&nbsp;&nbsp;&nbsp; $conteudo&nbsp;&nbsp;&nbsp; =&nbsp;&nbsp;&nbsp; "Ip: $ip\r\nSistema: $os\r\nNavegador: $nav\r\nData e Hora: $data\r\n-------------------------------------------\r\n";<br /><br />&nbsp;&nbsp;&nbsp; //TENTA ABRIR O ARQUIVO TXT<br />&nbsp;&nbsp;&nbsp; if (!$abrir = fopen($arquivo, "a")) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo&nbsp; "Erro abrindo arquivo ($arquivo)";<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit;<br />&nbsp;&nbsp;&nbsp; }<br /><br />&nbsp;&nbsp;&nbsp; //ESCREVE NO ARQUIVO TXT<br />&nbsp;&nbsp;&nbsp; if (!fwrite($abrir, $conteudo)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print "Erro escrevendo no arquivo ($arquivo)";<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit;<br />&nbsp;&nbsp;&nbsp; }<br /><br />&nbsp;&nbsp;&nbsp; //FECHA O ARQUIVO<br />&nbsp;&nbsp;&nbsp; fclose($abrir);<br />&nbsp; }//fim da função da exbir();<br />&nbsp;}//fim da class Dados<br /><br />&nbsp; $mostrar = new Dados();<br />&nbsp; $mostrar-&gt;exibir();<br />?&gt;<br />{% endhighlight %}