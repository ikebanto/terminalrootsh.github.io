---
layout: post
title: Criando um sistema de Captcha
date: '2011-11-06T16:37:00.000-08:00'
description: Criando um sistema de Captcha
main-class: 'misc'
color: '#34a853'
author: The Bang Bash
tags:
- PHP
modified_time: '2013-05-03T07:16:10.799-07:00'
thumbnail: http://1.bp.blogspot.com/-Cl22VgHu6qM/TrcoWxPPl-I/AAAAAAAAAI0/lnE2MZx097M/s72-c/captcha.php.png
twitter_text: Criando um sistema de Captcha
introduction: Criando um sistema de Captcha
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Cl22VgHu6qM/TrcoWxPPl-I/AAAAAAAAAI0/lnE2MZx097M/s1600/captcha.php.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-Cl22VgHu6qM/TrcoWxPPl-I/AAAAAAAAAI0/lnE2MZx097M/s1600/captcha.php.png" /></a></div><br /><b>Existem varias formas de se fazer isso, algumas formas tiveram problema acredito por causa da biblioteca GD, se vc não as tem instaladas:</b><br />{% highlight bash %}<br /><b># su<br /># apt-get install php5-gd</b><br />{% endhighlight %}<br /><br /><b>  O código abaixo está todo comentado para causar o entendimento.</b><br /><br />{% highlight bash %}<br /><b><span style="color: #660000;">&lt;?php</span><br /><span style="color: blue;">//INICIAR A SESSION</span><br />session_start();<br /><span style="color: blue;">//INICIAR O HEADER</span><br />header('Content-Type: image/png');<br /><span style="color: blue;">//puxar a imagem, vc deve ter essa imagem na pasta, pois ela servirá de base.</span><br />$image = imagecreatefrompng("captcha.png") or die ("Não foi possível iniciar a imagem.");<br /><span style="color: blue;">//carregar a fonte, tem de ser no formato gdf, neste caso, google-a</span><br />$fonte  = imageloadfont("anonymous.gdf");<br /><span style="color: blue;">//quantidade de caracteres, shuffle para embaralhar e 4 caracteres somente q eu escolhi</span><br />$texto  = substr(str_shuffle("AaBbCcDdEeFfGgHhIiJjKkLlMmNnPpQqRrSsTtUuVvYyXxWwZz23456789"),0,4);<br /><span style="color: blue;">//salvar a session</span><br />$_SESSION['capcad'] = $texto;<br /><span style="color: blue;">//indicar a cor da fonte</span><br />$cor = imagecolorallocate($image,0,0,0);<br /><span style="color: blue;">//junção da imagem com o texto, os numeros referenciam a posição da imagem</span><br />imagestring($image, $fonte, 50, 10, $texto, $cor);<br /><span style="color: blue;">//mostrar imagem</span><br />imagepng($image);<br /><span style="color: blue;">//liberar memória</span><br />imagedestroy($image);<br /><span style="color: #660000;">?&gt;</span></b><br />{% endhighlight %}<br /><br /><b><br />é nois</b>!