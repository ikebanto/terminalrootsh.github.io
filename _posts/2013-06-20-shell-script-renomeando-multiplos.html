---
layout: post
title: 'Shell Script: Renomeando múltiplos arquivos'
date: '2013-06-20T18:38:00.001-07:00'
description: 'Shell Script: Renomeando múltiplos arquivos'
main-class: 'bash'
color: '#c2003a'
author: The Bang Bash
tags:
- Shell Script
modified_time: '2014-10-29T17:03:58.573-07:00'
thumbnail: http://1.bp.blogspot.com/-FkPcIsY-8fU/Ub4bRVwYWsI/AAAAAAAAB6I/UlsSTr0GR6s/s72-c/shell+script.png
twitter_text: 'Shell Script: Renomeando múltiplos arquivos'
introduction: 'Shell Script: Renomeando múltiplos arquivos'
---

<p>
<a href="http://1.bp.blogspot.com/-FkPcIsY-8fU/Ub4bRVwYWsI/AAAAAAAAB6I/UlsSTr0GR6s/s1600/shell+script.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="200" src="http://1.bp.blogspot.com/-FkPcIsY-8fU/Ub4bRVwYWsI/AAAAAAAAB6I/UlsSTr0GR6s/s200/shell+script.png" width="200" /></a><!-------------------------------------------------></p><p></p><p><script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------></p><p></p><p><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; <span style="color: purple;">Olá galera, muita gente, inclusive eu, sempre quis uma forma de renomear múltiplos arquivos no Linux , pois é uma comodidade ainda não existente.&nbsp;</span></b></blockquote></p><p><b>Já vi e testei e também criei diversas formas de fazer isso , no entanto , nem sempre tão bem funcional , como base nessa necessidade , criei esse script que considero <span style="color: blue;"><span style="font-size: large;">COMPLETÍSSIMO</span></span> , apesar de já ter criado outros não tão <span style="color: blue;"><span style="font-size: large;">SIMPLES</span></span> e <span style="color: blue;"><span style="font-size: large;">FUNCIONAL</span></span> como esse , foi o caso de <a href="http://www.terminalroot.com.br.br/2012/12/renomeando-multiplos-arquivos-em-php-e.html" target="_blank">Renomeando múltiplos arquivos em PHP e Shell Script</a>&nbsp;</b></p><p></p><p><b>que foi feito com <span style="color: blue;">PHP</span> ; também fiz um simples(<span style="color: red;"><strike>me refiro a muito básico</strike></span>) que com as idéias mais ou menos desse já dá pra imaginar como era e também fiz um que pegava dados dos arquivos, que era <a href="http://www.terminalroot.com.br.br/2013/06/shell-scripting-como-renomear-um.html" target="_blank">Shell Scripting: Como renomear um diretório com dados de um arquivo</a> .</p><p>&nbsp;&nbsp; </b></p><p><blockquote class="tr_bq"><b>&nbsp;&nbsp; &nbsp;Primeiramente vou mostrar o script completo e logo depois , explicar cada linha do código do mesmo.</b></blockquote><b>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;Código PasteBin:</p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;  <script src="http://pastebin.com/embed_js.php?i=rBKJwHTZ"></script> </p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<u><i>Agora vamos as explicações:</i></u></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<span style="color: purple;"><i>1 - Primeiro falarei sobre o cabeçalho, que mostra dados e usabilidade do Script:</i></span></p><p>&nbsp;&nbsp; &nbsp;</b></p><p><div class="adp"><b></p><p></b><b>#!/bin/bash</b></p><p><b>#----------------------------------------------------------------------------</b></p><p><b># renomear.sh</b></p><p><b># http://www.terminalroot.com.br.br/</b></p><p><b># Renomeia arquivos, sem alterar a extensão do mesmo.</b></p><p><b># Se não passar parametro, renomeará todos com números, ex.: (1).jpg, (2).odt, ...</b></p><p><b># Passar parametro: ./renomear WebImagens</b></p><p><b># Se usado o parametro, resultará, ex: WebImagens(1).jpg, WebImagens(2).png,...</b></p><p><b># Uso: ./renomear.sh [opcional/nome]</b></p><p><b># Ex.: ./renomear.sh MeusArquivos</b></p><p><b>#</b></p><p><b># Autor: Marcos Oliveira</b></p><p><b># Desde: Qui 20 Jun 2013 19:25:28 BRT </b></p><p><b># Versão: 3</b></p><p><b># Licença: GPL</b></p><p><b># ----------------------------------------------------------------------------</b></p><p><b>&nbsp;&nbsp; &nbsp;</b></div><b></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<i><span style="color: purple;">2 - Depois há uma validação simples para verificarmos se existe algum parâmetro passado para o script, se existir, ele assumirá o valor da variável <span style="color: blue;">$param</span> , caso não haja , a variável <span style="color: blue;">$param</span> será vazia:</span></i></p><p>&nbsp;&nbsp; &nbsp;</b></p><p><div class="adp"><b>[ -e $1 ] &amp;&amp; param="" || param=$1</b></div><b></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; <i><span style="color: purple;">&nbsp;3 - Depois atribuimos um valor para a variável $count , pois usaremos no loop para numeração escalar.</span></i></p><p>&nbsp;&nbsp; &nbsp;</b></p><p><div class="adp"><b>count=0</b></div><b></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<i><span style="color: purple;">4 - Criamos um loop onde transformará em string(<span style="color: blue;">$file</span>) cada arquivo do diretório que contém os arquivos, exibidos pela váriavel criada com a listagem</span></i>(ls)<span style="color: blue;"> $(ls)</span></p><p>&nbsp;&nbsp; &nbsp;</b></p><p><div class="adp"><b>&nbsp;&nbsp; &nbsp;for file in $(ls)</b></p><p><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;do</b></p><p><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#comandos&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </b></p><p><b>&nbsp;&nbsp; &nbsp;done</b></p><p><b>&nbsp;&nbsp; &nbsp;</b></div><b></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; <i><span style="color: purple;">&nbsp;</span></i><span style="color: blue;"><i><span style="color: purple;">5 - Dentro do loop acima, incrementamos <span style="color: black;">+1</span> à variável</span></i> $count</span></p><p>&nbsp;&nbsp; &nbsp;</b></p><p><div class="adp"><b>count=$((count+1))</b></div><b></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<span style="color: purple;"><i>6 - Criamos uma variável <span style="color: blue;">$ext</span> , onde nela será atribuido somente a extensão de cada arquivo, para isso usamos o <span style="color: blue;">cut</span> com delimitador "<span style="color: blue;">.</span>"(o ponto) e o <span style="color: blue;">f2</span> pois queremos o que vier depois do ponto "<span style="color: blue;">.</span>" e printamos com <span style="color: blue;">echo</span>:</i></span></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<u><i>Com isso pegaremos só as extensões, independente do tamanho(3 letras, ou 4 letras, ou 2 letras ...)</i></u></p><p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </b></p><p><blockquote class="tr_bq"><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="color: red;">Obs.: Se um arquivo tiver nome com ponto "." antes do ponto pré-extensão haverá problema na interpretação do cut.</span></b></blockquote><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;</b></p><p><div class="adp"><b>ext=$(echo $file | cut -d"." -f2)</b></div><b></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<span style="color: purple;"><i>7 - Agora validamos se o arquivo existe, ou seja já haja já o nome com o nome que será renomeado, por isso validamos e usamos a opção <span style="color: blue;">-b</span> no <span style="color: blue;">mv</span>, para criarmos uma cópia de segurança , se for o caso , a imagem ficará exemplo da imagem abaixo:</i></span></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;    </b></p><p><div class="separator" style="clear: both; text-align: center;"><b><a href="http://1.bp.blogspot.com/-2DOcmq0otg0/UcOrGcvY4eI/AAAAAAAAB9g/h7xeQdiQRcY/s1600/Renomeando+m%C3%BAltiplos+arquivos.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="214" src="http://1.bp.blogspot.com/-2DOcmq0otg0/UcOrGcvY4eI/AAAAAAAAB9g/h7xeQdiQRcY/s320/Renomeando+m%C3%BAltiplos+arquivos.png" width="320" /></a></b></div><b></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<span style="color: purple;">Mas se não houver, renomeará normalmente, com o padrão de renomeação <span style="color: blue;">param(numero)</span>, ex.: <span style="color: blue;">WebImagem(1).jpg</span> , se não houver parametro, renomeará somente&nbsp; com o número ex.: <span style="color: blue;">(1).jpg</span> , a linha para isso é:</span></p><p>&nbsp;&nbsp; &nbsp;<div class="adp">[ [!-e] ] &amp;&amp; mv -b $file "$param($count).$ext"</div></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<span style="color: purple;"><i>8 - E no final , printamos a quantidade de arquivos do diretório, como renomeados, porém , esse número pode haver detalhes para veracidade(seria o caso dos arquivos de backup do <span style="color: blue;">mv -b</span> ).</i></span></p><p>&nbsp;&nbsp; &nbsp;<div class="adp">echo "Foram renomeados: "$(ls | wc -l) "arquivos $param($count) !"</div></p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<span style="background-color: black;"><span style="color: white;"><span style="font-size: large;">Veja o código final:</span></span></span></p><p>&nbsp;&nbsp; &nbsp;{% highlight bash %}#!/bin/bash</p><p>#----------------------------------------------------------------------------</p><p># renomear.sh</p><p># http://www.terminalroot.com.br.br/</p><p># Renomeia arquivos, sem alterar a extensão do mesmo.</p><p># Se não passar parametro, renomeará todos com números, ex.: (1).jpg, (2).odt, ...</p><p># Passar parametro: ./renomear WebImagens</p><p># Se usado o parametro, resultará, ex: WebImagens(1).jpg, WebImagens(2).png,...</p><p># Uso: ./renomear.sh [opcional/nome]</p><p># Ex.: ./renomear.sh MeusArquivos</p><p>#</p><p># Autor: Marcos da Boa Morte</p><p># Desde: Qui 20 Jun 2013 19:25:28 BRT </p><p># Versão: 3</p><p># Licença: GPL</p><p># ----------------------------------------------------------------------------</p><p>[ -e $1 ] &amp;&amp; param="" || param=$1</p><p>count=0</p><p>&nbsp;&nbsp;&nbsp; for file in $(ls)</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; count=$((count+1))</p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ext=$(echo $file | cut -d"." -f2)&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [ [!-e] ] &amp;&amp; mv -b $file "$param($count).$ext"&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp; done</p><p>echo "Foram renomeados: "$(ls | wc -l) "arquivos $param($count) !"{% endhighlight %}</p><p>&nbsp;&nbsp; </p><p>&nbsp;&nbsp; &nbsp;<span style="color: #274e13;">Pronto!</span></b>

</p>
