---
layout: post
title: Shell Script validando com Expressões Regulares
date: '2015-01-09T12:36:00.003-08:00'
description: Shell Script validando com Expressões Regulares
main-class: 'bash'
color: '#c2003a'
author: Marcos Oliveira
tags:
- Shell Script
modified_time: '2015-01-14T15:29:08.375-08:00'
thumbnail: http://1.bp.blogspot.com/-kPOTGeI3v0o/VLA69EODQMI/AAAAAAAABJQ/EvhhsFoyoZU/s72-c/regex-bash.png
twitter_text: Shell Script validando com Expressões Regulares
introduction: Shell Script validando com Expressões Regulares
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-kPOTGeI3v0o/VLA69EODQMI/AAAAAAAABJQ/EvhhsFoyoZU/s1600/regex-bash.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-kPOTGeI3v0o/VLA69EODQMI/AAAAAAAABJQ/EvhhsFoyoZU/s1600/regex-bash.png" height="146" width="400" /></a></div>
Shell Script validando(Tel,E-mail,CEP,IP,Data...) com Expressões Regulares 
<b>grep é um utilitário de linha de comando para procurar conjuntos de dados de texto simples para as linhas que correspondem a uma expressão regular.</b><b>
{% highlight bash %}
grep [OPÇÕES] expressão_regular arquivo
{% endhighlight %}
 CaracterDescrição.Qualquer letra^início da linha$final da linha[xyz]Qualquer das letras dentro dos colchetes[^xyz]Qualquer letra fora as dentro dos colchetes[t-z]Qualquer das letras entre t e zz* Letra z zero ou mais vezesz+ Letra z uma ou mais vezes?{0,1}Pode aparecer ou não (opcional)*{0,}Pode aparecer em qualquer quantidade+{1,}Deve aparecer no mínimo uma veza{2}Casa a letra 'a' duas vezesa{2,4}Casa a letra 'a' de duas a quatro vezesa{2,}Casa a letra 'a' no mínimo duas vezes.*Casa qualquer coisa, é o tudo e o nada^início da linha$final da linha[abc]casa com os caracteres a, b e c[a-c]casa com os caracteres a, b e c[^abd]não casa com os caracteres a, b e d(um|dois)casa com as palavras um e doisRepetiçõesa{2}casa com a letra “a” duas vezesa{2,5}casa com a letra “a” duas a cinco vezesa{2,}casa com a letra “a” duas vezes ou maisa?casa com “a” letra a zero vezes ou umaa*casa com a letra “a” zeros vezes ou maisa+casa com a letra “a” uma vez ou maisCuringas.casa com qualquer caracter uma vez.*casa com qualquer caracter várias vezes(esse|aquele)Casa as palavras 'esse' ou 'aquele'
Exs.:
1-Procura a palavra marcos no arquivo /etc/passwd:
{% highlight bash %}
$ grep marcos /et/passwd
{% endhighlight %}
<b>
</b><b>2-Procura todas as linhas começadas pela letra u no arquivo /etc/passwd:</b>
{% highlight bash %}
$ grep '^u' /et/passwd
{% endhighlight %}

3-Procura todas as linhas terminadas pela palavra false no arquivo /etc/passwd:
{% highlight bash %}
$ grep 'false$' /et/passwd
{% endhighlight %}
<b>
</b><b>4-Procura todas as linhas começadas pelas vogais no arquivo /etc/passwd:</b>
{% highlight bash %}
$ grep '^[aeiou]' /et/passwd
{% endhighlight %}

5-Procura todas as linhas começadas por qualquer caracter e segundo caracter seja qualquer vogal no arquivo /etc/passwd:
{% highlight bash %}
$ grep '^.[aeiou]' /et/passwd
{% endhighlight %}
<b>
</b><b>6-Procura todas as linhas que contenham uma sequência de 4 números consecutivos:</b>
{% highlight bash %}
$ grep '[0-9][0-9][0-9][0-9]' /et/passwd
{% endhighlight %}

6-Procura todas as linhas que contenham uma sequência de 4 números consecutivos:
{% highlight bash %}
$ grep '[0-9][0-9][0-9][0-9]' /et/passwd
{% endhighlight %}
<b>
</b><b>7-Comando para encontrar linhas em branco:</b>
{% highlight bash %}
$ grep '^$' /et/passwd
{% endhighlight %}

8-Encontrar e contar linhas em branco:
{% highlight bash %}
$ grep '^$' /et/passwd | wc -l
{% endhighlight %}
<b>
</b><b>9-Encontrar mesmo nome, porém com letra inicial minúscula e maiúscula:</b>
{% highlight bash %}
$ grep '[Mm]arcos' /et/passwd
{% endhighlight %}

10-Encontrar 27 sequência^de 27 caracteres:
{% highlight bash %}
$ egrep '^.{27}$' passwd
{% endhighlight %}
Note que foi usado o egrep e não o grep. É porque as chaves fazem parte de um conjunto avançado de Expressões Regulares ("extended"), então o egrep lida melhor com elas. Se fosse para usar o grep normal, teria que "escapar" as chaves: {% highlight bash %}
$ grep '^.\{27\}$' /etc/passwd
{% endhighlight %}

11-Para procurar por linhas que tenham de 20 a 40 caracteres:
{% highlight bash %}
$ egrep '^.{20,40}$' /etc/passwd
{% endhighlight %}
<b>
</b><b>12-Para obter as linhas que possuem 40 caracteres ou mais:</b>
{% highlight bash %}
$ egrep '^.{40,}$' /etc/passwd
{% endhighlight %}

13-Econtrar números com 3 dígitos (de 0 a 9) ou mais:
{% highlight bash %}
$ egrep '[0123456789]{3,}' /etc/passwd
{% endhighlight %}
<b>
</b><b>14-Econtrar linhas que começam com 'vogal minúscula' e terminam com a palavra 'bash', usa−se o curinga ".*" para significar "qualquer coisa"(não confunda com "qualquer caracterer" somente "."):</b>
{% highlight bash %}
$ egrep '^[aeiou].*bash$' /etc/passwd
{% endhighlight %}

15-Procura linhas que comecem com a palavra 'eric' ou 'marcos' ou 'camila':
{% highlight bash %}
$ egrep '^(eric|marcos|camila)' /etc/passwd
{% endhighlight %}
<b>
</b><b>16-Procura todas as linhas que NÃO comecem com a letra minúscula 'm'</b>
{% highlight bash %}
$ egrep '^[^marcos]' /etc/passwd
{% endhighlight %}

Script com validações de Tel,E-mail,CEP,IP,Data... 

####################### VALIDAR TELEFONE no formato: (99)9999-9999 ################################################
echo 'Informe o número de Telefone.Formato: (99)9999-9999';
read TELEFONE
echo $TELEFONE | egrep '^[(][0-9]{2}[)][0-9]{4}+-[0-9]{4}$' &amp;&amp; echo -e '\033[01;32m Número válido! \033[0m' || echo -e '\033[01;31m NÃO é válido esse número.\033[0m'


######################### VALIDAR IP ##############################################
echo 'Informe o número de IP';
read IP
echo $IP | egrep '^[0-9]{1,3}[.]{1}[0-9]{1,3}[.]{1}[0-9]{1,3}[.]{1}[0-9]{1,3}$' &amp;&amp; echo -e '\033[01;32m IP válido! \033[0m' || echo -e '\033[01;31m NÃO é válido esse IP.\033[0m'

######################### VALIDAR CEP ##############################################
echo 'Informe o CEP';
read CEP
echo $CEP | egrep '^[0-9]{5}[-][0-9]{3}$' &amp;&amp; echo -e '\033[01;32m Número válido! \033[0m' || echo -e '\033[01;31m NÃO é válido esse número.\033[0m'

######################### VALIDAR DATA formato dd/mm/aaaa ##############################################
echo 'Informe a Data.Formato dd/mm/aaaa';
read DATA
echo $DATA | egrep '^[0-3]{1}[0-9]{1}[/][0-1]{1}[0-9]{1}[/][0-9]{4}$' &amp;&amp; echo -e '\033[01;32m Data válida! \033[0m' || echo -e '\033[01;31m NÃO é válida essa Data.\033[0m'

######################### VALIDAR E-MAIL ##############################################
echo 'Informe o E-mail';
read EMAIL
echo $EMAIL | egrep '^([a-zA-Z0-9_-.])+@[0-9a-zA-Z.-]+\.[a-z]{2,3}$' &amp;&amp; echo -e '\033[01;32m E-mail válido! \033[0m' || echo -e '\033[01;31m NÃO é válido esse E-mail.\033[0m'


