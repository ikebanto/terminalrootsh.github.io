---
layout: post
title: Dicas úteis para Shell Script
date: '2014-12-19T11:19:00.002-08:00'
description: Dicas úteis para Shell Script
main-class: 'bash'
color: '#c2003a'
author: Marcos Oliveira
tags:
- Shell Script
modified_time: '2014-12-19T11:19:38.594-08:00'
thumbnail: http://1.bp.blogspot.com/-geqdq-bXNKQ/UaENdkzoJlI/AAAAAAAABoU/n8zyB4BvnWw/s72-c/shell+script+logo+.jpg
twitter_text: Dicas úteis para Shell Script
introduction: Dicas úteis para Shell Script
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-geqdq-bXNKQ/UaENdkzoJlI/AAAAAAAABoU/n8zyB4BvnWw/s1600/shell+script+logo+.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-geqdq-bXNKQ/UaENdkzoJlI/AAAAAAAABoU/n8zyB4BvnWw/s320/shell+script+logo+.jpg" /></a></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><b><span style="font-size: x-large;">Dicas úteis para <span style="color: blue;">Shell Script</span></span><br /><br /><span style="font-size: large;">→ Contar os caracteres de uma variável:</span><br />&nbsp;&nbsp; &nbsp;{% highlight bash %}$ echo ${#variavel}{% endhighlight %}<br />&nbsp;&nbsp; <br /><span style="font-size: large;">→ Usando o comando cut:</span><br />&nbsp;&nbsp; &nbsp;<u><i>• Mostrar somente a 3° coluna(de cada linha) do arquivo</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ cat arquivo.txt | cut -c3{% endhighlight %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<u><i>• Mostrar somente a 3° coluna EM DIANTE(de cada linha) do arquivo</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ cat arquivo.txt | cut -c3-{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<u><i>• O comando abaixo extrai o campo 1 (field) do arquivo /etc/passwd cujo delimitador de campo é ":" (delimiter)(para caracteres especiais como '(' [parênteses] use uma barra-invertida antes '\('&nbsp; )</i></u>.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ cat /etc/passwd | cut -d: -f1{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<u><i>• Mostrar somente da 3° até a 6° coluna(de cada linha) do arquivo</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ cat arquivo.txt | cut -c3-6{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<u><i>• Joga a saída(stdout) do comando cat para a entrada(stdin) do cut e a saída do cut para a entrada do sort(deixando em ordem alfabética)</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ cat arquivo.txt | cut -c3 | sort{% endhighlight %}<br /><br /><span style="font-size: large;">→ Variáveis ​​locais e o comando define:</span><br /><br />&nbsp;&nbsp; &nbsp;Uma variável declarada como local é aquele que só é visível dentro do bloco de código em que ela aparece. Em uma função, uma variável local só tem sentido dentro desse bloco de função forma de declarar uma variável(aspas simples e colar igual(=))<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;hello(){<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;local variavel = 'teste'<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br /><br /><span style="font-size: large;">→ Comando Shift:</span><br /><br />&nbsp;&nbsp; &nbsp;Para trabalhar com parêmtros você pode utilizar o comando shift, que desloca parâmetros<br />&nbsp;&nbsp; &nbsp;Exemplo de como usar o shift(arquivo ./teste.sh):<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;#!/bin/bash<br />&nbsp;&nbsp; &nbsp;echo $@<br />&nbsp;&nbsp; &nbsp;shift<br />&nbsp;&nbsp; &nbsp;echo $@<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;---exemplo com saida---<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;$ ./teste.sh param1 param2 param3<br />&nbsp;&nbsp; &nbsp;param1 param2 param3<br />&nbsp;&nbsp; &nbsp;param2 param3<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br /><br /><span style="font-size: large;">→ A Variável RANDOM:</span><br /><br />&nbsp;&nbsp; &nbsp;gerar um número randômico(aleatório) que seja até no máximo 60<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}$ echo $(($RANDOM % 61)){% endhighlight %}<br />&nbsp;&nbsp; <br /><span style="font-size: large;">→ O comando declare e o comando readonly</span><br /><br />&nbsp;&nbsp; &nbsp;<u><i>• Use o comando 'declare' para definir atributos de variáveis ​​e funções.</i></u><br />&nbsp;&nbsp; &nbsp;-r (readonly) # -i (integer/numeros)# -f (para criar funções somente leitura)<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}declare -r variavel{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<u><i>• Use o comando readonly para fazer as variáveis ​​e funções readonly ou seja, você não pode alterar o valor de variáveis ​​.Ou, em vez de -r, usar: readonly variavel</i></u><br />&nbsp;&nbsp; &nbsp;{% highlight bash %}readonly variavel='Isso é um teste!'{% endhighlight %}<br /><br /><span style="font-size: large;">→ O comando case:</span><br /><br />&nbsp;&nbsp; &nbsp;O uso do 'case' tem de usar dessa forma: o case, o in, o ;;, o ) e o esac<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;opcao="$1"<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;case "$opcao" in<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;eric)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "Menino"<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;;;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;camila)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "Mulher"<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;;;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;marcos)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "Homem"<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;;;<br />&nbsp;&nbsp; &nbsp;esac<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br /><br /><span style="font-size: large;">→&nbsp;&nbsp; &nbsp;Utilizando o bc</span><br /><br />&nbsp;&nbsp; &nbsp;<u><i>• Introdução</i><br /></u><br />&nbsp;&nbsp; &nbsp;O bc não é exatamente uma calculadora, mas sim uma linguagem para cálculos, que lembra vagamente a linguagem C. O que significa que podemos ter construções como 'if', 'for', 'while', que um programa pode pedir informações para um usuário, e que podemos usar "programas" escritos para o 'bc' como se usássemos um shell script. <br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<u><i>• Conhecendo o bc (modo interativo)</i></u><br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;Para chamar o bc, basta digitar numa janela de terminal, 'bc'. Para fazer um cálculo, basta digitar a expressão e dar ENTER.<br /><br />&nbsp;&nbsp; &nbsp;Operações definidas:<br /></b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; Adição, subtração, multiplicação, divisão.</b><br /><b>&nbsp;&nbsp;&nbsp; % (resto da divisão)</b><br /><b>&nbsp;&nbsp;&nbsp; ^ (potenciação)</b><br /><b>&nbsp;&nbsp;&nbsp; sqrt(x) (raiz quadrada de x)</b><br /><b>&nbsp;&nbsp;&nbsp; last (último resultado) </b></blockquote><b><br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Para sair, basta dar 'quit'.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ bc<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;bc 1.06<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;This is free software with ABSOLUTELY NO WARRANTY.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;For details type `warranty'.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;300*500<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;150000<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;last + 500<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;150500<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;last - 1600<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;148900<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;last / 20<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;7445<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;last^4<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;3072265955400625<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;sqrt(last)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;55428025<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2/3<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;0<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;quit<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Você pode estar pensando, depois desse último resultado (2/3 = 0?), "Epa! Alguma coisa está errada!".<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Calma, não se desespere. Você precisa carregar o bc com o parâmetro '-l', que ativa uma biblioteca de operações matemáticas.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ bc -l<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;bc 1.06<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;This is free software with ABSOLUTELY NO WARRANTY.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;For details type `warranty'.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2/3<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.66666666666666666666<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;3/5<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.60000000000000000000<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;33/4589259837593<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.00000000000719070202<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;3125886/2592375832<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.00120579969980216973<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Pequena curiosidade: o comando 'quit' é executado assim que ele é encontrado. Portanto, algo como:<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="color: blue;">if (0==1) quit</span><br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;mesmo <span style="color: blue;">0==1</span> sendo impossível, vai fazer o 'bc' sair.<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Tome cuidado com isso.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<u><i>• Conhecendo os comandos matemáticos do bc</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Quando carregamos o bc com a opção '-l', temos alguns comandos matemáticos:<br /></b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; s(x): o seno de x (x em radianos)</b><br /><b>&nbsp;&nbsp;&nbsp; c(x): o cosseno de x (x em radianos)</b><br /><b>&nbsp;&nbsp;&nbsp; a(x): o inverso da tangente de x (retorna radianos).</b><br /><b>&nbsp;&nbsp;&nbsp; Se y = tangente de x (tg x), a(y) = x</b><br /><b>&nbsp;&nbsp;&nbsp; l(x): o logaritmo natural de x. (ln x)</b><br /><b>&nbsp;&nbsp;&nbsp; e(x): a função exponencial ( e^x ) (exp x) </b></blockquote><b><br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Dessas funções aparentemente simples, podemos obter mais funções, assunto do próximo tópico.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<u><i>• Construindo funções</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Podemos definir algumas funções extras a partir da definição matemática:<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define sin(x) {return s(x)}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define cos(x) {return c(x)}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;tg x = sen x / cos x:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define tan(x) {return s(x)/c(x)}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;log10 x (logaritmo na base 10 de x) = ln x / ln 10:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define l10(x) {return l(x)/l(10)}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Conversão entre radianos e graus:<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;d2r: graus para radianos<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;r2d: radianos para graus<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pi = 3.14159265<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define d2r(n) { return n * (pi/180); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define r2d(n) { return n / (pi/180); }<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Mas é chato ficar digitando essas definições toda vez que queremos usar o 'bc'.<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Portanto, iremos criar um script que defina essas funções automaticamente.<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Crie, usando seu editor de texto preferido (vi, emacs, Gedit...) um arquivo com o seguinte:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#!/usr/bin/bc -l<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# Nosso arquivo de definições<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# Nós vamos entender o 'define' depois.<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pi = 3.14159265<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define ln(n) { return l(n); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define log(n) { return ln(n)/ln(10); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define log2(n) { return l(n)/l(2); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define d2r(n) { return n * (pi/180); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define r2d(n) { return n / (pi/180); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define sin(x) { return s(d2r(x)); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define cos(x) { return c(d2r(x)); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define tan(x) { return sin(x)/cos(x); }<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Salve ele como 'define.bc' no seu diretório HOME.<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Mude os atributos dele, tal que ele seja executável:<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ chmod a+x define.bc{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Agora, chame o arquivo:<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ ~/define.bc{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Experimente usar os comandos:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cos(15)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.96592582636649385821<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;log2(2097152)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;21.000000000000000021<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;...<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;quit<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Note que ocorre um pequeno desvio nas casas decimais.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<u><i>• Conceitos para a criação de pequenos programas com o bc</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;O comando "define". Mas afinal, o que o comando faz?<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Ele simplesmente define uma função.<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Dentro dele podemos usar os elementos acima citados, além destes:<br /></b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span style="background-color: blue;"><span style="color: white;">auto</span></span> : define uma variável local.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span style="background-color: blue;"><span style="color: white;">print</span></span> : mostra mensagens na tela. (equivalente ao printf em C)</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<span style="background-color: blue;"><span style="color: white;"> return </span></span>: retorna um valor. Deve ser usada no final do programa, para retornar o resultado final dele.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<span style="background-color: white;"><span style="color: blue;"> { } (colchetes) </span></span>têm o mesmo significado que na linguagem C. Eles servem para agrupar várias operações, de modo que estas sejam executadas de uma vez só.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span style="background-color: blue;"><span style="color: white;">if:</span></span></b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; if (expressão) operação1 else operação2</b><br /><b></b><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; Se o resultado de 'expressão' não for 0, executa operação1, senão executa operação2 (se presente).</b><br /><b></b><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span style="background-color: blue;"><span style="color: white;">while:</span></span></b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; while (expressão) operação</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; Enquanto a expressão não chegar a zero, executa operação. Também pode-se sair do loop executando um comando 'break' dentro dele.</b><br /><b></b><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span style="background-color: blue;"><span style="color: white;">for:</span></span></b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; for (inicialização; condição; incremento) { operação }</b><br /><b></b><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; inicialização é executado antes de entrar no loop.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; condição é testada cada vez que o loop é executado. Se ela for zero, o loop quebra. Depois, incremento é executado. A operação de incremento deve modificar o valor usado no loop for.</b><br /><b></b><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; Como podemos notar, a linguagem é bem semelhante ao C. Porém, não há nenhum elemento parecido com o 'goto' ou o 'switch', o que a torna bem limitada.</b><br /><b></b><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span style="background-color: blue;"><span style="color: white;">quit</span></span>:</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; Só deve ser usado em modo interativo. Assim que 'quit' for encontrado, o bc sai. (ver curiosidade no item 2) Em programas devemos usar 'halt'.</b></blockquote><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp; <u><i>• Alguns exemplos</i></u><br />&nbsp;&nbsp; &nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="color: blue;">Definição recursiva do fatorial:</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#!/usr/bin/bc -l<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define f (x) {<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (x &lt;= 1) return (1);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return (f(x-1) * x);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="color: blue;">Solução da equação do 2o grau</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;(Como o bc força o retorno de apenas um valor por função, criamos 2 funções para retornar as 2 raízes da equação):<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#!/usr/bin/bc -l<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define delta(a,b,c) { return b^2 - 4*a*c }<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define eq2grau(a,b,c) {<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;auto d;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;d = delta(a,b,c);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (d&lt;0) halt;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (d&gt;=0) {<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return (-b + sqrt(d))/(2*a);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;define eq2grau2(a,b,c) {<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;d = delta(a,b,c);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (d&lt;0) halt;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (d==0) return eq2grau(a,b,c);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (d&gt;0) {<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return (-b - sqrt(d))/(2*a);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<u><i>• bc e shell scripts</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Às vezes, precisamos fazer um cálculo num shell script. O bc torna isso moleza:<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ x=$(echo "358358*5824825" | bc)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo $x<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2087372637350<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Simples, não?<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;A estrutura é:<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;variavel=$(echo "expressão" | bc)<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<u><i>• Conclusão e considerações finais</i></u><br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Nesse artigo, vimos como usar os comandos básicos do programa bc, que, embora aparentemente limitado, pode quebrar um bom galho como uma calculadora programável e em shell scripts.<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Porém, ele não deve ser considerado como uma linguagem de programação completa, mas sim como uma linguagem específica para sua aplicação.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; <br /><span style="font-size: large;">→&nbsp;&nbsp; &nbsp;Usando o 'sleep' e o 'clear' para programas interativos</span><br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;sleep 1 # tempo de 1 segundo de espera na execução<br />&nbsp;&nbsp; &nbsp;clear #(limpa a tela){% endhighlight %}<br /><br /><span style="font-size: large;">→&nbsp;&nbsp; &nbsp;o comando 'reset'</span> <br />&nbsp;&nbsp; &nbsp;É o mesmo que o clear, porém limpa a tela totalmente(a barra de rolagem fica integral)<br /><br /><span style="font-size: large;">→&nbsp;&nbsp; &nbsp;Mostrar hora</span><br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;DATA=`date +%T`<br />&nbsp;&nbsp; &nbsp;echo $DATA{% endhighlight %}<br /><br /><span style="font-size: large;">→ O comando tput</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Envia a seqüência para mover o cursor para a linha 2, coluna 4 (no canto superior esquerdo da tela, geralmente conhecida como a "casa" posição do cursor).<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}cat arquivo.txt | tput cup 2 4{% endhighlight %}<br /><br /><span style="font-size: large;">→&nbsp;&nbsp; &nbsp;O comando diff(utilizado para para mostrar diferenças em arquivos)</span><br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ diff hashing_site.txt hashing_sum.txt{% endhighlight %}<br /><br /><span style="font-size: large;">→ Usando o Comando beep<br /></span><br />&nbsp;&nbsp; &nbsp;<u><i>• Instalando:</i></u><br />&nbsp;&nbsp; &nbsp;{% highlight bash %}# apt-get install beep{% endhighlight %}<br /><br />&nbsp;&nbsp; &nbsp;<u><i>• Opções de uso</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; <br /><table align="center" border="1" cellpadding="4"><tbody><tr><th>Opção</th><th>Descrição</th><th colspan="2">Exemplos</th></tr><tr><td>-l milissegundos</td><td>Essa opção determina quantos milessegundos o beep tocará, lembre-se que 1ms=0,001s logo 1000ms=1s</td><td>{% highlight bash %}$ beep -l 5000{% endhighlight %}</td></tr><tr><td>-f frequência</td><td>Define a frequencia, muda o tom do som, permitindo realizar combinações muito interessantes</td><td>{% highlight bash %}$ beep -l 2000 -f 100{% endhighlight %}</td></tr><tr><td>-r repetições</td><td>Define o numero de repetições</td><td>{% highlight bash %}$ beep -l 800 -f 100 -r 5{% endhighlight %}</td></tr><tr><td>-d tempo</td><td>Determina o tempo (delay) de espera de repetição entre um som e outro, usado junto com a opção -r</td><td>{% highlight bash %}$ beep -l 500 -r 5 -d 1000{% endhighlight %}</td></tr><tr><td>-n</td><td>Usa uma linha de comando do beep para realizar vários sons diferentes</td><td>{% highlight bash %}$ beep -l 700 -f 1 -n -l 700 -f 10 -n -l 700 -f 100{% endhighlight %}</td></tr><tr><td>-s</td><td>Essa opção trata do processamento de entrada e saída de dados. A opção -s conta as linhas que foram redirecionadas para o beep por meio do pipe (|)</td><td>{% highlight bash %}$ cat zonebin.txt | beep -s -f 500{% endhighlight %}</td></tr><tr><td>-c</td><td>Essa opção trata do processamento de entrada e saída de dados, contando os caracteres que forem redirecionados pelo pipe</td><td>{% highlight bash %}$ echo zonebin | beep -c -f 100 -l 900{% endhighlight %}</td></tr></tbody></table><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br /><span style="font-size: large;">→ Passando argumentos para funções</span><br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;#!/bin/bash<br />&nbsp;&nbsp; &nbsp;ola(){<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "Olá $1, vamos ser terminalroot." ; <br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;ola Marcos<br />&nbsp;&nbsp; &nbsp;echo '$* ou $@(argumentos da função) =' $* 'ou' $@ ', $#(número de parâmetros para função) = '$# ', $0 = '$0<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; </b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp; &nbsp;Nota adicional para funções:</b><br /><b>&nbsp;&nbsp; &nbsp;ao invés de criar vários aliases no .bashrc melhor criar funções em um diretório, exemplo:</b></blockquote><b>&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<strike>a)</strike> edite seu .bashrc somente uma vez incluindo uma linha<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}$ echo 'alias minhasfuncoes="/home/$USER/minhasfuncoes.sh"' &gt;&gt; /home/$USER/.bashrc{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<strike>b)</strike> Crie o arquivo minhasfuncoes.sh no seu /home com o seguinte código:<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}$ echo '#!/bin/bash' &gt; funcoesbosta.sh &amp;&amp; echo '/home/$USER/funcoes/./$1' &gt;&gt; minhasfuncoes.sh{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<strike>c)</strike> Crie uma pasta 'funcoes' na sua home para salvar sua funções lá:<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}$ mkdir /home/$USER/funcoes{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<strike>d)</strike> Crie sua funções sem o .sh e jogue na pasta '/home/$USER/funcoes'<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<u><i>• Exemplos:</i></u><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="color: red;">♠ Função bobmarley():</span> <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ echo '#!/bin/bash' &gt; /home/$USER/funcoes/bobmarley &amp;&amp; echo 'bobmarley(){ echo "Músico jamaicano!";}' &gt;&gt; /home/$USER/funcoes/bobmarley &amp;&amp; echo 'bobmarley' &gt;&gt; /home/$USER/funcoes/bobmarley{% endhighlight %} <br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="color: red;">♠ Função malcomx():</span> <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}$ echo '#!/bin/bash' &gt; /home/$USER/funcoes/malcomx &amp;&amp; echo 'malcomx(){ echo "Líder Revolucionário!";}' &gt;&gt; /home/$USER/funcoes/malcomx &amp;&amp; echo 'malcomx' &gt;&gt; /home/$USER/funcoes/malcomx{% endhighlight %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="color: red;">♠ (...)</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<strike>e)</strike> Depois torne tudo executável, dando as devidas permissões:<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}chmod +x /home/$USER/minhasfuncoes.sh &amp;&amp; chmod -R +x /home/$USER/funcoes/{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;<strike>f)</strike> Agora basta abrir o novo terminal e chamar a função desejada para executar o desejado:<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;$ minhasfuncoes bobmarley<br />&nbsp;&nbsp; &nbsp;$ Músico jamaicano!<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;outra função,<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;$ minhasfuncoes malcomx<br />&nbsp;&nbsp; &nbsp;$ Líder Revolucionário!<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;(...)<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;Ainda há como torná-las de leitura automática sem precisar chamar a minhasfuncoes, assim como as FunçõesZZ do Aurélio.<br /><br /><span style="font-size: large;">→ O comando exit</span>:<br /></b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• A declaração de saída é usado para sair do script shell com um status de N.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• Use a declaração de saída para indicar o término shell script bem ou mal sucedidas.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• O valor de N pode ser utilizado por outros comandos ou scripts shell para levar a sua própria ação.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• Se N for omitido, o estado de saída é o valor do último comando foi executado.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• Use a declaração de saída para terminar script shell em um erro.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• Se N é definido para 0 significa saída shell normal. Criar um script shell chamado exitcmd.sh:</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• Cada comando Linux executado pelo script shell ou usuário, tem um status de saída.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• O status de saída é um número inteiro.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• As Linux homem páginas de estatísticas de estado da saída de cada comando.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• 0 estado de saída significa que o comando foi bem sucedido sem erros.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• A não-zero (1-255 valores) saída de comando, o estatuto foi falha.</b><br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;• Você pode usar variáveis ​​shell especial chamado? para obter o status de saída do comando anteriormente executado.Para imprimir? variável usar o comando echo:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </b></blockquote><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#!/bin/bash<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "Isto é um teste."<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# Terminar nosso script shell com mensagem de sucesso<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;exit 0<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<u><i>• Para visualizar existe data de status do comando, digite</i></u>:<br />&nbsp; &nbsp;&nbsp; &nbsp;{% highlight bash %}echo $?{% endhighlight %}<br />&nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;&nbsp; &nbsp;<u><i>• De acordo com a página man ls - estado de saída é 0 se OK, 1 se problemas menores, se dois sérios problemas</i></u>. &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;echo $?<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;date # executar o comando data<br />&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;echo $? # imprime status de saída<br />&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;foobar123 # não é um comando válido<br />&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;echo $? # imprime status de saída<br />&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; <br />&nbsp;&nbsp;&nbsp; <br /><span style="font-size: large;">→ O comando seq</span><br /><br />&nbsp;&nbsp; &nbsp;Ele é praticamente o loop for, mostra uma sequência de tal número até outro número.No exemplo abaixo, contará do número 2 até o número 8<br />&nbsp;&nbsp; &nbsp;{% highlight bash %}seq 2 8{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;mesmo que:<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;for i in {2..8}<br />&nbsp;&nbsp; &nbsp;do<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo $i<br />&nbsp;&nbsp; &nbsp;done<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;ou até mesmo(os dois aninhados):<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;for i in $(seq 2 8)<br />&nbsp; do<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo $i<br />&nbsp;&nbsp; &nbsp;done<br />&nbsp;&nbsp; &nbsp;{% endhighlight %}<br /><br /><span style="font-size: large;">→&nbsp;&nbsp; &nbsp;O comando let</span><br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Ele praticamente é um 'incrementador', se vc digitar isso num terminal, verá que ele incrementar +1 na variável j<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo $j<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ let j++<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo $j<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ 1<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ let j++<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo $j<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ 2<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% endhighlight %}<br /><br /><span style="font-size: large;">→&nbsp;&nbsp; &nbsp;Operações básicas com vetores/arrays</span><br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Se há um recurso muito útil na programação, certamente é a possibilidade de agruparmos várias variáveis de um mesmo tipo em uma só. São o que chamamos de vetor, ou matriz - em inglês se diz array.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ vetor=(eric camila marcos débora)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo ${vetor[3]}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ débora<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo ${vetor[0]}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ eric<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{% endhighlight %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br /><span style="font-size: large;">→ O comando unset(serve para apagar: variáveis, vetores/arrays e funções)</span><br /><br /><span style="font-size: large;">→ Zenity: interface gráfica para scripts</span><br /><br />&nbsp;&nbsp; &nbsp;<u><i>• Utiliza sempre aspas simples</i></u> <br />&nbsp;&nbsp; &nbsp;{% highlight bash %}zenity --info --text 'Olá mundo!'{% endhighlight %}<br />&nbsp;&nbsp; <br /><span style="font-size: large;">→&nbsp;&nbsp; &nbsp;Mais infos e fontes</span>:<br />&nbsp;&nbsp; </b><br /><blockquote class="tr_bq"><b><a href="https://help.gnome.org/users/zenity/stable/" target="_blank">https://help.gnome.org/users/zenity/stable/</a></b><br /><b><a href="http://funcoeszz.net/" target="_blank">http://funcoeszz.net/</a>&nbsp;</b><b><a href="http://bash.cyberciti.biz/guide/Main_Page" target="_blank">http://bash.cyberciti.biz/guide/Main_Page</a>&nbsp;</b><br /><b><a href="http://www.vivaolinux.com.br/" target="_blank">http://www.vivaolinux.com.br/</a>&nbsp;</b><br /><b><a href="http://www.dicas-l.com.br/" target="_blank">http://www.dicas-l.com.br/</a>&nbsp;</b><br /><b><a href="http://pt.wikipedia.org/wiki/Cut_%28Unix%29" target="_blank">http://pt.wikipedia.org/wiki/Cut_%28Unix%29</a>&nbsp;</b><br /><a href="http://renanbirck.blogspot.com/" target="_blank"><b>http://renanbirck.blogspot.com/</b></a></blockquote>