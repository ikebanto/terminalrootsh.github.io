---
layout: post
title: Jogo de labirinto feito em shell script
date: '2015-05-26T18:01:00.000-07:00'
description: Jogo de labirinto feito em shell script
main-class: 'misc'
color: '#34a853'
author: Marcos Oliveira
tags:
- Games
- Terminal
modified_time: '2015-05-26T18:01:35.369-07:00'
thumbnail: http://1.bp.blogspot.com/-nkW2LcvPRYE/VWUXAhzfAnI/AAAAAAAABSw/VpX95QLGnqM/s72-c/larinto-shell.png
twitter_text: Jogo de labirinto feito em shell script
introduction: Jogo de labirinto feito em shell script
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-nkW2LcvPRYE/VWUXAhzfAnI/AAAAAAAABSw/VpX95QLGnqM/s1600/larinto-shell.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-nkW2LcvPRYE/VWUXAhzfAnI/AAAAAAAABSw/VpX95QLGnqM/s320/larinto-shell.png" /></a></div><b>Este jogo possui fases aleatórias e seleção do nível de dificuldade.</p><p> Foi baseado no gerador aleatório de labirintos de Joe Wingbermuehle localizado em: <a href="https://raw.github.com/joewing/maze/master/maze.sh" rel="nofollow" target="_blank">https://raw.github.com/joewing/maze/master/maze.sh</a></p><p>Acrescentei o conceito de movimento e colisões para criar o jogo.</p><p> Naturalmente uma linguagem compilada deve ser mais eficiente para  este tipo de uso, porém esse joguinho serve para mostrar o poder nem  sempre reconhecido do shell script.</p><p> Download: <a href="http://pastebin.com/download.php?i=rQdJ43Nw" target="_blank">clique aqui para baixar o script labirinto.sh</a></p><p> Código:</p><p> </b></p><p><div class="adp"><b>#!/bin/bash</b></p><p><b>#</b></p><p><b>#</b></p><p><b># Bash Labirinto versão 1.0</b></p><p><b># Este jogo foi baseado no gerador aleatório de labirintos de</b></p><p><b># Joe Wingbermuehle localizado em&nbsp; https://raw.github.com/joewing/maze/master/maze.sh</b></p><p><b># Acrescentei o conceito de movimento e colisões para criar o jogo.</b></p><p><b># Naturalmente uma linguagem compilada deve ser mais eficiente para este tipo de uso,</b></p><p><b># porém esse joguinho serve para mostrar o poder nem sempre reconhecido do shellscript.</b></p><p><b>#</b></p><p><b>#</b></p><p><b># Referências e códigos utilizados:</b></p><p><b># https://raw.github.com/joewing/maze/master/maze.sh</b></p><p><b># http://lendscripts.blogspot.com.br/2012/10/licao-3-programacao-de-jogos-em.html</b></p><p><b>#</b></p><p><b># Escrito por Fernando Bolonhezi Giannasi – junho/2013# Validar versão do Bash</b></p><p><b>if [ $(echo $BASH_VERSION | awk -F”.” ‘{ if ( ($1 &gt;= 4) ) {print “0”} else {print “1”}}’) -ne “0” ]; then</b></p><p><b>echo “Este jogo só funciona com Bash 4.0 ou posterior”</b></p><p><b>echo “Sua versão é $BASH_VERSION”</b></p><p><b>exit 1</b></p><p><b>fi # Menu inicial</b></p><p><b>setterm -cursor off</b></p><p><b>while true; do</b></p><p><b>clear</b></p><p><b>echo -e ’33[01;33m’</b></p><p><b>cat &lt;&lt; EOF</b></p><p><b>Labirinto Bash versão 1.0</b></p><p><b>*******************************************</b></p><p><b>Ajude a bolota vermelha a encontrar a saída</b></p><p><b>*******************************************</b></p><p><b>Comandos:</b></p><p><b>a -&gt; move a esquerda</b></p><p><b>s -&gt; move abaixo</b></p><p><b>d -&gt; move a direita</b></p><p><b>w -&gt; move acima</b></p><p><b>q -&gt; sai do jogo (a qualquer momento)</b></p><p><b>*******************************************</b></p><p><b>EOF</b></p><p><b>tput sgr0</b></p><p><b>echo -e ’33[01;31m’</b></p><p><b>cat &lt;&lt; EOF</b></p><p><b>Selecione a dificuldade desejada:</b></p><p><b>1-) Fácil</b></p><p><b>2-) Médio</b></p><p><b>3-) Difícil</b></p><p><b>q-) Sair do Jogo</b></p><p><b>EOF</b></p><p><b>tput sgr0</b></p><p><b>read -n1 -s DIFICULDADE</b></p><p><b>case “$DIFICULDADE” in</b></p><p><b>“1”)</b></p><p><b>MAZE_WIDTH=”39″</b></p><p><b>MAZE_HEIGHT=”21″</b></p><p><b>break</b></p><p><b>;;</b></p><p><b>“2”)</b></p><p><b>MAZE_WIDTH=”49″</b></p><p><b>MAZE_HEIGHT=”31″</b></p><p><b>break</b></p><p><b>;;</b></p><p><b>“3”)</b></p><p><b>MAZE_WIDTH=”59″</b></p><p><b>MAZE_HEIGHT=”41″</b></p><p><b>break</b></p><p><b>;;</b></p><p><b>“q”)</b></p><p><b>exit 0</b></p><p><b>;;</b></p><p><b>esac</b></p><p><b>done</b></p><p><b># Gerador de labirintos:</b></p><p><b># Initialize the maze array.</b></p><p><b>function init_maze {</b></p><p><b>for ((y=0; y&lt;MAZE_HEIGHT; y++)) ; do</b></p><p><b>for ((x=1; x&lt;$((MAZE_WIDTH-1)); x++)) ; do</b></p><p><b>maze[$((y * MAZE_WIDTH + x))]=0</b></p><p><b>done</b></p><p><b>maze[$((y * MAZE_WIDTH + 0))]=1</b></p><p><b>maze[$((y * MAZE_WIDTH + (MAZE_WIDTH – 1)))]=1</b></p><p><b>done</b></p><p><b>for ((x=0; x&lt;MAZE_WIDTH; x++)) ; do</b></p><p><b>maze[$x]=1</b></p><p><b>maze[$(((MAZE_HEIGHT – 1) * MAZE_WIDTH + x))]=1</b></p><p><b>done</b></p><p><b>}</b></p><p><b># Display the maze array.</b></p><p><b>function print_maze {</b></p><p><b>for ((y=0; y&lt;MAZE_HEIGHT; y++)) ; do</b></p><p><b>for ((x = 0; x &lt; MAZE_WIDTH; x++ )) ; do</b></p><p><b>if [[ maze[$((y * MAZE_WIDTH + x))] -eq 0 ]] ; then</b></p><p><b>echo -n “[]”</b></p><p><b>else</b></p><p><b>echo -n ”&nbsp; ”</b></p><p><b>fi</b></p><p><b>done</b></p><p><b>echo</b></p><p><b>done</b></p><p><b>}</b></p><p><b># Carve the maze starting at the specified offset.</b></p><p><b>function carve_maze {</b></p><p><b>local index=$1</b></p><p><b>local dir=$RANDOM</b></p><p><b>local i=0</b></p><p><b>maze[$index]=1</b></p><p><b>while [ $i -le 4 ] ; do</b></p><p><b>local offset=0</b></p><p><b>case $((dir % 4)) in</b></p><p><b>0) offset=1 ;;</b></p><p><b>1) offset=-1 ;;</b></p><p><b>2) offset=$MAZE_WIDTH ;;</b></p><p><b>3) offset=$((-$MAZE_WIDTH)) ;;</b></p><p><b>esac</b></p><p><b>local index2=$((index + offset))</b></p><p><b>if [[ maze[$index2] -eq 0 ]] ; then</b></p><p><b>local nindex=$((index2 + offset))</b></p><p><b>if [[ maze[$nindex] -eq 0 ]] ; then</b></p><p><b>maze[$index2]=1</b></p><p><b>carve_maze $nindex</b></p><p><b>i=0</b></p><p><b>dir=$RANDOM</b></p><p><b>index=$nindex</b></p><p><b>fi</b></p><p><b>fi</b></p><p><b>i=$((i + 1))</b></p><p><b>dir=$((dir + 1))</b></p><p><b>done</b></p><p><b>}</b></p><p><b># Gera um labirinto:</b></p><p><b>TMP=”/tmp”</b></p><p><b>if [ ! -d “$TMP” ]; then</b></p><p><b>mkdir “$TMP”</b></p><p><b>fi</b></p><p><b>init_maze</b></p><p><b>carve_maze $((2 * MAZE_WIDTH + 2))</b></p><p><b>maze[$((MAZE_WIDTH + 2))]=1</b></p><p><b>maze[$(((MAZE_HEIGHT – 2) * MAZE_WIDTH + MAZE_WIDTH – 3))]=1</b></p><p><b>print_maze &gt; $TMP/maze.txt</b></p><p><b>sed -i ‘1d’ $TMP/maze.txt</b></p><p><b>sed -i ‘s/^&nbsp; //g’ $TMP/maze.txt</b></p><p><b># Inicializando variáveis</b></p><p><b>INPUT=”0″ # Entrada de dados</b></p><p><b>m=”0″ # Movimento 1</b></p><p><b>n=”1″ # Movimento 2</b></p><p><b>C=”0″ # Teste de colisões</b></p><p><b>x=”3″ # Coordenada x</b></p><p><b>y=”0″ # Coordenada y</b></p><p><b>counter=”1″ #Conta movimentos</b></p><p><b>GANHA=”$(echo $MAZE_HEIGHT – 3 | bc)” # Detecta local da saída</b></p><p><b>#Funções para imprimir labirinto e a bola</b></p><p><b>function cat_maze() {</b></p><p><b>echo -ne ’33[01;32m’</b></p><p><b>cat $TMP/maze.txt</b></p><p><b>tput sgr0</b></p><p><b>echo “Coordenada X = $x”</b></p><p><b>echo “Coordenada Y = $y”</b></p><p><b>echo “Movimentos = $counter”</b></p><p><b>}</b></p><p><b>function cat_ball() {</b></p><p><b>echo -ne ’33[01;31m’O</b></p><p><b>tput sgr0</b></p><p><b>}</b></p><p><b># Posição inicial</b></p><p><b>clear</b></p><p><b>tput cup 0 0</b></p><p><b>cat_maze</b></p><p><b>tput cup $y $x</b></p><p><b>cat_ball</b></p><p><b>#Movimentação da bola:</b></p><p><b>while [ $INPUT != “q” ];do</b></p><p><b>read&nbsp; -n1 -s INPUT</b></p><p><b>if [ $INPUT = a ];then</b></p><p><b>let “m = x”</b></p><p><b>let “n = y + 1″</b></p><p><b>C=$(cat $TMP/maze.txt | sed -n “$n”p 2&gt; /dev/null | cut -c”$m” 2&gt;  /dev/null) # Se C não estiver vazio então atingimos uma parede</b></p><p><b>if [ -z $C ];then</b></p><p><b>let “x = x – 1″</b></p><p><b>else</b></p><p><b>let counter–</b></p><p><b>fi</b></p><p><b>fi</b></p><p><b>if [ $INPUT = d ];then</b></p><p><b>let “m = x + 2″</b></p><p><b>let “n = y + 1″</b></p><p><b>C=$(cat $TMP/maze.txt | sed -n “$n”p 2&gt; /dev/null | cut -c”$m” 2&gt;  /dev/null) # Se C não estiver vazio então atingimos uma parede</b></p><p><b>if [ -z $C ];then</b></p><p><b>let “x = x + 1″</b></p><p><b>else</b></p><p><b>let counter–</b></p><p><b>fi</b></p><p><b>fi</b></p><p><b>if [ $INPUT = w ];then</b></p><p><b>let “m = x + 1″</b></p><p><b>let “n = y”</b></p><p><b>C=$(cat $TMP/maze.txt | sed -n “$n”p 2&gt; /dev/null | cut -c”$m” 2&gt;  /dev/null) # Se C não estiver vazio então atingimos uma parede</b></p><p><b>if [ -z $C ];then</b></p><p><b>let “y = y – 1″</b></p><p><b>else</b></p><p><b>let counter–</b></p><p><b>fi</b></p><p><b>fi</b></p><p><b>if [ $INPUT = s ];then</b></p><p><b>let “m = x + 1″</b></p><p><b>let “n = y + 2″</b></p><p><b>C=$(cat $TMP/maze.txt | sed -n “$n”p 2&gt; /dev/null | cut -c”$m” 2&gt;  /dev/null) # Se C não estiver vazio então atingimos uma parede</b></p><p><b>if [ -z $C ];then</b></p><p><b>let “y = y + 1″</b></p><p><b>else</b></p><p><b>let counter–</b></p><p><b>fi</b></p><p><b>fi</b></p><p><b>if [ “$y” -lt “0” ]; then y=0; let counter–; fi</b></p><p><b># Checa se ganhou</b></p><p><b>if [ “$y” -gt “$GANHA” ]; then</b></p><p><b>tput cup $(echo $MAZE_HEIGHT + 3 | bc) 0</b></p><p><b>echo -e ’33[01;31m’</b></p><p><b>echo GANHOU!!!!!</b></p><p><b>echo “Score: $counter movimentos realizados”</b></p><p><b>tput sgr0</b></p><p><b>echo</b></p><p><b>setterm -cursor on</b></p><p><b>exit 0</b></p><p><b>fi</b></p><p><b>clear</b></p><p><b>cat_maze</b></p><p><b># Imprime a bola na nova localização</b></p><p><b>tput cup $y $x</b></p><p><b>cat_ball</b></p><p><b>let counter++</b></p><p><b>done</b></p><p><b>clear</b></p><p><b># Fim do script</b></div>Via: http://www.vivaolinux.com.br/script/Jogo-de-labirinto-feito-em-shell-script

</p>
