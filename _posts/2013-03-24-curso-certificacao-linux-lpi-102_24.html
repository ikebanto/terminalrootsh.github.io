---
layout: post
title: 'Curso Certificação Linux LPI-102: Configurando a Rede'
date: '2013-03-24T14:49:00.000-07:00'
author: The Bang Bash
tags:
- Linux
- LPI
modified_time: '2013-05-03T07:16:04.714-07:00'
thumbnail: http://3.bp.blogspot.com/-7Z3BhC6xymo/UU9cjUldicI/AAAAAAAABOE/rt--_eubO3g/s72-c/rede+linux.jpg
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-2444854981346979000
blogger_orig_url: http://www.terminalroot.com.br/2013/03/curso-certificacao-linux-lpi-102_24.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-7Z3BhC6xymo/UU9cjUldicI/AAAAAAAABOE/rt--_eubO3g/s1600/rede+linux.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-7Z3BhC6xymo/UU9cjUldicI/AAAAAAAABOE/rt--_eubO3g/s320/rede+linux.jpg" /></a></div><!-------------------------------------------------> <script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------><br /><br /><br /><blockquote class="tr_bq"><b>Várias distribuições oferecem ferramentas próprias para a configuração e carga dos recursos de rede.Entretanto alguns comandos, arquivos e conceitos são aplicáveis a todas elas.Neste tópico será abordado a configuração de uma rede TCP/IP em dispositivos ethernet.</b></blockquote><b><br />O primeiro passo é conhecer os arquivos de configuração de rede comuns a todas as distribuições.Segue:<br /><br />1-Ver o nome do sistema:<br /><br />{% highlight bash %}# cat /etc/hostname{% endhighlight %}<br /><br />2-Este arquivo faz o mapeamento entre endereços IP e nomes de máquinas de rede e é utilizado para resolução de nomes durante o processo de boot enquanto nenhum servidor de DNS entrou em ação.<br /><br />{% highlight bash %}# cat /etc/hosts{% endhighlight %}<br /><br />3-Este arquivo especifica o endereço IP de um ou mais servidores de DNS para resolução de nomes.<br /><br />{% highlight bash %}# cat /etc/resolv.conf{% endhighlight %}<br /><br />4-Este arquivo especifica a ordem de procura para a resolução de nomes.O sistema pode procurar os endereços IPs no arquivo /etc/hosts (hosts) e pelo serviço de DNS (bind).A opção multi on habilita mais de um IP para determinada máquina.<br /><br />{% highlight bash %}# cat /etc/host.conf{% endhighlight %}<br /><br />5-Este arquivo é a evolução do /etc/host.conf e possibilita que a ordem de procura para resolução de nomes seja customizada para cada serviço.Ele é utilizado nas últimas distribuições por diversas bibliotecas ao invés do /etc/host.conf.<br /><br />{% highlight bash %}# cat /etc/nsswitch.conf{% endhighlight %}<br /><br />6-Descrever endereçamentos de rede, e portanto os endereços deve terminar com .0.<br /><br />{% highlight bash %}# cat /etc/networks{% endhighlight %}<br /><br />7- Este comando mostra o nome local da máquina.Também pode ser utilizado para trocar o nome da máquina se um novo nome for fornecido como argumento.<br />Ele suporta a opção --fdqn (Fully Qualified Domain Name), que retorna o nome do sistema mais o domínio:<br /><br />{% highlight bash %}# hostname --fqdn{% endhighlight %}<br /><br />8-Retorna ou configura o domínio Internet da máquina.<br /><br />{% highlight bash %}# dnsdomainname{% endhighlight %}<br /><br />9- ifconfig cria e/ou configura as interfaces de rede e seus parâmetros.Esta operação é geralmente feita durante o processo de carga do sistema.<br />&nbsp; Se não for passado nenhum parâmetro, ele exibe as configurações das interfaces ativas.<br />&nbsp; Os parâmetros podem ser:<br />&nbsp; <br /> <div class="separator" style="clear: both; text-align: center;">  <a href="http://1.bp.blogspot.com/-A5vbwfxBa88/UU9dhmk6pQI/AAAAAAAABOM/1tu5LMxtxBs/s1600/IMG-1.png" imageanchor="1" ><img border="0" src="http://1.bp.blogspot.com/-A5vbwfxBa88/UU9dhmk6pQI/AAAAAAAABOM/1tu5LMxtxBs/s320/IMG-1.png" /></a>  </div> &nbsp; <br />&nbsp; Como configurar o IP, máscara e broadcast dde uma placa de rede:<br />&nbsp; <br />&nbsp; {% highlight bash %}<br />&nbsp; # ifconfig eth0 10.1.1.2 netmask 255.255.0.0 brocast 10.0.0.255<br />&nbsp; # ifconfig eth0 up<br />&nbsp; # ifconfig eth0 down<br />&nbsp; {% endhighlight %}<br />&nbsp; <br />10- O comando netstat exibe as conexões de rede, tabela de rotas, estatíticas das interfaces, etc.<br /><br />{% highlight bash %}# netstat [opções]{% endhighlight %}<br /><br />11-O comando route manipula a tabela de rotas do Kernel.Seu uso primário é para adicionar ou apagar rotas estáticas para máquinas ou redes específicas.<br />&nbsp; Se o route for utilizado sem nenhuma opção, exibe a tabela de rotas.Para adicionar uma nova rota utilizamos o parâmetro add.O parâmetro del apaga uma rota.<br />&nbsp; As opções para os parâmetros add e del são:<br />&nbsp; -netmask máscara &gt;&gt; especifica a máscara de subrede para um determinado destino.<br />&nbsp; -gw endereço &gt;&gt; especifica o gateway que será utilizado para alcançar uma determinada máquina ou rede.<br />&nbsp; <br />{% highlight bash %}# route{% endhighlight %}<br /><br />12-tcpdump é uma ferramenta utilizada para monitorar os pacotes trafegados numa rede de computadores. Ela mostra os cabeçalhos dos pacotes que passam pela interface de rede.<br /><br />Exemplo de comando tcpdump para mostrar quais as ligações de um determinado endereço tcp-ip à porta 80 do seu servidor: </b><i>tcpdump -ni eth0 src "numero ip" and dst port 80</i><b><br /><br />&nbsp;&nbsp;&nbsp; {% highlight bash %}# tcpdump -i eth0{% endhighlight %}<br /><br />Conexões de origem podem ser monitoradas utilizando o parâmetro src host, um exemplo simples seria monitorarmos o tráfego que vem de 192.168.0.9 para nosso computador, com o ip 192.168.0.2. A linha de comando ficaria da seguinte forma:<br /><br />&nbsp;&nbsp;&nbsp; {% highlight bash %}# tcpdump -i eth0 src host 192.168.0.9{% endhighlight %}<br /><br />Se quisermos monitorar as conexões especificando um host de destino, poderíamos fazê-lo com o parâmetro dst host, o exemplo abaixo mostra todo o tráfego do host 192.168.0.2 com 192.168.0.1, no caso, 192.168.0.1 é nosso gateway.<br /><br />&nbsp;&nbsp;&nbsp; {% highlight bash %}# tcpdump -i eth0 dst host 192.168.0.1{% endhighlight %}<br /><br />Com tcpdump também podemos especificar exceções com o parâmetro not host, por exemplo, em nosso servidor queremos ver todo o tráfego que se passa em sua interface, exceto o de 192.168.0.8, faríamos da seguinte forma:<br /><br />&nbsp;&nbsp;&nbsp; {% highlight bash %}# tcpdump -i eth0 not host 192.168.0.9{% endhighlight %}<br /><br />No tcpdump podemos também especificar portas de origem e destino com os comandos src port e dst port, um exemplo seria monitorarmos o tráfego destinado à porta 80 (http), para isso utilizaríamos a linha de comandos abaixo e navegaríamos em um site qualquer:<br /><br />&nbsp;&nbsp;&nbsp; {% highlight bash %}# tcpdump -i eth0 dst port 80{% endhighlight %}<br /><br />Para verificarmos o tráfego da porta de origem 32881 por exemplo, faríamos da seguinte forma:<br /><br />&nbsp;&nbsp;&nbsp; {% highlight bash %}# tcpdump -i eth0 src port 32881{% endhighlight %}<br /><br />Muitas opções avançadas podem ser obtidas com o tcpdump, essas são algumas opções básicas, porém fundamentais para quem quer aprender sobre sniffers.<br /><br />&nbsp; </b>