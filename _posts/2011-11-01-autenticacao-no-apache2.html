---
layout: post
title: Autenticação no Apache2
date: '2011-11-01T06:37:00.000-07:00'
description: Autenticação no Apache2
main-class: 'misc'
color: '#34a853'
author: The Bang Bash
tags:
- Servidores
- Apache
modified_time: '2013-09-22T07:15:45.833-07:00'
thumbnail: http://2.bp.blogspot.com/-T3aWDDrqDPU/Uj77fEjKhaI/AAAAAAAACZY/gBr2xj5V9gE/s72-c/apache-linux-servers.jpg
twitter_text: Autenticação no Apache2
introduction: Autenticação no Apache2
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-T3aWDDrqDPU/Uj77fEjKhaI/AAAAAAAACZY/gBr2xj5V9gE/s1600/apache-linux-servers.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-T3aWDDrqDPU/Uj77fEjKhaI/AAAAAAAACZY/gBr2xj5V9gE/s320/apache-linux-servers.jpg" /></a></div><!-------------------------------------------------><script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------></p><p><b>Vou explicar aqui como você disponibilizar o acesso a uma pasta do Apache(www) exigindo usuario e senha.</b></p><p></p><p><b>01. Primeiramente devemos criar o diretório onde desejamos restringir o acesso caso o mesmo não exista.</b></p><p>{% highlight bash %}</p><p># mkdir /var/www/teste {% endhighlight %}</p><p></p><p><b>02. Criaremos agora um arquivo somente para testes com o nome "index.html" no diretório </b>"/var/www/teste".</p><p>{% highlight bash %}</p><p># echo Testando autenticação no Apache &gt; /var/www/teste/index.html {% endhighlight %}</p><p><b>03. Criar os arquivos .htaccess e passwd no diretório onde se deseja restringir o acesso.</b></p><p>{% highlight bash %}</p><p># touch passwd .htaccess{% endhighlight %}</p><p><b>04. Conteúdo do arquivo .htaccess </b></p><p></p><p>{% highlight bash %}</p><p>AuthName "Nome que aparecerá no título da janela"</p><p>AuthType Basic</p><p>AuthUserFile /var/www/teste/passwd</p><p>require valid-user {% endhighlight %}</p><p><b></p><p>05) Criação dos usuários que terão permissão para acessar o diretório:</b></p><p>{% highlight bash %}</p><p># htpasswd -c passwd usuário{% endhighlight %}</p><p><b>Será pedida a senha do novo usuário e em seguida sua confirmação.</b></p><p>{% highlight bash %}</p><p>New password:</p><p>Re-type new password:</p><p>Adding password for user usuário{% endhighlight %}</p><p>Ao abrir o arquivo de senhas (passwd), serão vistos os nomes de usuário e senhas criptografadas.</p><p>{% highlight bash %}</p><p># more passwd</p><p>usuário:ZzbJ.YtR6TyyU{% endhighlight %}</p><p><b>06) Edite o arquivo {% highlight bash %}"/etc/apache2/sites-available/default"{% endhighlight %}, colocando as seguintes linhas no final do arquivo antes da tag </b></p><p><blockquote><b>&lt;/VirtualHost&gt;</b></blockquote><b>, substituindo todas as diretivas conforme suas necessidades, uma observação importante é para a tag </b></p><p><blockquote><b>AllowOverride</b></blockquote><b>, a mesma deve conter <blockquote>"AuthConfig"</blockquote>para que a autenticação seja bem sucedida.</b></p><p></p><p>{% highlight bash %}</p><p>Alias /teste/ "/var/www/teste/"</p><p>&lt;Directory "/var/www/teste/"&gt;</p><p>Options Indexes MultiViews FollowSymLinks</p><p>AllowOverride AuthConfig</p><p>Order deny,allow</p><p>Deny from all</p><p>Allow from 172.16.0.0/255.0.0.0 ::1/128</p><p>&lt;/Directory&gt;{% endhighlight %}</p><p><b>07) Reinicie o serviço do Apache para atualizar as configurações.</b></p><p>{% highlight bash %}</p><p># /etc/init.d/apache2 restart{% endhighlight %}</p><p><b>08) Teste agora suas configurações acessando http://localhost/teste, fornecendo o nome de usuário senha.</b></p><p></p><p><blockquote>Observações:</p><p>as linhas abaixo se referem à restrição por IP, não são necessárias à autenticação.</p><p></p><p>Deny from all</p><p>Allow from 172.16.0.0/255.0.0.0 ::1/128 </p><p></p><p>e todo esse tramite desse ser feito pelo usuário root para funcionar.</blockquote></p><p>Eu uso aqui e você, vai deixar de se proteger!</p><p></p><p><a href="http://www.vivaolinux.com.br/dica/Autenticacao-no-Apache2" target="_blank">Fonte:Viva o Linux</a>

</p>
