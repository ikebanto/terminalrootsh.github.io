---
layout: post
title: Pesquisando CEP via Shell Script
date: '2013-08-25T09:27:00.004-07:00'
description: Pesquisando CEP via Shell Script
main-class: 'bash'
color: '#c2003a'
author: The Bang Bash
tags:
- Shell Script
- SED
modified_time: '2014-11-04T13:19:47.272-08:00'
thumbnail: http://2.bp.blogspot.com/-JSTYuG2Tqv8/Um2F0wbMqhI/AAAAAAAACf8/gRoJGkQSxMQ/s72-c/correios-shell.jpg
twitter_text: Pesquisando CEP via Shell Script
introduction: Pesquisando CEP via Shell Script
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-JSTYuG2Tqv8/Um2F0wbMqhI/AAAAAAAACf8/gRoJGkQSxMQ/s1600/correios-shell.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-JSTYuG2Tqv8/Um2F0wbMqhI/AAAAAAAACf8/gRoJGkQSxMQ/s320/correios-shell.jpg" /></a></div>

<blockquote class="tr_bq"><span style="color: purple;"><b>Script simples para saber o Estado, Cidade, Bairro e Logradouro de um determinado CEP, explicações segue nos comentários do código.</b></span></blockquote>

<i>cep.sh</i><span style="color: #999999;"><u> <span style="color: #666666;">[PasteBin]</span></u></span><iframe src="http://pastebin.com/raw/tXfw4yrj" style="border:none;width:100%;"></iframe>

<i>cep.sh</i><span style="color: #666666;"><u>[CodeBlog]</u></span>
<div class="adp">#!/bin/bash
# --------------------------------------
# ./cep.sh
#
# Pesquisando CEP via Shell Script
#
# Uso: ./cep.sh [CEP]
#
# Ex.: ./cep.sh 41630635
#
# Autor: Marcos da B. M. Oliveira , www.terminalroot.com.br
# Desde: Dom 25 Ago 2013 13:11:36 BRT
# Licença: GPL
# --------------------------------------

# se não informa o CEP o script pára aqui
[ -z $1 ] &amp;&amp; echo -e '\e[40;31;1mÉ necessário informar o CEP\033[m' &amp;&amp; exit 1

#url da pesquisa
url='http://cep.republicavirtual.com.br/web_cep.php?cep'

# baixa o código fonte do xml e grava no arquivo cep.txt
lynx -source $url=$1 > cep.txt

# converte o arquivo para utf-8
iconv -f=iso_8859-1 -t=utf-8 cep.txt > cep2.txt

# limpa todas as tags XML
sed 's/<[^>]*>//g' cep2.txt > cep.txt

# remove o arquivo da transformação do encode
rm -rf cep2.txt

# apaga da linha 1 à 4 , pois são desnecessárias
sed -i '1,4d' cep.txt

# apaga todas as linhas em branco
sed -i '/^$/d' cep.txt

# imprime(com cores) os dados do arquivo gerado pelo dump, personalizado.
echo -e "\e[40;37;1m CIDADE-UF:\033[m \e[40;33;1m"$(sed -n '2p' cep.txt) $(sed -n '1p' cep.txt) "\033[m"
echo -e "\e[40;37;1m BAIRRO:\033[m \e[40;33;1m"$(sed -n '3p' cep.txt) "\033[m"
echo -e "\e[40;37;1m LOGRADOURO:\033[m \e[40;33;1m"$(sed -n '4p' cep.txt) $(sed -n '5p' cep.txt) "\033[m"

# remove o arquivo
rm -rf cep.txt</div>

</p>
