---
layout: post
title: Pesquisando CEP via Shell Script
date: '2013-08-25T09:27:00.004-07:00'
description: Pesquisando CEP via Shell Script
main-class: 'bash'
color: '#c2003a'
author: The Bang Bash
tags:
- Shell Script
- SED
modified_time: '2014-11-04T13:19:47.272-08:00'
thumbnail: http://2.bp.blogspot.com/-JSTYuG2Tqv8/Um2F0wbMqhI/AAAAAAAACf8/gRoJGkQSxMQ/s72-c/correios-shell.jpg
twitter_text: Pesquisando CEP via Shell Script
introduction: Pesquisando CEP via Shell Script
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-JSTYuG2Tqv8/Um2F0wbMqhI/AAAAAAAACf8/gRoJGkQSxMQ/s1600/correios-shell.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-JSTYuG2Tqv8/Um2F0wbMqhI/AAAAAAAACf8/gRoJGkQSxMQ/s320/correios-shell.jpg" /></a></div></p><p></p><p><blockquote class="tr_bq"><span style="color: purple;"><b>Script simples para saber o Estado, Cidade, Bairro e Logradouro de um determinado CEP, explicações segue nos comentários do código.</b></span></blockquote></p><p></p><p><i>cep.sh</i><span style="color: #999999;"><u> <span style="color: #666666;">[PasteBin]</span></u></span><script src="http://pastebin.com/embed_js.php?i=tXfw4yrj"></script></p><p></p><p><i>cep.sh</i><span style="color: #666666;"><u>[CodeBlog]</u></span></p><p><div class="adp">#!/bin/bash</p><p># --------------------------------------</p><p># ./cep.sh</p><p>#</p><p># Pesquisando CEP via Shell Script</p><p>#</p><p># Uso: ./cep.sh [CEP]</p><p>#</p><p># Ex.: ./cep.sh 41630635</p><p>#</p><p># Autor: Marcos da B. M. Oliveira , www.terminalroot.com.br</p><p># Desde: Dom 25 Ago 2013 13:11:36 BRT</p><p># Licença: GPL</p><p># --------------------------------------</p><p></p><p># se não informa o CEP o script pára aqui</p><p>[ -z $1 ] &amp;&amp; echo -e '\e[40;31;1mÉ necessário informar o CEP\033[m' &amp;&amp; exit 1</p><p></p><p>#url da pesquisa</p><p>url='http://cep.republicavirtual.com.br/web_cep.php?cep'</p><p></p><p># baixa o código fonte do xml e grava no arquivo cep.txt</p><p>lynx -source $url=$1 &gt; cep.txt</p><p></p><p># converte o arquivo para utf-8</p><p>iconv -f=iso_8859-1 -t=utf-8 cep.txt &gt; cep2.txt</p><p></p><p># limpa todas as tags XML</p><p>sed 's/&lt;[^&gt;]*&gt;//g' cep2.txt &gt; cep.txt</p><p></p><p># remove o arquivo da transformação do encode</p><p>rm -rf cep2.txt</p><p></p><p># apaga da linha 1 à 4 , pois são desnecessárias</p><p>sed -i '1,4d' cep.txt</p><p></p><p># apaga todas as linhas em branco</p><p>sed -i '/^$/d' cep.txt</p><p></p><p># imprime(com cores) os dados do arquivo gerado pelo dump, personalizado.</p><p>echo -e "\e[40;37;1m&nbsp; CIDADE-UF:\033[m \e[40;33;1m"$(sed -n '2p' cep.txt) $(sed -n '1p' cep.txt) "\033[m"</p><p>echo -e "\e[40;37;1m&nbsp;&nbsp;&nbsp;&nbsp; BAIRRO:\033[m \e[40;33;1m"$(sed -n '3p' cep.txt) "\033[m"</p><p>echo -e "\e[40;37;1m LOGRADOURO:\033[m \e[40;33;1m"$(sed -n '4p' cep.txt) $(sed -n '5p' cep.txt) "\033[m"</p><p></p><p># remove o arquivo</p><p>rm -rf cep.txt</div>

</p>
