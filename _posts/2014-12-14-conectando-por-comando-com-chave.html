---
layout: post
title: Conectando por comando com chave WPA/WPA2 a Wireless
date: '2014-12-14T09:12:00.002-08:00'
author: Marcos Oliveira
tags:
- Debian
- Linux
- Redes
modified_time: '2014-12-14T09:12:59.292-08:00'
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-4366284281068248445
blogger_orig_url: http://www.terminalroot.com.br/2014/12/conectando-por-comando-com-chave.html
---

<b>Bem, no outro post<span style="color: blue;"> </span><a href="http://marcospinguim.blogspot.com/2011/11/conectando-em-redes-wireless-no-linux.html" style="color: blue;" target="_blank">Conectando em Redes Wireless no Linux por comando</a> mostrei como conectar por comando em chave WEP que é bem simples, nesse post aqui vou explicar para chaves <span style="color: blue;">WAP ou WAP2</span>, vamos utilizar a mesma lógica porém um pouco menos fácil.Primeiramente precisamos nos certificar que o roteador está configurado corretamente:</b><br /><br /><blockquote><b>Region:Brazil<br />Channel:Automatic(que no caso conectou no Canal 1)<br />Rate:54Mbps(802.11g)<br />Security Type:WPA-PSK/WPA2-PSK<br />Security Option:WPA2-PSK<br />Encryption:Automatic(que pegou o TKIP).<br />PSK Passphrase:SUA_SENHA</b></blockquote><br /><b>e também que o pacote wpa_supplicant está instalado:</b><br />{% highlight bash %}# su<br /># apt-get install wpasupplicant{% endhighlight %}<br /><b>, caso sua distribuição tenha o sudo instalado, dê preferência em utilizar o root (# su).Então após listar as redes disponíveis com o "iwlist wlan0 scan" verifique o nome do ESSID da rede que deseja se conectar, certifique-se da senha e execute os comandos abaixo:</b><br />{% highlight bash %}# wpa_passphrase NOME SENHA &gt; /etc/wpa_supplicant/wpa_supplicant.conf<br /># wpa_supplicant -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant.conf -B -D wext{% endhighlight %}<br /><br /><b>Configure sua placa wireless inicialmente com um IP somente para setar a rede.</b><br />{% highlight bash %}# ifconfig wlan0 down<br /># ifconfig wlan0 192.168.1.107 netmask 255.255.255.0 up{% endhighlight %}<br /><br /><b>Como o DNS em conexões pppOe está setado no local da autenticação, basta direcionar seu DNS local pra lá, no caso o Gateway(se sua autenticação estiver sendo em sua máquina, verifique com o seu PROVEDOR quais os dados de DNS), em alguns casos pode até pular esta parte:</b><br />{% highlight bash %}# echo nameserver 192.168.1.1{% endhighlight %}<br /><br /><b>Defina o Gateway, que no caso será o mesmo:</b><br />{% highlight bash %}# route add default gw 192.168.1.1 dev wlan0{% endhighlight %}<br /><br /><b>Para tornar inicializável, edite o arquivo "/etc/network/interfaces", com o código abaixo:</b><br />{% highlight bash %}auto lo<br />iface lo inet loopback<br /><br />auto wlan0<br />iface wlan0 inet dhcp<br />wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf{% endhighlight %}<br /><br /><b>Verifique que informamos acima que pegará o IP via DHCP(automaticamente), caso não seja seu caso, verifique o post <a href="http://marcospinguim.blogspot.com/2011/11/conectando-em-redes-wireless-no-linux.html" style="color: blue;" target="_blank">Conectando em Redes Wireless no Linux por comando</a> como configurar como static(Estático), porém considerando que seu Roteador está como DHCP, finalize com o comando abaixo:</b><br />{% highlight bash %}# dhclient wlan0{% endhighlight %}<br /><br /><b>Verifique agora se restabeleceu a conexão, em alguns casos ainda é preciso reiniciar o serviço de rede, para isso, rode esse comando:</b><br />{% highlight bash %}# /etc/init.d/networking restart{% endhighlight %}<br /><br /><div style="color: blue;"><b>Caso você não deseje usar comando e sim um aplicativo gráfico que voçê pode sair clicando e ele fazer tudo, instale o WICD ou o Network Manager:</b></div>{% highlight bash %}# apt-get install wicd<br /># apt-get install network-manager{% endhighlight %}<br /><br /><b>Prontinho, com isso você deverá conectar!Abraços e até a próxima onde explicarei como quebrar as chaves WEP e WPA/WPA2, e depois como criar uma antena USB para alta conectividade com ferramentas caseiras!</b>