---
layout: post
title: Conectando por comando com chave WPA/WPA2 a Wireless
date: '2014-12-14T09:12:00.002-08:00'
author: Marcos Oliveira
tags:
- Debian
- Linux
- Redes
modified_time: '2014-12-14T09:12:59.292-08:00'
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-4366284281068248445
blogger_orig_url: http://www.terminalroot.com.br/2014/12/conectando-por-comando-com-chave.html
---

<p>
<b>Bem, no outro post<span style="color: blue;"> </span><a href="http://marcospinguim.blogspot.com/2011/11/conectando-em-redes-wireless-no-linux.html" style="color: blue;" target="_blank">Conectando em Redes Wireless no Linux por comando</a> mostrei como conectar por comando em chave WEP que é bem simples, nesse post aqui vou explicar para chaves <span style="color: blue;">WAP ou WAP2</span>, vamos utilizar a mesma lógica porém um pouco menos fácil.Primeiramente precisamos nos certificar que o roteador está configurado corretamente:</b></p><p></p><p><blockquote><b>Region:Brazil</p><p>Channel:Automatic(que no caso conectou no Canal 1)</p><p>Rate:54Mbps(802.11g)</p><p>Security Type:WPA-PSK/WPA2-PSK</p><p>Security Option:WPA2-PSK</p><p>Encryption:Automatic(que pegou o TKIP).</p><p>PSK Passphrase:SUA_SENHA</b></blockquote></p><p><b>e também que o pacote wpa_supplicant está instalado:</b></p><p>{% highlight bash %}# su</p><p># apt-get install wpasupplicant{% endhighlight %}</p><p><b>, caso sua distribuição tenha o sudo instalado, dê preferência em utilizar o root (# su).Então após listar as redes disponíveis com o "iwlist wlan0 scan" verifique o nome do ESSID da rede que deseja se conectar, certifique-se da senha e execute os comandos abaixo:</b></p><p>{% highlight bash %}# wpa_passphrase NOME SENHA &gt; /etc/wpa_supplicant/wpa_supplicant.conf</p><p># wpa_supplicant -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant.conf -B -D wext{% endhighlight %}</p><p></p><p><b>Configure sua placa wireless inicialmente com um IP somente para setar a rede.</b></p><p>{% highlight bash %}# ifconfig wlan0 down</p><p># ifconfig wlan0 192.168.1.107 netmask 255.255.255.0 up{% endhighlight %}</p><p></p><p><b>Como o DNS em conexões pppOe está setado no local da autenticação, basta direcionar seu DNS local pra lá, no caso o Gateway(se sua autenticação estiver sendo em sua máquina, verifique com o seu PROVEDOR quais os dados de DNS), em alguns casos pode até pular esta parte:</b></p><p>{% highlight bash %}# echo nameserver 192.168.1.1{% endhighlight %}</p><p></p><p><b>Defina o Gateway, que no caso será o mesmo:</b></p><p>{% highlight bash %}# route add default gw 192.168.1.1 dev wlan0{% endhighlight %}</p><p></p><p><b>Para tornar inicializável, edite o arquivo "/etc/network/interfaces", com o código abaixo:</b></p><p>{% highlight bash %}auto lo</p><p>iface lo inet loopback</p><p></p><p>auto wlan0</p><p>iface wlan0 inet dhcp</p><p>wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf{% endhighlight %}</p><p></p><p><b>Verifique que informamos acima que pegará o IP via DHCP(automaticamente), caso não seja seu caso, verifique o post <a href="http://marcospinguim.blogspot.com/2011/11/conectando-em-redes-wireless-no-linux.html" style="color: blue;" target="_blank">Conectando em Redes Wireless no Linux por comando</a> como configurar como static(Estático), porém considerando que seu Roteador está como DHCP, finalize com o comando abaixo:</b></p><p>{% highlight bash %}# dhclient wlan0{% endhighlight %}</p><p></p><p><b>Verifique agora se restabeleceu a conexão, em alguns casos ainda é preciso reiniciar o serviço de rede, para isso, rode esse comando:</b></p><p>{% highlight bash %}# /etc/init.d/networking restart{% endhighlight %}</p><p></p><p><div style="color: blue;"><b>Caso você não deseje usar comando e sim um aplicativo gráfico que voçê pode sair clicando e ele fazer tudo, instale o WICD ou o Network Manager:</b></div>{% highlight bash %}# apt-get install wicd</p><p># apt-get install network-manager{% endhighlight %}</p><p></p><p><b>Prontinho, com isso você deverá conectar!Abraços e até a próxima onde explicarei como quebrar as chaves WEP e WPA/WPA2, e depois como criar uma antena USB para alta conectividade com ferramentas caseiras!</b>

</p>
