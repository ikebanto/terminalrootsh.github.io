---
layout: post
title: 'Iniciando com Zend Framework 2: Skeleton e ZfcUser'
date: '2013-05-25T17:48:00.000-07:00'
author: The Bang Bash
tags:
- MVC
modified_time: '2013-06-22T06:46:44.215-07:00'
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-5892746056090235523
blogger_orig_url: http://www.terminalroot.com.br/2013/05/iniciando-com-zend-framework-2-skeleton.html
---

<!-------------------------------------------------><br /><br /><script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------><br /><br /><br /><blockquote class="tr_bq"><span style="font-size: x-small;"><i>Tutorial adaptado do original escrito por EvanDotPro:&nbsp;<a href="http://blog.evan.pro/getting-started-with-the-zf2-skeleton-and-zfcuser">http://blog.evan.pro/getting-started-with-the-zf2-skeleton-and-zfcuser</a></i></span><br /><span style="font-size: x-small;">Este é um tutorial feito para ser curto e fácil de seguir para lhe  ajudar a começar com o Zend Framework 2.0 e um dos seus módulos mais  comuns, o&nbsp;<a href="https://github.com/ZF-Commons/ZfcUser">ZfcUser</a>. Ao final deste tutorial você terá uma aplicação básica no ZF2 com registro de usuário e autenticação.</span></blockquote><h2><span style="font-size: large;">Pré-requisitos</span></h2><i><b>Para este tutorial presumo que você tenha instalado:</b></i><br /><ul><li><i><b>PHP 5.3.3+ (com pdo-sqlite ou pdo-mysql)</b></i></li><li><i><b>Um web server e conhecimentos de como configurar um virtual host</b></i></li><li><i><b>Git (ou pelo menos a capacidade de acessar o Github e baixar o zip  do projeto, o que vai te obrigar a baixar o framework de outro source e  colocar no diretório apropriado)</b></i></li></ul><div><i><b><span style="font-size: small;"><span style="line-height: 24px;">(De  qualquer forma, posso dar uma mão pra galera que estiver com  dificuldades em alguma dessas partes. Basta postar nos comentários!)</span></span></b></i></div><i><b>Se você tiver o PHP 5.4+, tecnicamente nem precisará de um web server  pra testar o Zend Framework 2, uma vez que você pode simplesmente  utilizar o novo servidor para desenvolvimento embutido no PHP.</b></i><br /><h3>Um comentário sobre o composer</h3><i><b>Enquanto o composer é uma maneira suportada de configurar o skeleton,  eu prefiro simplesmente utilizar o git para esse tutorial. Na minha  opinião isso torna as coisas mais simples e fáceis de debugar caso  alguém tenha problemas em seguir o tutorial.</b></i><br /><h2>Passo 1: Obtendo o Skeleton</h2><b>O primeiro passo é clonar o&nbsp;<a href="https://github.com/zendframework/ZendSkeletonApplication">skeleton application</a>:</b><br />{% highlight bash %}$ git clone --recursive https://github.com/zendframework/ZendSkeletonApplication.git{% endhighlight %}<b>Depois, configure um vhost apontando para o diretório público da sua  novo skeleton clonado. Neste ponto você já deve ser capaz de acessar  http://seuvhost/ no seu navegador e ver o seguinte:</b><br /><img alt="" src="http://www.phpit.com.br/wp-content/uploads/2012/08/tut_01_01.png" height="217" width="400" /><br /><b>Se você estiver utilizando o PHP 5.4 e quiser utilizar o servidor embutido, simplesmente abra um novo terminal,&nbsp; cd  para o diretório&nbsp;<i>public </i>e execute:</b><br /><b>{% highlight bash %}$ php -S 8000{% endhighlight %}Com isso rodando você deverá ser capaz de acessar&nbsp;http://localhost:8000/ e visualizar a aplicação.</b><br /><h2>Passo 2: Configurando uma conexão com o banco de dados</h2><b>Para o ZfcUser iremos necessitar de um banco de dados para guardar os  usuários. Neste tutorial irei cobrir o MySQL e o SQLite, mas com o  ZfcUser e o Zend\Db suportam muitos outros SGBDs.</b><br /><b>Crie um novo arquivo&nbsp;{% highlight bash %}./config/autoload/database.local.php{% endhighlight %}&nbsp;e preencha-o com o seguinte:</b><br /><b>Para o MySQL:</b><br />{% highlight bash %}&lt;?php<br />return array(<br />&nbsp;&nbsp;&nbsp; 'service_manager' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'factories' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'Zend\Db\Adapter\Adapter' =&gt; 'Zend\Db\Adapter\AdapterServiceFactory',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp; 'db' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'driver'&nbsp;&nbsp;&nbsp; =&gt; 'pdo',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'dsn'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; 'mysql:dbname=CHANGEME;host=localhost',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'username'&nbsp; =&gt; 'CHANGEME',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'password'&nbsp; =&gt; 'CHANGEME',<br />&nbsp;&nbsp;&nbsp; ),<br />);{% endhighlight %}<b>Ou para o SQLite</b>:<br />{% highlight bash %}&lt;?php<br />return array(<br />&nbsp;&nbsp;&nbsp; 'service_manager' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'factories' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'Zend\Db\Adapter\Adapter' =&gt; 'Zend\Db\Adapter\AdapterServiceFactory',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp; 'db' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'driver'&nbsp;&nbsp; =&gt; 'pdo',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'dsn'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; 'sqlite:' . getcwd() . '/data/users.db',<br />&nbsp;&nbsp;&nbsp; )<br />);{% endhighlight %}<br /><h2>Passo 3: Instalando o ZfcUser</h2><b>Agora vamos instalar o ZfcUser.&nbsp;Primeiro&nbsp;cd &nbsp;para o diretório <i>vendor</i>&nbsp;e execute os seguintes comandos:</b><br /><b>{% highlight bash %}$ git clone https://github.com/ZF-Commons/ZfcUser.git<br />$ git clone https://github.com/ZF-Commons/ZfcBase.git{% endhighlight %}Nota:&nbsp;ZfcBase é apenas uma dependência do ZfcUser – contém algumas classes básicas que são úteis para diversos módulos.</b><br /><b>Agora habilite os módulos editando&nbsp;{% highlight bash %}./config/application.config.php{% endhighlight %}&nbsp;e adicionando-os à array demodules:</b><br />{% highlight bash %}&lt;?php<br />return array(<br />&nbsp;&nbsp;&nbsp; 'modules' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'Application',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'ZfcBase',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'ZfcUser',<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp; 'module_listener_options' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'config_glob_paths'&nbsp;&nbsp;&nbsp; =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'config/autoload/{,*.}{global,local}.php',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'module_paths' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; './module',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; './vendor',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp; ),<br />);{% endhighlight %}<b>Agora precisamos importar o schema do banco do ZfcUser. Se estiver  usando o SQLite será necessário apenas uma linha de comando que deverá  ser executada na raíz do projeto:</b><br /><b>{% highlight bash %}$ cat vendor/ZfcUser/data/schema.sqlite.sql | sqlite3 data/users.db{% endhighlight %}(Se alguém souber como se faz isso no Windows, por favor poste nos comentários!)</b><br /><b>Se estiver usando MySQL importe o arquivo&nbsp;{% highlight bash %}./vendor/ZfcUser/data/schema.sql{% endhighlight %}&nbsp;para o seu banco que configuramos antes.</b><br /><b>Deve ser o suficiente! Tente acessar http://seuvhost/user e você será recebido com a tela de login:</b><br /><img alt="" src="http://www.phpit.com.br/wp-content/uploads/2012/08/tut_01_02.png" height="210" width="400" /><br /><b>Agora você já tem uma aplicação básica rodando com o Zend Framework 2 com suporte a registro e autenticação!</b><br /><h2>Recursos</h2><ul><li><span style="font-size: x-small;"><b><a href="https://github.com/ZF-Commons/ZfcUser/wiki">ZfcUser Wiki</a>&nbsp;(inglês)</b></span></li><span style="font-size: x-small;"><b></b></span><li><span style="font-size: x-small;"><b><a href="https://github.com/ZF-Commons/RFC/wiki/RFC:-ZfcUser">ZF-Commons ZfcUser RFC</a>&nbsp;(inglês)</b></span></li><span style="font-size: x-small;"><b></b></span></ul><span style="font-size: x-small;"><b>Aproveite para dar uma conferida em algumas extensões para o módulo ZfcUser que já existem:</b></span><br /><ul><span style="font-size: x-small;"><b></b></span><li><span style="font-size: x-small;"><b><a href="https://github.com/bjyoungblood/BjyAuthorize">BjyAuthorize</a>&nbsp;– Adiciona suporte a ACL utilizando Zend\Acl.</b></span></li><span style="font-size: x-small;"><b></b></span><li><span style="font-size: x-small;"><b><a href="https://github.com/cdli/CdliTwoStageSignup">CdliTwoStageSignup</a>&nbsp;– Adiciona uma etapa de verificação de e-mail ao processo de registro.</b></span></li><span style="font-size: x-small;"><b></b></span><li><span style="font-size: x-small;"><b><a href="https://github.com/cdli/CdliUserProfile">CdliUserProfile</a>&nbsp;– Um sistema de perfil de usuário.</b></span></li><span style="font-size: x-small;"><b></b></span><li><span style="font-size: x-small;"><b><a href="https://github.com/cdli/CdliAutogenUsername">CdliAutogenUsername</a>&nbsp;– Permite a utilização de nomes de usuário gerados automaticamente depois do registro.</b></span></li><span style="font-size: x-small;"><b></b></span><li><span style="font-size: x-small;"><b><a href="https://github.com/SocalNick/ScnSocialAuth">ScnSocialAuth</a>&nbsp;– Adiciona autenticação através de redes sociais ao ZfcUser para sites como Google, Facebook, Twitter, Yahoo!, etc.</b></span></li><span style="font-size: x-small;"><b></b></span><li><span style="font-size: x-small;"><b><a href="https://github.com/EvanDotPro/EdpGithub">EdpGithub</a>&nbsp;– Adicionada autenticação do Github ao ZfcUser.</b></span></li></ul><hr /><span style="font-size: x-small;"><i><b>Se você estiver se perguntando “e agora?”, tire alguns minutos para ler o&nbsp;<a href="http://akrabat.com/zend-framework-2-tutorial/">excelente tutorial de ZF2 do Rob Allen</a>&nbsp;que explica a criar uma aplicação básica do zero e/ou&nbsp;venha conversar conosco no&nbsp;<a href="http://webchat.freenode.net/?channels=zftalk.2">#zftalk.2 @ Freenode</a>&nbsp;se tiver dúvidas.</b></i></span><br /><span style="font-size: x-small;"><i><b>Um abraço a todos e fiquem com Deus! </b></i></span><br /><br /><b>Originalmente publicado em: <span style="color: blue;">http://www.phpit.com.br</span></b>