---
layout: post
title: 'Curso Certificação Linux LPI-102: Gerenciador de Pacotes YUM e pacotes RPM'
date: '2013-04-16T17:46:00.000-07:00'
author: The Bang Bash
tags:
- Linux
- LPI
modified_time: '2013-05-03T07:16:03.496-07:00'
thumbnail: http://1.bp.blogspot.com/-m1yosdgEFVA/UW3uvC8t4cI/AAAAAAAABdY/IKqH-ZP1JyA/s72-c/tu-fedora.png
blogger_id: tag:blogger.com,1999:blog-2422865715758349944.post-7720296168517388220
blogger_orig_url: http://www.terminalroot.com.br/2013/04/curso-certificacao-linux-lpi-102_16.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-m1yosdgEFVA/UW3uvC8t4cI/AAAAAAAABdY/IKqH-ZP1JyA/s1600/tu-fedora.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="200" src="http://1.bp.blogspot.com/-m1yosdgEFVA/UW3uvC8t4cI/AAAAAAAABdY/IKqH-ZP1JyA/s200/tu-fedora.png" width="200" /></a></div><!-------------------------------------------------> <script type="text/javascript"><!-- google_ad_client = "ca-pub-5528601613414387"; google_ad_host = "pub-1556223355139109"; /* quadrados */ google_ad_slot = "9713010559"; google_ad_width = 200; google_ad_height = 200; </script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script><!-----------------------------------------------><br /><br /><b><span style="font-size: large;">1.0 - Gerenciador de Pacotes YUM</span></b><br /><blockquote class="tr_bq"><b>O gerenciador de pacotes YUM é o gerenciador de pacote padrão do Red Hat, Fedora, CentOS e derivados.Antes criado e utilizado no Yellow Dog Linux que é uma distribuicao baseada em Red Hat e que so funciona em maquinas com o processador PowerPC ou derivados como o Cell.</b></blockquote><b><br />Os arquivos de configuracao do YUM se encontram no diretorio <i>/etc/yum/</i> e os repositorios se encontram no diretorio <i>/etc/yum.repos.d</i> que é muito similar ao /etc/apt/sources.list.d do Debian. Pois seria possivel a centralizacao de tudo tb no /etc/yum/yum.conf.<br /><br />As instruções aqui são baseadas na distribuição Fedora.<br /><br /><br />O arquivo de configuração do yum é o <i>/etc/yum.conf</i>. Além disso, os <br />repositórios (sites que contém os pacotes dos programas) são <br />configurados através de cada arquivo de extensão .repo, localizados no <br />diretório <i>/etc/yum.repos.d.</i><br /><br /><br />A configuração padrão do yum contida no <i>/etc/yum.conf </i>é suficiente <br />para o bom funcionamento do programa. Você só precisará de alguns <br />repositórios já configurados. Por exemplo, o padrão para o repositório <br />do Fedora é o arquivo <i>/etc/yum.repos.d/fedora.repo</i>:<br /><br /><br />{% highlight bash %}[fedora]<br />name=Fedora $releasever - $basearch<br />baseurl=http://fedora.c3sl.ufpr.br/linux/releases/$releasever/Everything/$basearch/os/<br />enabled=1<br />gpgcheck=1<br />gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora file:///etc/pki/rpm-gpg/RPM-GPG-KEY{% endhighlight %}<br />As linhas acima significam que o repositório denominado fedora terá:<br /></b><br /><ol><b><br /><li><span style="background-color: blue;"><span style="color: white;"><u><i>name: Nome descritivo, no exemplo: Fedora (versão da distribuição) – (arquitetura da distribuição, ex. i386);</i></u></span></span></li><span style="background-color: blue;"><span style="color: white;"><u><i><br /></i></u></span></span><li><span style="background-color: blue;"><span style="color: white;"><i>baseurl: O endereço que contém a lista dos programas e os pacotes;</i></span></span></li><span style="background-color: blue;"><span style="color: white;"><u><i><br /></i></u></span></span><li><span style="background-color: blue;"><span style="color: white;"><i>enabled: Se o repositório está habilitado ou não (1 significa sim, 0 significa não);</i></span></span></li><span style="background-color: blue;"><span style="color: white;"><u><i><br /></i></u></span></span><li><span style="background-color: blue;"><span style="color: white;"><i>gpgcheck: Se todos os pacotes devem ter sua autenticidade verificada</i><br /><i>&nbsp;(extremamente recomendado, 1 significa sim, 0 significa não);</i></span></span></li><span style="background-color: blue;"><span style="color: white;"><u><i><br /></i></u></span></span><li><span style="background-color: blue;"><span style="color: white;"><i>gpgkey: Qual chave criptográfica utilizar para a verificação dos pacotes.</i></span></span></li></b></ol><b><br />Com este repositório configurado, pode-se instalar e remover todos os<br />&nbsp;pacotes básicos da distribuição. No caso das atualizações de pacotes, o<br />&nbsp;repositório é outro e pode ser configurado no arquivo <br />/etc/yum.repos.d/fedora-updates.repo:<br /><br /><br />{% highlight bash %}[updates]<br />name=Fedora $releasever - $basearch – Updates<br />baseurl=http://fedora.c3sl.ufpr.br/linux/updates/$releasever/$basearch/<br />enabled=1<br />gpgcheck=1<br />gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora{% endhighlight %}<br />Há varios outros repositórios de terceiros disponíveis (como o livna,<br />&nbsp;dag, freshrpms, atrpms) que contém outros programas que podem não estar<br />&nbsp;na lista principal por diversos motivos. Cada um desses repositórios <br />têm configurações próprias e por isso criam arquivos .repo dentro do <br />diretório /etc/yum.repos.d. Aqui não iremos listar todos os repositórios<br />&nbsp;e sim apenas os oficiais.<br /><br /><br />Uma vez configurados os repositórios desejados, é hora de utilizar o yum.<br /><br />Para procurar por um pacote usando alguma palavra relacionada, <br />utilizamos o parâmetro search. Por exemplo, procurar todos os pacotes <br />relacionados com a palavra ‘DVD’:<br /><br /><br />{% highlight bash %}# yum search DVD{% endhighlight %}<br />Para instalar um pacote:<br /><br /><br />{% highlight bash %}# yum install pacote{% endhighlight %}<br />Para desinstalar o pacote:<br /><br /><br />{% highlight bash %}# yum remove pacote{% endhighlight %}<br />Atualizando um pacote específico, caso exista uma atualização para o mesmo:<br /><br /><br />{% highlight bash %}# yum update pacote{% endhighlight %}<br />Ou se precisarmos atualizar todo o sistema, instalando todos os pacotes novos que tenham atualizações disponíveis:<br /><br /><br />{% highlight bash %}# yum update{% endhighlight %}<br />Para verificar quais os pacotes que precisam de atualização:<br /><br /><br />{% highlight bash %}# yum check-update{% endhighlight %}<br />Listando todos os pacotes disponíveis, tanto no repositório quanto os já instalados:<br /><br /><br />{% highlight bash %}# yum list{% endhighlight %}<br />Listando todos os pacotes disponíveis para a instalação:<br /><br /><br />{% highlight bash %}# yum list available{% endhighlight %}<br />Existem também os grupos de pacotes. Um grupo de pacotes é um <br />conjunto de pacotes necessários para se instalar alguma funcionalidade <br />no sistema e são definidos pelos desenvolvedores da distribuição. Para <br />listar todos os grupos de pacotes:<br /><br /><br />{% highlight bash %}# yum grouplist<br /><br />Installed Groups:<br />&nbsp;&nbsp; Office/Productivity<br />&nbsp;&nbsp; MySQL Database<br />&nbsp;&nbsp; Editors<br />&nbsp;&nbsp; System Tools<br />...corte...<br />Available Groups:<br />&nbsp;&nbsp; Engineering and Scientific<br />&nbsp;&nbsp; Window Managers<br />&nbsp;&nbsp; GNOME Software Development<br />&nbsp;&nbsp; XFCE Software Development<br />&nbsp;&nbsp; XFCE<br />...corte...{% endhighlight %}<br />Como podemos ver, o yum mostra os grupos já instalados no sistema <br />(Installed Groups) e os disponíveis para a instalação (Available <br />Groups). Se quisermos, por exemplo, instalar o suporte ao gerenciador de<br />&nbsp;janelas XFCE, instalamos seu grupo:<br /><br /><br />{% highlight bash %}# yum groupinstall "XFCE"{% endhighlight %}<br />O yum se encarregará de baixar todos os pacotes necessários para o XFCE. Para remover todos os pacotes do grupo:<br /><br /><br />{% highlight bash %}# yum groupremove "XFCE"{% endhighlight %}<br />Todas estas ações do yum necessitam de uma conexão de Internet, pois a<br />&nbsp;lista de pacotes é sempre requisitada no repositório para consulta. <br />Mesmo para consultar um simples nome de pacote, precisa-se de conexão <br />com a Internet.<br /><br /><br />Caso já tenha se utilizado o yum para fazer alguma ação (e por <br />consequência, ele já tenha baixado a lista de pacotes para o seu <br />sistema), podemos optar por não precisar nos conectar ao servidor na <br />Internet toda vez que usarmos o yum utilizando o parâmetro -C. Exemplos:<br /><br /><br />{% highlight bash %}# yum -C search DVD<br /># yum -C check-update<br /># yum -C list | grep kde{% endhighlight %}<br /><br />Na instalacao do fedora é possivel instalar o apt e no Debian e Ubuntu vc tb pode instalar o yum pelo apt-get para estudos.<br /><br /><span style="font-size: large;">2.0 - Pacotes RPM e Sistema de Gerenciamento de Pacotes RPM</span></b><br /><blockquote class="tr_bq"><b>RPM (Red Hat Package Manager) é um sistema de gerenciamento de pacotes desenvolvido pela Red Hat para ser utilizado em sua própria distro. Posteriormente outras distros Linux, e mesmo alguns outros sistemas operacionais, também adotaram o formato RPM para gerenciamento de seus pacotes. A LSB (Linux Standard Base) indicou o formato RPM como o padrão para distros Linux.</b></blockquote><b><i><br />Outro utilitário para gerenciamento de pacotes RPM em modo texto é o Yum (Yellow Dog Updater, Modified), disponível nas distros Red Hat Enterprise Linux, CentOS, Oracle Entreprise Linux e Fedora.</i><br /><br /><u>Com o Yum, é possível realizar instalações e atualizações de pacotes localmente ou a partir de repositórios de pacotes localizados na internet. Sua grande vantagem em relação ao utilitário RPM é tentar resolver automaticamente todas as dependências requeridas por pacotes que estiverem sendo instalados ou atualizados e também por proporcionar uma forma fácil de atualizar todo o sistema pela Internet.</u><br /><br />Os três principais formatos de pacotes utilizados em sistemas Linux são:</b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; RPM: utilizado pela distro Red Hat Enterprise Linux (RHEL) e por distros derivadas como CentOS, Oracle Enterprise Linux, Fedora e SuSE.</b><br /><b>&nbsp;&nbsp;&nbsp; DEB: utilizado pela distro Debian e por distros derivadas como Ubuntu.</b><br /><b>&nbsp;&nbsp;&nbsp; TGZ: utilizado pela distro Slackware e por distros derivadas como Vector Linux.</b></blockquote><b><br />Além destes formatos, há também outros. No entanto, não vou me prolongar a respeito deles para não perder o foco do artigo e também para não deixá-lo extenso.<br /><br />O rótulo (nomenclatura) típico de um pacote RPM é nome-versao-release.arquitetura.rpm, onde:</b><br /><ul><li><b>&nbsp;&nbsp;&nbsp; Nome: é o nome do software que está sendo distribuído.</b></li><li><b>&nbsp;&nbsp;&nbsp; Versão: é a versão do software.</b></li><li><b>&nbsp;&nbsp;&nbsp; Release: é o versão de construção do pacote para a mesma versão do software.</b></li></ul><b>&nbsp;&nbsp;&nbsp; Arquitetura: é a plataforma para a qual o software foi desenvolvido. Noarch significa que o software não foi desenvolvido para uma plataforma específica, podendo ser utilizado em qualquer uma. Src significa que o pacote contém os arquivos-fonte do software.<br />&nbsp;&nbsp;&nbsp; <u><i>.rpm: é a extensão do nome do arquivo de pacote RPM.</i></u><br /><br />Exemplo: oracle-xe-univ-10.2.0.1-1.0.i386.rpm, sqldeveloper-3.0.04.34-1.noarch.rpm<br />Instalação<br /><br />Para instalar pacotes RPM em sistemas Linux, é necessário estar logado como root (su). Note que o sistema de gerenciamento de pacotes RPM não resolve as dependências automaticamente para você.<br /><br />Portanto, as dependências necessárias deverão ser instaladas antes da instalação do pacote que as requer. Uma outra forma de resolver isso é executar a instalação utilizando o utilitário Yum em distros RHEL e derivadas ou o equivalente em outras distros.<br /><br />Instalações locais:<br /><br />Para instalar um pacote localizado localmente, execute o comando {% highlight bash %}# rpm -ivh &lt;pacote&gt;{% endhighlight %}, onde:</b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; -i: é o modo de instalação.</b><br /><b>&nbsp;&nbsp;&nbsp; -v: (opcional) apresenta mensagens detalhadas de saída para o processo de instalação.</b><br /><b>&nbsp;&nbsp;&nbsp; -h: (opcional) exibe cerquilhas (#) à medida em que o processo de instalação avança.</b><br /><b>&nbsp;&nbsp;&nbsp; &lt;pacote&gt;: é o nome do arquivo do pacote RPM a ser instalado no sistema; pode ser mais de um ao mesmo tempo, neste caso, separe-os com espaços.</b></blockquote><b><br />Exemplo: # rpm -ivh AdobeReader_ptb-8.1.7-1.i486.rpm<br /><br />É possível testar a instalação de um pacote antes de instalá-lo no sistema # rpm -ivh –test &lt;pacote&gt;, onde:<br /><br />&nbsp;&nbsp;&nbsp; –test: esta opção testa o processo de instalação do pacote e, caso haja algum problema, notifica a respeito.<br /><br />Exemplo: {% highlight bash %}# rpm -ivh –test AdobeReader_ptb-8.1.7-1.i486.rpm{% endhighlight %}<br /><br /><i>Instalações com o utilitário Yum:</i><br /><br />A forma típica do comando Yum para instalações é {% highlight bash %}# yum -y install –nogpgcheck &lt;pacote&gt;{% endhighlight %}, onde:</b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; -y: (opcional) resposta automática positiva para a confirmação do processo de instalação.</b><br /><b>&nbsp;&nbsp;&nbsp; install: é a opção de instalação do Yum.</b><br /><b>&nbsp;&nbsp;&nbsp; –nogpgcheck: (opcional) instrui o Yum a não verificar a assinatura do pacote.</b><br /><b>&nbsp;&nbsp;&nbsp; &lt;pacote&gt;: é o nome do pacote RPM disponível localmente ou na Internet em repositórios do Yum.</b></blockquote><b><br />Exemplo:<br />{% highlight bash %}<br />&nbsp;&nbsp;&nbsp; # yum -y install –nogpgcheck AdobeReader_ptb-8.1.7-1.i486.rpm<br />&nbsp;&nbsp;&nbsp; # yum -y install gparted{% endhighlight %}<br />Observação: No exemplo 1, acima, o pacote está disponível localmente. Em 2, o pacote está localizado em um repositório utilizado pelo Yum, isto é, na Internet. Em ambos os casos, o Yum tenta resolver quaisquer dependências, baixando-as e instalando-as automaticamente.<br />Atualização<br /><br />Para atualizar pacotes RPM instalados em sistemas Linux, é necessário estar logado como root (su). Lembre-se de que o sistema de gerenciamento de pacotes RPM não resolve quaisquer dependências requeridas automaticamente.<br /><br />Caso haja dependências requeridas pelo pacote a ser atualizado que não estejam instaladas no sistema, será necessário baixá-las e instalá-las antes de atualizar o pacote.<br /><br />Outra forma de resolver isso é executar a atualização utilizando o utilitário Yum em distros RHEL e derivadas ou o equivalente em outras distros.<br /><br />Atualizações locais: <br /><br />Para atualizar um pacote localizado localmente, execute o comando {% highlight bash %}# rpm -Uvh &lt;pacote&gt;{% endhighlight %}, onde:</b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; -U: é o modo de atualização.</b><br /><b>&nbsp;&nbsp;&nbsp; -v: (opcional) apresenta mensagens detalhadas de saída para o processo de atualização.</b><br /><b>&nbsp;&nbsp;&nbsp; -h: (opcional) apresenta cerquilhas (#) à medida em que o processo de atualização avança.</b><br /><b>&nbsp;&nbsp;&nbsp; &lt;pacote&gt;: é o nome do arquivo do pacote RPM a ser atualizado no sistema. Pode ser mais de um ao mesmo tempo, neste caso, separe-os com espaços.</b></blockquote><b><br />Exemplo: {% highlight bash %}# rpm -Uvh flash-plugin-10.2.153.1-release.i386.rpm{% endhighlight %}<br /><br />Observação: Caso o pacote em atualização não estiver instalado no sistema, ele será automaticamente instalado com este comando.<br /><br />Também é possível testar a atualização de um pacote antes de atualizá-lo no sistema {% highlight bash %}# rpm -Uvh –test &lt;pacote&gt;{% endhighlight %}, onde:<br /><br />&nbsp;&nbsp;&nbsp; –test: esta opção testa o processo de atualização do pacote e, caso haja algum problema, notifica a respeito.<br /><br />Exemplo: {% highlight bash %}# rpm -Uvh –test flash-plugin-10.2.153.1-release.i386.rpm{% endhighlight %}<br /><br />Atualizações com o utilitário Yum:<br /><br />O processo de atualização com o Yum é muito útil, pois, com ele, é possível atualizar até mesmo todo o sistema de uma só vez. Neste caso, o processo poderá ser um pouco demorado, dependendo da quantidade de pacotes a serem atualizados e da velocidade de sua conexão à Internet.<br /><br />&nbsp;&nbsp;&nbsp; Para atualizar pacotes, a forma típica do comando Yum é {% highlight bash %}# yum -y update [pacote]{% endhighlight %}<br /><br />Exemplo: {% highlight bash %}# yum -y update flash-plugin-10.2.153.1-release.i386.rpm{% endhighlight %}<br /><br />&nbsp;&nbsp;&nbsp; Para verificar se há atualizações disponíveis {% highlight bash %}# yum check-update [pacote]{% endhighlight %}<br /><br />Exemplo: {% highlight bash %}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# yum check-update flash-plugin-10.2.153.1-release.i386.rpm<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # yum check-update<br />&nbsp;&nbsp; &nbsp; {% endhighlight %}<br /><br />&nbsp;&nbsp;&nbsp; Para atualizar todo o sistema Linux {% highlight bash %}# yum -y update{% endhighlight %}<br /><br />Nas formas do comando Yum apresentadas acima, o nome do pacote a ser atualizado é opcional. É possível informar vários nomes de pacotes a serem atualizados em em único comando, basta separá-los com espaços.<br /><br />Quando não for informado nenhum nome de pacote, o Yum processará todos os pacotes instalados em seu sistema Linux. O -y é opcional e serve como resposta positiva automática para as questões formuladas pelo Yum.<br />Downgrade<br /><br />Downgrade significa baixar a versão de um dado pacote instalado em um sistema Linux, isto é, atualizar para uma versão mais antiga do pacote. A principal razão para que isso seja feito é quando um determinado aplicativo ou sistema funcionava adequadamente com uma versão “X” de um determinado pacote e, após este pacote ter sido atualizado para uma versão “Y” superior, o mesmo aplicativo ou sistema passa a não funcionar bem com esta nova versão “Y” do pacote considerado.<br /><br />Neste caso, o administrador do sistema deverá fazer o downgrade deste pacote para a versão “X”. Para fazer donwgrade de um pacote instalado em um sistema Linux, é necessário estar logado como root (su).<br /><br />Downgrades locais:<br /><br />Para fazer o downgrade de um pacote localizado localmente, execute o comando # rpm -Uvh –oldpackage &lt;pacote&gt;, onde:</b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; -U: é o modo de atualização.</b><br /><b>&nbsp;&nbsp;&nbsp; -v: (opcional) apresenta mensagens detalhadas de saída para o processo de downdrade.</b><br /><b>&nbsp;&nbsp;&nbsp; -h: (opcional) exibe cerquilhas (#) à medida em que o processo de downgrade avança.</b><br /><b>&nbsp;&nbsp;&nbsp; –oldpackage: força o downgrade de pacotes.</b><br /><b>&nbsp;&nbsp;&nbsp; &lt;pacote&gt;: é o nome do pacote RPM da versão anterior, isto é, para o qual você está fazendo downgrade.</b></blockquote><b><br />Exemplo: {% highlight bash %}# rpm -Uvh –oldpackage flash-plugin-10.2.153.1-release.i386.rpm{% endhighlight %}<br /><br />É possível testar o downgrade de um pacote antes de atualizá-lo no sistema {% highlight bash %}# rpm -Uvh –oldpackage –test &lt;pacote&gt;{% endhighlight %}, onde:<br /><br />&nbsp;&nbsp;&nbsp; –test: esta opção testa o processo de downgrade do pacote e, caso haja algum problema, notifica a respeito.<br /><br />Downgrades com o utilitário Yum:<br /><br />Com o Yum você poderá fazer downgrade de pacotes a partir de repositórios do Yum localizados na Intenet. A forma do comando é {% highlight bash %}# yum -y downgrade &lt;pacote&gt;{% endhighlight %}.<br /><br />Exemplo: {% highlight bash %}# yum -y downgrade flash-plugin-10.2.153.1-release.i386.rpm{% endhighlight %}<br /><br />O -y é opcional e serve como resposta positiva automática ao Yum para conformar a execução do processo.<br /><br />Observação: Seja criterioso ao fazer downgrade de pacotes em seu sistema, pois o mesmo poderá apresentar comportamentos indesejados como, por exemplo, instabilidade e/ou vulnerabilidades.<br />Consultas<br /><br />Com o sistema de gerenciamento de pacotes RPM, é possível realizar diversas formas de consultas de informações sobre pacotes instalados ou não no sistema. Note que para consultas de pacotes, não é necessário estar logado como root (su). A seguir, as formas mais usuais de consultas.<br /><br />Consultas de informações de pacotes instalados no sistema:<br /><br />&nbsp;&nbsp;&nbsp; Para listar todos os pacotes instalados no sistema:<br />{% highlight bash %}<br />$ rpm -qa{% endhighlight %}<br />&nbsp;&nbsp;&nbsp; Para listar, em ordem alfabética ascendente, todos os pacotes instalados no sistema:<br />{% highlight bash %}<br />$ rpm -qa | sort{% endhighlight %}<br />&nbsp;&nbsp;&nbsp; Para obter a contagem dos pacotes instalados no sistema, sem listá-los:<br />{% highlight bash %}<br />$ rpm -qa | wc -l{% endhighlight %}<br />&nbsp;&nbsp;&nbsp; Para verificar se um pacote está instalado no sistema, informando uma parte do nome do pacote:<br />{% highlight bash %}<br />$ rpm -qa | grep -i &lt;substring&gt; {% endhighlight %}<br />Onde &lt;substring&gt; é uma parte do nome do pacote que você está consultando. Nesta forma de consulta, será ignorada a diferença entre maiúsculas e minúsculas.<br /><br />Exemplo: {% highlight bash %}$ rpm -qa | grep -i java{% endhighlight %}<br /><br />&nbsp;&nbsp;&nbsp; Para gerar um arquivo texto contendo a listagem, em ordem alfabética ascendente, de todos os pacotes instalados no sistema:<br />{% highlight bash %}<br />$ rpm -qa | sort &gt; &lt;nome_arquivo_txt&gt;{% endhighlight %}<br />Exemplo: {% highlight bash %}$ rpm -qa | sort &gt; ListPctsInstalados.txt{% endhighlight %}<br /><br />&nbsp;&nbsp;&nbsp; Para consultar informações sobre um pacote específico instalado no sistema:<br />{% highlight bash %}<br />$ rpm -qi &lt;pacote&gt;{% endhighlight %}<br />Exemplo: {% highlight bash %}$ rpm -qi java-1.6.0-openjdk-1.6.0.0-1.20.b17.el5{% endhighlight %}<br /><br />Observação: Note que o nome do pacote deverá ser digitado exatamente por completo, da mesma forma em que estiver registrado no banco de dados do RPM, levando-se em consideração maiúsculas e minúsculas.<br /><br />&nbsp;&nbsp;&nbsp; Para listar todos os arquivos de um pacote específico instalado no sistema:<br />{% highlight bash %}<br />$ rpm -ql &lt;pacote&gt;{% endhighlight %}<br />Exemplo: {% highlight bash %}$ rpm -ql java-1.6.0-openjdk-1.6.0.0-1.20.b17.el5{% endhighlight %}<br /><br />Consultas de informações de pacotes não instados no sistema:<br /><br />&nbsp;&nbsp;&nbsp; Para consultar informações sobre um pacote específico não instalado no sistema:<br />{% highlight bash %}<br />$ rpm -qpi &lt;pacote&gt;{% endhighlight %}<br />Exemplo: {% highlight bash %}$ rpm -qpi AdobeReader_ptb-8.1.7-1.i486.rpm{% endhighlight %}<br /><br />&nbsp;&nbsp;&nbsp; Para listar todos os arquivos de um pacote específico não instalado no sistema:<br />{% highlight bash %}<br />$ rpm -qpl &lt;pacote&gt;{% endhighlight %}<br />Exemplo: {% highlight bash %}$ rpm -qpl AdobeReader_ptb-8.1.7-1.i486.rpm{% endhighlight %}<br /><br />&nbsp;&nbsp;&nbsp; Para obter a contagem dos arquivos de um pacote específico não instalado no sistema, sem listar estes arquivos:<br />{% highlight bash %}<br />$ rpm -qpl &lt;pacote&gt; | wc -l{% endhighlight %}<br />Exemplo: {% highlight bash %}$ rpm -qpl AdobeReader_ptb-8.1.7-1.i486.rpm | wc -l{% endhighlight %}<br /><br />&nbsp;&nbsp;&nbsp; Para gerar um arquivo texto contendo a listagem, em ordem alfabética ascendente, dos arquivos de um pacote específico não instalados no sistema:<br />{% highlight bash %}<br />$ rpm -qpl &lt;pacote&gt; | sort &gt; &lt;nome_arquivo_txt&gt;{% endhighlight %}<br />Exemplo: {% highlight bash %}$ rpm -qpl AdobeReader_ptb-8.1.7-1.i486.rpm | sort &gt; ListArqsPct.txt{% endhighlight %}<br />Desinstalação<br /><br />Para executar a desinstalação de pacotes RPM em sistemas Linux, você deverá estar logado como usuário root (su) e executar o comando a seguir:<br />{% highlight bash %}<br /># rpm -e &lt;pacote&gt;{% endhighlight %}<br />&nbsp;Exemplo: {% highlight bash %}# rpm -e&nbsp; AdobeReader_ptb-8.1.7-1{% endhighlight %}<br /><br />Observação: Note que o nome do pacote a ser desinstalado deve ser exatamente igual ao nome registrado no banco de dados do RPM. Você pode descobrir o nome exato do pacote instalado no sistema, utilizando as opções de consulta apresentadas na seção Consultas deste artigo.<br /><br />Outra forma de executar a desinstalação de pacotes RPM é combinar recursos de consulta de nomes de pacotes e pesquisa de substrings em subshell do Linux, em uma única linha de comando.<br /><br />A forma típica do comando, neste caso, é&nbsp; {% highlight bash %}# rpm -e&nbsp; $(rpm -qa | grep -i &lt;substring&gt;){% endhighlight %}, onde:</b><br /><blockquote class="tr_bq"><b>&nbsp;&nbsp;&nbsp; $(…): é o subshell. Os comandos internos à este subshell são processados antes do comando externo.</b><br /><b>&nbsp;&nbsp;&nbsp; rpm -qa: é o comando de consulta de todos os pacotes RPM instalados no sistema.</b><br /><b>&nbsp;&nbsp;&nbsp; grep -i substring: este comando procura ocorrências do texto fornecido em substring na lista de pacotes RPM instalados no sistema, obtida pelo comando rpm -qa anterior e ignorando maiúsculas e minúsculas.</b><br /><b>&nbsp;&nbsp;&nbsp; &lt;substring&gt;: é um texto representando parte do nome do pacote RPM a ser desinstalado do sistema.&nbsp; </b></blockquote><b><br />Exemplo: {% highlight bash %}# rpm -e $(rpm -qa | grep -i adobe{% endhighlight %}<br /><br />Neste exemplo, serão desinstalados do sistema todos os pacotes RPM que contiverem adobe como parte de seu nome, desconsiderando-se maiúsculas e minúsculas.<br /><br />Observação: Tenha muito cuidado ao executar desinstalações desta forma, pois qualquer erro poderá ser fatal. Podem ser desinstalados outros pacotes que não os desejados e/ou que sejam importantes a seu sistema ou a seu trabalho!<br /><br /><br />Reconstrução do banco de dados do RPM<br /><br />O sistema RPM utiliza um banco de dados Berkeley DB, localizado no diretório /var/lib/rpm/, para armazenar metadados dos pacotes instalados em um sistema Linux.<br /><br />Embora sistemas Linux sejam bastante seguros e confiáveis, o banco de dados do RPM pode, eventualmente, sofrer quebras (corrupções). Caso isso ocorra, você não conseguirá gerenciar seus pacotes RPM. Por exemplo, você não conseguirá instalar novos pacotes no sistema.<br /><br />Para tentar corrigir este problema, estando logado como usuário root (su), execute o seguinte comando de reconstrução do banco de dados do RPM:<br />{% highlight bash %}<br /># rpm --rebuilddb{% endhighlight %}<br />Embora este comando seja utilizado em casos de corrupção do banco de dados do RPM, você poderá utilizá-lo periodicamente, de forma preventiva, mesmo que o banco de dados do RPM não apresente problemas aparentes.<br />Solução de problemas de transações não concluídas com o Yum<br /><br />Outro problema que também pode ocorrer, sobretudo quando ocorre instalação ou atualização de pacotes RPM, é a interrupção, por diversos motivos, do processo antes de sua conclusão, gerando transações não concluídas.<br /><br />Quando isso ocorrer, sempre que você for instalar ou atualizar pacotes com o Yum, receberá uma mensagem como a seguinte: There are unfinished transactions remaining. You might consider running yum-complete-transaction first to finish them.<br /><br />Para sanar este problema, será necessário estar logado como root (su) e executar o utilitário yum-complete-transaction, o qual está contido no pacote yum-utils:<br />{% highlight bash %}<br /># /usr/sbin/yum-complete-transaction{% endhighlight %}<br />Caso o pacote yum-utils não esteja instalado no sistema, instale-o com o comando a seguir:<br />{% highlight bash %}<br /># yum -y install yum-utils{% endhighlight %}<br /><br /><i><span style="font-size: x-small;"><span style="color: #666666;">Fontes:<br /><br />http://www.devin.com.br/<br />http://www.aprigiosimoes.com.br<br />http://imasters.com.br</span></span></i></b>