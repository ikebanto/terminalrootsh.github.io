---
layout: post
title: Como Instalar e Configurar o Servidor de DNS Bind
date: '2015-01-04T13:06:00.004-08:00'
description: Como Instalar e Configurar o Servidor de DNS Bind
main-class: 'linux'
color: '#3b5998'
author: Marcos Oliveira
tags:
- Linux
- Servidores
- GNU
modified_time: '2015-01-04T13:06:57.833-08:00'
thumbnail: http://2.bp.blogspot.com/-lv55gooNCjs/VKmrXCkk5BI/AAAAAAAABIw/Uln__lo_JLI/s72-c/bind9_debian.jpg
twitter_text: Como Instalar e Configurar o Servidor de DNS Bind
introduction: Como Instalar e Configurar o Servidor de DNS Bind
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-lv55gooNCjs/VKmrXCkk5BI/AAAAAAAABIw/Uln__lo_JLI/s1600/bind9_debian.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-lv55gooNCjs/VKmrXCkk5BI/AAAAAAAABIw/Uln__lo_JLI/s320/bind9_debian.jpg" /></a></div><b>Introdução</b><br /><b><br /></b><b><span style="color: blue;">BIND</span> (<span style="color: #0b5394;">Berkeley Internet Name Domain</span> ou, como chamado previamente, <span style="color: #0b5394;">Berkeley Internet Name Daemon</span>) é o servidor para o protocolo DNS mais utilizado na Internet.Foi criado por quatro estudantes de graduação, membros de um grupo de pesquisas em ciência da computação da Universidade de Berkeley.Para a versão 9, o BIND foi praticamente reescrito. Ele passou a suportar, dentre outras funcionalidades, a extensão <span style="color: red;">DNSSEC</span> e os protocolos <span style="color: red;">TSIG</span> e <span style="color: red;">IPv6</span>.</b><br /><b><br /></b><span style="font-size: large;"><b>1-Instalação</b></span><br /><b><br /></b><b>Para Debian e Debians-Like (Ubuntu, Linux Mint...) dnsutils será instalado juntamente com o pacote, ou seja, não precisa especificá-lo na instalação.</b><br /><b><br /></b><b>{% highlight bash %}# apt-get install bind9{% endhighlight %}</b><br /><span style="font-size: large;"><b>2- Configuração Inicial</b></span><br /><b>abra o arquivo named.conf.options informado e escreva o código abaixo, de acordo com seus IPs e antes do fechamento da chave "};" :</b><br /><b>{% highlight bash %}# vi /etc/bind/named.conf.options{% endhighlight %}</b><br /><b><br /></b><b>adicione, depois salve e feche o arquivo:</b><br /><b>{% highlight bash %}<br />listen-on { 127.0.0.1; 192.168.1.1/24; };<br />allow-query { 127.0.0.1; };<br />recursion yes;<br />allow-recursion { 127.0.0.1; 192.168.1.1/24; };{% endhighlight %}</b><br /><b><br /></b><span style="font-size: large;"><b>3- Configurar a Zona e a Zona Reversa</b></span><br /><b><br /></b><b>Depois edite o arquivo named.conf.local e escreva o código abaixo, de acordo com seus IPs e o nome do host que deseja, nesse exemplo vou utilizar "marcospinguim.com.br":</b><br /><b>{% highlight bash %}# vi /etc/bind/named.conf.local{% endhighlight %}</b><br /><b><br /></b><b>adicione:</b><br /><b><br /></b><b>{% highlight bash %}zone "marcospinguim.com.br" {<br />type master;<br />file "marcospinguim.com.br.zone";<br />allow-transfer { 192.168.1.7; };<br />};<br /><br />zone "0.168.192.in-addr.arpa" {<br />type master;<br />file "marcospinguim.com.br.rev";<br />allow-transfer { 192.168.1.7; };<br />};{% endhighlight %}</b><br /><b><br /></b><span style="font-size: large;"><b>4-Verificar se há erros nas alterações efetuadas</b></span><br /><b>{% highlight bash %}# named-checkconf{% endhighlight %}</b><br /><b><br /></b><b>se não receber nenhuma mensagem é porque está tudo correto até aqui.</b><br /><b><br /></b><span style="font-size: large;"><b>5-Criar o arquivo de zona</b></span><br /><b>crie o arquivo seuendereco.subdominio.dominio.zone, e abra-o, ex.:</b><br /><b>{% highlight bash %}# vi /var/cache/bind/marcospinguim.com.br.zone{% endhighlight %}</b><br /><b><br /></b><b>adicione de acordo com seus dados:</b><br /><b><br /></b><b>{% highlight bash %};<br />; Zone file for dominio.com.br<br />;<br />$TTL 86400<br />@ IN SOA ns1.marcospinguim.com.br. hostmaster.marcospinguim.com.br. (<br />2012010100 ; serial<br />7200  ; refresh<br />1800  ; retry<br />1209600  ; expire<br />300 )  ; minimum<br /><br />NS ns1<br />NS ns2<br />MX 5 mail<br />TXT "v=spf1 mx -all"<br />HINFO PC-Intel-2.4GHz "Linux 2.6"<br />A 192.168.1.100<br /><br />ns1  A 192.168.1.100<br />ns2  A 192.168.1.100<br />mail  A 192.168.1.100<br />www  CNAME @<br />ftp  CNAME www<br />pop3  CNAME mail<br />smtp  CNAME mail{% endhighlight %}</b><br /><b><br /></b><span style="font-size: large;"><b>6-Verificar se há erros nas zonas</b></span><br /><b>Execute o comando de acordo com seus dados:</b><br /><b>{% highlight bash %}# named-checkzone marcospinguim.com.br /var/cache/bind/marcospinguim.com.br.zone{% endhighlight %}</b><br /><b><br /></b><b>se der certo retornará algo tipo isso:</b><br /><b><br /></b><b>{% highlight bash %}zone marcospinguim.com.br/IN: loaded serial 2012010100<br />OK{% endhighlight %}<br /><br /><span style="font-size: large;">7 - Criar o arquivo de zona reversa</span><br />{% highlight bash %}# vi /var/cache/bind/marcospinguim.com.br.rev{% endhighlight %}<br /><br />adicione de acordo com seus dados:<br />{% highlight bash %};<br />; Reverse zone file for dominio.com.br<br />;<br />$TTL 86400<br />@ IN SOA ns1.dominio.com.br. hostmaster.marcospinguim.com.br. (<br />2012010100 ; serial<br />7200  ; refresh<br />1800  ; retry<br />1209600  ; expire<br />300 )  ; minimum<br /><br />NS ns1.marcospinguim.com.br.<br />NS ns2.marcospinguim.com.br.<br /><br />100  PTR marcospinguim.com.br.<br />10  PTR ns1.marcospinguim.com.br.<br />11  PTR ns2.marcospinguim.com.br.<br />57  PTR mail.marcospinguim.com.br.{% endhighlight %}<br /><br /><span style="font-size: large;">8-verificar se há erros nas zona reversa</span><br />{% highlight bash %}# named-checkzone 0.168.192.in-addr.arpa /var/cache/bind/marcospinguim.com.br.rev{% endhighlight %}<br /><br />se der certo retornará algo tipo isso:<br /><br />{% highlight bash %}zone 0.168.192.in-addr.arpa/IN: loaded serial 2012010100<br />OK{% endhighlight %}<br /><br /><span style="font-size: large;">9-reiniciar o Bind</span><br /># /etc/init.d/bind9 restart<br /><br />se der certo retornará isso:<br />{% highlight bash %}<br />* Stopping domain name service... bind9                                 [ OK ] <br />* Starting domain name service... bind9                                 [ OK ]{% endhighlight %}<br /><span style="font-size: large;">10- consultar o servidor DNS para testar as zonas</span><br />{% highlight bash %}$ dig @127.0.0.1 marcospinguim.com.br SOA{% endhighlight %}<br /><br />se der certo retornará algo tipo isso:<br /><br />{% highlight bash %}<br />; &lt;&lt;&gt;&gt; DiG 9.7.0-P1 &lt;&lt;&gt;&gt; @127.0.0.1 marcospinguim.com.br SOA<br />; (1 server found)<br />;; global options: +cmd<br />;; Got answer:<br />;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 64129<br />;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 2<br /><br />;; QUESTION SECTION:<br />;marcospinguim.com.br.  IN SOA<br /><br />;; ANSWER SECTION:<br />marcospinguim.com.br. 86400 IN SOA ns1.marcospinguim.com.br. hostmaster.marcospinguim.com.br. 2012010100 7200 1800 1209600 300<br /><br />;; AUTHORITY SECTION:<br />marcospinguim.com.br. 86400 IN NS ns1.marcospinguim.com.br.<br />marcospinguim.com.br. 86400 IN NS ns2.marcospinguim.com.br.<br /><br />;; ADDITIONAL SECTION:<br />ns1.marcospinguim.com.br. 86400 IN A 192.168.1.100<br />ns2.marcospinguim.com.br. 86400 IN A 192.168.0.101<br /><br />;; Query time: 3 msec<br />;; SERVER: 127.0.0.1#53(127.0.0.1)<br />;; WHEN: Thu Jan  5 19:29:53 2012<br />;; MSG SIZE  rcvd: 153{% endhighlight %}<br /><br />Pronto, existem outras formas, mas acredito que essa é a mais simples!<br /><br /><i style="color: #999999;">Fontes:<br />http://www.hardware.com.br/tutoriais/instalando-servidor-dns/<br />http://www.hardware.com.br/tutoriais/configurando-rede-linux/pagina7.html<br />http://www.hardware.com.br/tutoriais/servidores-dns/pagina4.html<br />http://blog.cesar.augustus.nom.br/instalando-o-servidor-bind-no-linux.html<br />http://www.hardware.com.br/tutoriais/opendns/<br />http://www.hardware.com.br/livros/linux-redes/configurando-bind.html<br />http://goo.gl/GEYz9<br />http://pt.wikipedia.org/wiki/BIND</i></b>