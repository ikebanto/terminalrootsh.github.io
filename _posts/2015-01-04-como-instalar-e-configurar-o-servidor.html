---
layout: post
title: Como Instalar e Configurar o Servidor de DNS Bind
date: '2015-01-04T13:06:00.004-08:00'
description: Como Instalar e Configurar o Servidor de DNS Bind
main-class: 'linux'
color: '#3b5998'
author: Marcos Oliveira
tags:
- Linux
- Servidores
- GNU
modified_time: '2015-01-04T13:06:57.833-08:00'
thumbnail: http://2.bp.blogspot.com/-lv55gooNCjs/VKmrXCkk5BI/AAAAAAAABIw/Uln__lo_JLI/s72-c/bind9_debian.jpg
twitter_text: Como Instalar e Configurar o Servidor de DNS Bind
introduction: Como Instalar e Configurar o Servidor de DNS Bind
---

<p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-lv55gooNCjs/VKmrXCkk5BI/AAAAAAAABIw/Uln__lo_JLI/s1600/bind9_debian.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-lv55gooNCjs/VKmrXCkk5BI/AAAAAAAABIw/Uln__lo_JLI/s320/bind9_debian.jpg" /></a></div><b>Introdução</b></p><p><b></p><p></b><b><span style="color: blue;">BIND</span> (<span style="color: #0b5394;">Berkeley Internet Name Domain</span> ou, como chamado previamente, <span style="color: #0b5394;">Berkeley Internet Name Daemon</span>) é o servidor para o protocolo DNS mais utilizado na Internet.Foi criado por quatro estudantes de graduação, membros de um grupo de pesquisas em ciência da computação da Universidade de Berkeley.Para a versão 9, o BIND foi praticamente reescrito. Ele passou a suportar, dentre outras funcionalidades, a extensão <span style="color: red;">DNSSEC</span> e os protocolos <span style="color: red;">TSIG</span> e <span style="color: red;">IPv6</span>.</b></p><p><b></p><p></b><span style="font-size: large;"><b>1-Instalação</b></span></p><p><b></p><p></b><b>Para Debian e Debians-Like (Ubuntu, Linux Mint...) dnsutils será instalado juntamente com o pacote, ou seja, não precisa especificá-lo na instalação.</b></p><p><b></p><p></b><b>{% highlight bash %}# apt-get install bind9{% endhighlight %}</b></p><p><span style="font-size: large;"><b>2- Configuração Inicial</b></span></p><p><b>abra o arquivo named.conf.options informado e escreva o código abaixo, de acordo com seus IPs e antes do fechamento da chave "};" :</b></p><p><b>{% highlight bash %}# vi /etc/bind/named.conf.options{% endhighlight %}</b></p><p><b></p><p></b><b>adicione, depois salve e feche o arquivo:</b></p><p><b>{% highlight bash %}</p><p>listen-on { 127.0.0.1; 192.168.1.1/24; };</p><p>allow-query { 127.0.0.1; };</p><p>recursion yes;</p><p>allow-recursion { 127.0.0.1; 192.168.1.1/24; };{% endhighlight %}</b></p><p><b></p><p></b><span style="font-size: large;"><b>3- Configurar a Zona e a Zona Reversa</b></span></p><p><b></p><p></b><b>Depois edite o arquivo named.conf.local e escreva o código abaixo, de acordo com seus IPs e o nome do host que deseja, nesse exemplo vou utilizar "marcospinguim.com.br":</b></p><p><b>{% highlight bash %}# vi /etc/bind/named.conf.local{% endhighlight %}</b></p><p><b></p><p></b><b>adicione:</b></p><p><b></p><p></b><b>{% highlight bash %}zone "marcospinguim.com.br" {</p><p>type master;</p><p>file "marcospinguim.com.br.zone";</p><p>allow-transfer { 192.168.1.7; };</p><p>};</p><p></p><p>zone "0.168.192.in-addr.arpa" {</p><p>type master;</p><p>file "marcospinguim.com.br.rev";</p><p>allow-transfer { 192.168.1.7; };</p><p>};{% endhighlight %}</b></p><p><b></p><p></b><span style="font-size: large;"><b>4-Verificar se há erros nas alterações efetuadas</b></span></p><p><b>{% highlight bash %}# named-checkconf{% endhighlight %}</b></p><p><b></p><p></b><b>se não receber nenhuma mensagem é porque está tudo correto até aqui.</b></p><p><b></p><p></b><span style="font-size: large;"><b>5-Criar o arquivo de zona</b></span></p><p><b>crie o arquivo seuendereco.subdominio.dominio.zone, e abra-o, ex.:</b></p><p><b>{% highlight bash %}# vi /var/cache/bind/marcospinguim.com.br.zone{% endhighlight %}</b></p><p><b></p><p></b><b>adicione de acordo com seus dados:</b></p><p><b></p><p></b><b>{% highlight bash %};</p><p>; Zone file for dominio.com.br</p><p>;</p><p>$TTL 86400</p><p>@ IN SOA ns1.marcospinguim.com.br. hostmaster.marcospinguim.com.br. (</p><p>2012010100 ; serial</p><p>7200  ; refresh</p><p>1800  ; retry</p><p>1209600  ; expire</p><p>300 )  ; minimum</p><p></p><p>NS ns1</p><p>NS ns2</p><p>MX 5 mail</p><p>TXT "v=spf1 mx -all"</p><p>HINFO PC-Intel-2.4GHz "Linux 2.6"</p><p>A 192.168.1.100</p><p></p><p>ns1  A 192.168.1.100</p><p>ns2  A 192.168.1.100</p><p>mail  A 192.168.1.100</p><p>www  CNAME @</p><p>ftp  CNAME www</p><p>pop3  CNAME mail</p><p>smtp  CNAME mail{% endhighlight %}</b></p><p><b></p><p></b><span style="font-size: large;"><b>6-Verificar se há erros nas zonas</b></span></p><p><b>Execute o comando de acordo com seus dados:</b></p><p><b>{% highlight bash %}# named-checkzone marcospinguim.com.br /var/cache/bind/marcospinguim.com.br.zone{% endhighlight %}</b></p><p><b></p><p></b><b>se der certo retornará algo tipo isso:</b></p><p><b></p><p></b><b>{% highlight bash %}zone marcospinguim.com.br/IN: loaded serial 2012010100</p><p>OK{% endhighlight %}</p><p></p><p><span style="font-size: large;">7 - Criar o arquivo de zona reversa</span></p><p>{% highlight bash %}# vi /var/cache/bind/marcospinguim.com.br.rev{% endhighlight %}</p><p></p><p>adicione de acordo com seus dados:</p><p>{% highlight bash %};</p><p>; Reverse zone file for dominio.com.br</p><p>;</p><p>$TTL 86400</p><p>@ IN SOA ns1.dominio.com.br. hostmaster.marcospinguim.com.br. (</p><p>2012010100 ; serial</p><p>7200  ; refresh</p><p>1800  ; retry</p><p>1209600  ; expire</p><p>300 )  ; minimum</p><p></p><p>NS ns1.marcospinguim.com.br.</p><p>NS ns2.marcospinguim.com.br.</p><p></p><p>100  PTR marcospinguim.com.br.</p><p>10  PTR ns1.marcospinguim.com.br.</p><p>11  PTR ns2.marcospinguim.com.br.</p><p>57  PTR mail.marcospinguim.com.br.{% endhighlight %}</p><p></p><p><span style="font-size: large;">8-verificar se há erros nas zona reversa</span></p><p>{% highlight bash %}# named-checkzone 0.168.192.in-addr.arpa /var/cache/bind/marcospinguim.com.br.rev{% endhighlight %}</p><p></p><p>se der certo retornará algo tipo isso:</p><p></p><p>{% highlight bash %}zone 0.168.192.in-addr.arpa/IN: loaded serial 2012010100</p><p>OK{% endhighlight %}</p><p></p><p><span style="font-size: large;">9-reiniciar o Bind</span></p><p># /etc/init.d/bind9 restart</p><p></p><p>se der certo retornará isso:</p><p>{% highlight bash %}</p><p>* Stopping domain name service... bind9                                 [ OK ] </p><p>* Starting domain name service... bind9                                 [ OK ]{% endhighlight %}</p><p><span style="font-size: large;">10- consultar o servidor DNS para testar as zonas</span></p><p>{% highlight bash %}$ dig @127.0.0.1 marcospinguim.com.br SOA{% endhighlight %}</p><p></p><p>se der certo retornará algo tipo isso:</p><p></p><p>{% highlight bash %}</p><p>; &lt;&lt;&gt;&gt; DiG 9.7.0-P1 &lt;&lt;&gt;&gt; @127.0.0.1 marcospinguim.com.br SOA</p><p>; (1 server found)</p><p>;; global options: +cmd</p><p>;; Got answer:</p><p>;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 64129</p><p>;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 2</p><p></p><p>;; QUESTION SECTION:</p><p>;marcospinguim.com.br.  IN SOA</p><p></p><p>;; ANSWER SECTION:</p><p>marcospinguim.com.br. 86400 IN SOA ns1.marcospinguim.com.br. hostmaster.marcospinguim.com.br. 2012010100 7200 1800 1209600 300</p><p></p><p>;; AUTHORITY SECTION:</p><p>marcospinguim.com.br. 86400 IN NS ns1.marcospinguim.com.br.</p><p>marcospinguim.com.br. 86400 IN NS ns2.marcospinguim.com.br.</p><p></p><p>;; ADDITIONAL SECTION:</p><p>ns1.marcospinguim.com.br. 86400 IN A 192.168.1.100</p><p>ns2.marcospinguim.com.br. 86400 IN A 192.168.0.101</p><p></p><p>;; Query time: 3 msec</p><p>;; SERVER: 127.0.0.1#53(127.0.0.1)</p><p>;; WHEN: Thu Jan  5 19:29:53 2012</p><p>;; MSG SIZE  rcvd: 153{% endhighlight %}</p><p></p><p>Pronto, existem outras formas, mas acredito que essa é a mais simples!</p><p></p><p><i style="color: #999999;">Fontes:</p><p>http://www.hardware.com.br/tutoriais/instalando-servidor-dns/</p><p>http://www.hardware.com.br/tutoriais/configurando-rede-linux/pagina7.html</p><p>http://www.hardware.com.br/tutoriais/servidores-dns/pagina4.html</p><p>http://blog.cesar.augustus.nom.br/instalando-o-servidor-bind-no-linux.html</p><p>http://www.hardware.com.br/tutoriais/opendns/</p><p>http://www.hardware.com.br/livros/linux-redes/configurando-bind.html</p><p>http://goo.gl/GEYz9</p><p>http://pt.wikipedia.org/wiki/BIND</i></b>

</p>
