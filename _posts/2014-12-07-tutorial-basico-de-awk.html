---
layout: post
title: Tutorial básico de AWK
date: '2014-12-07T05:38:00.003-08:00'
description: Tutorial básico de AWK
main-class: 'misc'
color: '#34a853'
author: Marcos Oliveira
tags:
- AWK
modified_time: '2014-12-07T05:38:25.715-08:00'
thumbnail: http://2.bp.blogspot.com/-udDOCGatbhA/UdDSJZSefbI/AAAAAAAACFo/S9HDtGEQUcc/s72-c/Passaro_Thiele.png
twitter_text: Tutorial básico de AWK
introduction: Tutorial básico de AWK
---

<p>
</p><p><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-udDOCGatbhA/UdDSJZSefbI/AAAAAAAACFo/S9HDtGEQUcc/s250/Passaro_Thiele.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-udDOCGatbhA/UdDSJZSefbI/AAAAAAAACFo/S9HDtGEQUcc/s250/Passaro_Thiele.png" /></a></div></p><p></p><p><h3><span style="clear: left; float: left; font-family: Verdana,sans-serif; font-size: small;"><b><span style="color: #666666;">AWK tem a mesma pronúncia de Auk,</p><p> uma espécie de pássaro.</span></b></span></h3></p><p></p><p></p><p><b><span style="font-size: x-large;">Introdução</span></b></p><p><blockquote class="tr_bq"><b><span style="color: blue;">AWK</span> é uma <i>linguagem de programação</i> interpretada que é, geralmente, usada para deixar os <strike>scripts de shell mais poderosos</strike> e com mais recursos. É usada mais para processar dados nos textos e operações com arquivos. </b></blockquote><b></p><p><span style="font-size: large;">O nome tem origem na primeira letra do sobrenome de cada um dos criadores:</span></b></p><p><ul><li><span style="color: purple;"><b>&nbsp;&nbsp;&nbsp; Alfred Aho</b></span></li><span style="color: purple;"></span><li><span style="color: purple;"><b>&nbsp;&nbsp;&nbsp; Peter Weinberger</b></span></li><span style="color: purple;"></span><li><span style="color: purple;"><b>&nbsp;&nbsp;&nbsp; Brian Kernighan</b></span></li></ul><b>&nbsp;&nbsp; </p><p>Esta linguagem, é considerada por muitos, um importante marco para história da programação, tendo tido bastante influência na criação de outras linguagens de programação, como, por exemplo, <span style="color: blue;">Perl</span> e <span style="color: blue;">Python</span>.</p><p>&nbsp;&nbsp; </p><p><span style="font-size: large;">Variantes do AWK: </span></b></p><p><ul><li><span style="color: blue;"><b><span style="color: purple;">BWK</span>: conhecido também AWK ou NAWK se refere à versão por Brian Kernighan .</b></span></li><span style="color: blue;"></span><li><span style="color: blue;"><b><span style="color: purple;">GAWK</span>:(GNU AWK) é outra implementação do software livre (OPEN SOURCE)</b></span></li><span style="color: blue;"></span><li><span style="color: blue;"><b><span style="color: purple;">MAWK</span>:é uma versão muito mais rápida implementação AWK por Mike Brennan</b></span></li><span style="color: blue;"></span><li><span style="color: purple;"><b>(...)</b></span></li></ul><b></p><p><span style="font-size: large;">Exemplo 1:</span></b></p><p><div class="adp"><b>$ awk '{ print "Hello, World" }'</b></div><b></p><p></b></p><p><div class="adp"><b>$ awk -f hello.awk</b></div><b></p><p></p><p>A flag "<i>-f</i>" diz que o comando a seguir é um programa a ser executado.</p><p></p><p>Para um programa executável, usar o <span style="color: blue;">/usr/bin/awk</span>.</p><p></p><p>Exemplo, crie um arquivo "<i>world.awk</i>" com o conteúdo:</b></p><p><div class="adp"><b></p><p></b><b># !/usr/bin/awk -f</b></p><p><b># My first awk script</b></p><p><b>{ print "Hello, World!" }</b></div><b></p><p></p><p>Tornando este arquivo executável:</p><p></p><p>{% highlight bash %}$ chmod +x world.awk{% endhighlight %}</p><p></p><p>Executando:</p><p></p><p>{% highlight bash %}$ ./world.awk{% endhighlight %}</p><p></p><p><span style="font-size: large;">Variáveis da Linguagem</span></p><p></p><p>Salve o arquivo: <i>caes.txt</i></b></p><p><div class="adp"><b></p><p></b><b>rex&nbsp;&nbsp;&nbsp;&nbsp; marelo&nbsp;&nbsp;&nbsp; calmo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; magro</b></p><p><b>branco&nbsp; branco&nbsp;&nbsp;&nbsp; zangado&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; magro</b></p><p><b>lennon&nbsp; branco&nbsp;&nbsp;&nbsp; brincalhao&nbsp;&nbsp;&nbsp; gordo</b></p><p><b>fred&nbsp;&nbsp;&nbsp; branco&nbsp;&nbsp;&nbsp; zangado&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gordo</b></div><b></p><p></p><p>Imprime o arquivo inteiro</p><p>{% highlight bash %}awk '{print $0}'{% endhighlight %}</p><p><div class="adp"></p><p>&nbsp;&nbsp;&nbsp; $1 imprime o nome do cachorro,</p><p>&nbsp;&nbsp;&nbsp; $2 a cor,</p><p>&nbsp;&nbsp;&nbsp; $3 seu humor,</p><p>&nbsp;&nbsp;&nbsp; $4 seu condicionamento físico. </div></p><p></p><p>Podemos usar essas variáveis dentro do comando print. Nele, sempre que colocamos uma vírgula, estamos espaçando:</p><p></p><p>{% highlight bash %}$ awk '{print "O",$1,"é",$4}' caes.txt{% endhighlight %}</p><p><div class="adp"></p><p>&nbsp;&nbsp;&nbsp; o rex é magro</p><p>&nbsp;&nbsp;&nbsp; o branco é magro</p><p>&nbsp;&nbsp;&nbsp; o lennon é gordo</p><p>&nbsp;&nbsp;&nbsp; o fred é gordo </div></p><p></p><p>{% highlight bash %}$ awk '{print "O"$1"é"$4}' caes.txt{% endhighlight %}</p><p><div class="adp"></p><p>&nbsp;&nbsp;&nbsp; o rexémagro</p><p>&nbsp;&nbsp;&nbsp; o brancoémagro</p><p>&nbsp;&nbsp;&nbsp; o lennonégordo</p><p>&nbsp;&nbsp;&nbsp; o fredégordo </div></p><p></p><p><span style="font-size: large;">BEGIN</span></b><span style="color: #444444;"><i>Com o begin, o AWK não espera por uma entrada (como digitar ENTER duas vezes), ele executa tudo daquele bloco:</i></span><b></p><p></p><p>{% highlight bash %}$ awk 'BEGIN {print "Vai ser tudo \n imprimido \n de uma vez só\n"}'{% endhighlight %}</p><p><div class="adp"></p><p>&nbsp;&nbsp;&nbsp; Vai ser tudo</p><p>&nbsp;&nbsp;&nbsp; imprimido</p><p>&nbsp;&nbsp;&nbsp; de uma vez só</div></p><p></p><p><span style="font-size: x-large;">Dicas</span></p><p>&nbsp;&nbsp; </b></p><p><ul><li><b>&nbsp;&nbsp; &nbsp; Usamos a flag "-F" pra informar ao AWK que iremos usar a CSV (comma separeted values, valores separados por vírgula).</b></li><li><b>&nbsp;&nbsp; &nbsp; Assim como na linguagem C, AWK também possui o comado "printf", que é bem mais flexível que o "print". A única coisa que o print faz que o printf não faz, é colocar automaticamente uma nova linha ao final da string (\n).{% highlight bash %}$ awk '{ printf "Cor do cachorro %s: %s\n", $1, $2}' caes.txt {% endhighlight %}</b></li><li><b>&nbsp;&nbsp; &nbsp; sprintf: Ela age e tem a mesma sintaxe da "printf". A diferença é que sua saída é armazenada em uma variável, ao invés de ser exibida na tela.</b></li></ul><b>&nbsp;&nbsp; &nbsp; </p><p><span style="font-size: x-large;">Variáveis definidas pelo usuário</span></p><p></p><p><span style="color: purple;"><i>Não pode começar variáveis por dígitos, elas são case sensitivo, não devem ter o mesmo nome das variáveis do AWK, nem de outros comandos e não precisam ser inicializadas ou declaradas.</i></span></p><p></p><p><u>Ao usar pela primeira uma variável, ela é tanto uma string vazia("") como "0", mas não é muito bom confiar seu script nesses valores iniciais.</u></p><p></p><p><i>AWK é fracamente tipado, ou seja, você pode atribuir um número a uma variável e sem seguida atribuir uma string, por exemplo.</i></p><p></p><p>Ex.: Salvar como "<i>caes2.awk</i>"</b></p><p><div class="adp"><b></p><p></b><b>BEGIN { nomecor="%-15s %20s\n"; printf nomecor, "Nome", "Cor\n"}</b></p><p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { printf nomecor, $1, $2}</b></div><b></p><p></p><p><span style="font-size: x-large;">if e operadores de comparação</span></p><p></p><p>São as instruções de controle que controlam o fluxo da execução dos programas em AWK. Em AWK, elas são similares as de C, além de possuírem os mesmos loopings e interações do padrão Shell.</p><p></p><p>Elas são: if, while, for, do e similares.</p><p></p><p>Arquivo: <i>gnu.txt</i></b></p><p><div class="adp"><b></p><p></b><b>Eric&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;59&nbsp; 3&nbsp;&nbsp; 2112</b></p><p><b>Linus&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;30&nbsp; 5&nbsp;&nbsp; 578</b></p><p><b>Richard&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;40&nbsp; 3&nbsp;&nbsp; 2789</b></p><p><b>Marcos&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;24&nbsp; 1&nbsp;&nbsp; 134</b></div><b></p><p></p><p>{% highlight bash %}$ awk '{ if($4 &gt; 2000) print $1 }' gnu.txt{% endhighlight %}</p><p></p><p><span style="font-size: x-large;">Direcionando a saída</span></p><p></p><p>{% highlight bash %}$ awk 'BEGIN {print 1+1 &gt; "resultado" }'{% endhighlight %}</p><p></p><p>else e else if</p><p></b></p><p><div class="adp"><b></p><p></b><b>#!/usr/bin/awk -f</b></p><p><b>{</b></p><p><b>&nbsp;&nbsp;&nbsp; if( $1 == "Eric" )</b></p><p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf "O primeiro\n"</b></p><p><b>&nbsp;&nbsp;&nbsp; else if( $1 == "Linus" )</b></p><p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf "o segundo\n"</b></p><p><b>&nbsp;&nbsp;&nbsp; else</b></p><p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf "Ouro cara\n"</b></p><p><b>}</b></div><b></p><p></p><p><i><span style="font-size: x-small;"><span style="color: blue;">Referências</span>:</p><p>https://pt.wikipedia.org/wiki/Awk</p><p>http://www.vivaolinux.com.br/artigo/AWK-Introducao</p><p></p><p><span style="color: blue;">Outros links:</span></p><p>http://www.zago.eti.br/script/awk.html</p><p>http://www.lpic.com.br/shell/comandos/awk/print/print.pdf</p><p>http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawkA4.pdf</p><p>http://www.faqs.org/faqs/computer-lang/awk/faq/</p><p>http://www.gnu.org/software/gawk/manual/gawk.html</span></i></b>

</p>
