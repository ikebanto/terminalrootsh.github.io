---
layout: post
title: Tutorial básico de AWK
date: '2014-12-07T05:38:00.003-08:00'
description: Tutorial básico de AWK
main-class: 'misc'
color: '#34a853'
author: Marcos Oliveira
tags:
- AWK
modified_time: '2014-12-07T05:38:25.715-08:00'
thumbnail: http://2.bp.blogspot.com/-udDOCGatbhA/UdDSJZSefbI/AAAAAAAACFo/S9HDtGEQUcc/s72-c/Passaro_Thiele.png
twitter_text: Tutorial básico de AWK
introduction: Tutorial básico de AWK
---

<p>

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-udDOCGatbhA/UdDSJZSefbI/AAAAAAAACFo/S9HDtGEQUcc/s250/Passaro_Thiele.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-udDOCGatbhA/UdDSJZSefbI/AAAAAAAACFo/S9HDtGEQUcc/s250/Passaro_Thiele.png" /></a></div>

<h3><span style="clear: left; float: left; font-family: Verdana,sans-serif; font-size: small;"><b><span style="color: #666666;">AWK tem a mesma pronúncia de Auk,
 uma espécie de pássaro.</span></b></span></h3>


<p><span style="font-size: x-large;">Introdução</span></p>
<blockquote class="tr_bq"><b><span style="color: blue;">AWK</span> é uma <i>linguagem de programação</i> interpretada que é, geralmente, usada para deixar os <strike>scripts de shell mais poderosos</strike> e com mais recursos. É usada mais para processar dados nos textos e operações com arquivos. </b></blockquote><b>
<span style="font-size: large;">O nome tem origem na primeira letra do sobrenome de cada um dos criadores:</span></b>
<ul><li><span style="color: purple;"><b> Alfred Aho</b></span></li><span style="color: purple;"></span><li><span style="color: purple;"><b> Peter Weinberger</b></span></li><span style="color: purple;"></span><li><span style="color: purple;"><b> Brian Kernighan</b></span></li></ul><b> 
Esta linguagem, é considerada por muitos, um importante marco para história da programação, tendo tido bastante influência na criação de outras linguagens de programação, como, por exemplo, <span style="color: blue;">Perl</span> e <span style="color: blue;">Python</span>.
 
<span style="font-size: large;">Variantes do AWK: </span></b>
<ul><li><span style="color: blue;"><b><span style="color: purple;">BWK</span>: conhecido também AWK ou NAWK se refere à versão por Brian Kernighan .</b></span></li><span style="color: blue;"></span><li><span style="color: blue;"><b><span style="color: purple;">GAWK</span>:(GNU AWK) é outra implementação do software livre (OPEN SOURCE)</b></span></li><span style="color: blue;"></span><li><span style="color: blue;"><b><span style="color: purple;">MAWK</span>:é uma versão muito mais rápida implementação AWK por Mike Brennan</b></span></li><span style="color: blue;"></span><li><span style="color: purple;"><b>(...)</b></span></li></ul><b>
<span style="font-size: large;">Exemplo 1:</span></b>
<div class="adp"><b>$ awk '{ print "Hello, World" }'</b></div><b>
</b>
<div class="adp"><b>$ awk -f hello.awk</b></div><b>

A flag "<i>-f</i>" diz que o comando a seguir é um programa a ser executado.

Para um programa executável, usar o <span style="color: blue;">/usr/bin/awk</span>.

Exemplo, crie um arquivo "<i>world.awk</i>" com o conteúdo:</b>
<div class="adp"><b>
</b><b># !/usr/bin/awk -f</b>
<p># My first awk script</p>
<b>{ print "Hello, World!" }</b></div><b>

Tornando este arquivo executável:

{% highlight bash %}
$ chmod +x world.awk
{% endhighlight %}

Executando:

{% highlight bash %}
$ ./world.awk
{% endhighlight %}

<span style="font-size: large;">Variáveis da Linguagem</span>

Salve o arquivo: <i>caes.txt</i></b>
<div class="adp"><b>
</b><b>rex marelo calmo magro</b>
<p>branco branco zangado magro</p>
<p>lennon branco brincalhao gordo</p>
<b>fred branco zangado gordo</b></div><b>

Imprime o arquivo inteiro
{% highlight bash %}
awk '{print $0}'
{% endhighlight %}

 $1 imprime o nome do cachorro,
 $2 a cor,
 $3 seu humor,
 $4 seu condicionamento físico. 

Podemos usar essas variáveis dentro do comando print. Nele, sempre que colocamos uma vírgula, estamos espaçando:

{% highlight bash %}
$ awk '{print "O",$1,"é",$4}' caes.txt
{% endhighlight %}
<div class="adp">
 o rex é magro
 o branco é magro
 o lennon é gordo
 o fred é gordo </div>

{% highlight bash %}
$ awk '{print "O"$1"é"$4}' caes.txt
{% endhighlight %}

 o rexémagro
 o brancoémagro
 o lennonégordo
 o fredégordo 

BEGINCom o begin, o AWK não espera por uma entrada (como digitar ENTER duas vezes), ele executa tudo daquele bloco:

{% highlight bash %}
$ awk 'BEGIN {print "Vai ser tudo \n imprimido \n de uma vez só\n"}'
{% endhighlight %}
<div class="adp">
 Vai ser tudo
 imprimido
 de uma vez só</div>

<span style="font-size: x-large;">Dicas</span>
 </b>
  Usamos a flag "-F" pra informar ao AWK que iremos usar a CSV (comma separeted values, valores separados por vírgula).  Assim como na linguagem C, AWK também possui o comado "printf", que é bem mais flexível que o "print". A única coisa que o print faz que o printf não faz, é colocar automaticamente uma nova linha ao final da string (\n).{% highlight bash %}
$ awk '{ printf "Cor do cachorro %s: %s\n", $1, $2}' caes.txt 
{% endhighlight %}  sprintf: Ela age e tem a mesma sintaxe da "printf". A diferença é que sua saída é armazenada em uma variável, ao invés de ser exibida na tela.  
Variáveis definidas pelo usuário

Não pode começar variáveis por dígitos, elas são case sensitivo, não devem ter o mesmo nome das variáveis do AWK, nem de outros comandos e não precisam ser inicializadas ou declaradas.

Ao usar pela primeira uma variável, ela é tanto uma string vazia("") como "0", mas não é muito bom confiar seu script nesses valores iniciais.

AWK é fracamente tipado, ou seja, você pode atribuir um número a uma variável e sem seguida atribuir uma string, por exemplo.

Ex.: Salvar como "caes2.awk"

BEGIN { nomecor="%-15s %20s\n"; printf nomecor, "Nome", "Cor\n"}
 { printf nomecor, $1, $2}

if e operadores de comparação

São as instruções de controle que controlam o fluxo da execução dos programas em AWK. Em AWK, elas são similares as de C, além de possuírem os mesmos loopings e interações do padrão Shell.

Elas são: if, while, for, do e similares.

Arquivo: gnu.txt

Eric    59 3 2112
Linus    30 5 578
Richard   40 3 2789
Marcos   24 1 134

{% highlight bash %}
$ awk '{ if($4 > 2000) print $1 }' gnu.txt
{% endhighlight %}

<span style="font-size: x-large;">Direcionando a saída</span>

{% highlight bash %}
$ awk 'BEGIN {print 1+1 > "resultado" }'
{% endhighlight %}

else e else if


#!/usr/bin/awk -f
{
 if( $1 == "Eric" )
 printf "O primeiro\n"
 else if( $1 == "Linus" )
 printf "o segundo\n"
 else
 printf "Ouro cara\n"
}

Referências:
https://pt.wikipedia.org/wiki/Awk
http://www.vivaolinux.com.br/artigo/AWK-Introducao

Outros links:
http://www.zago.eti.br/script/awk.html
http://www.lpic.com.br/shell/comandos/awk/print/print.pdf
http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawkA4.pdf
http://www.faqs.org/faqs/computer-lang/awk/faq/
http://www.gnu.org/software/gawk/manual/gawk.html


